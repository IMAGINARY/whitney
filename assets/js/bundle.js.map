{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/events/events.js","src/es6/lib/disc.js","src/es6/lib/rainbow.js","src/es6/lib/slider.js","src/es6/lib/tine.js","src/es6/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","EventEmitter","this","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","arguments","err","context","Array","slice","apply","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","listenerCount","evlistener","emitter","_paper","_tine","Disc","center","radius","tineCount","colors","_classCallCheck","showTracks","showBackground","speed","path","createPath","zero","createZero","tines","createTines","events","_events2","default","count","tineSize","maxR","speedFactor","color","tracks","_paper2","Path","Circle","strokeColor","_tine2","ev","forEach","tine","onFrame","id","fillColor","opacity","Line","add","Point","rainbow","steps","answer","Color","hue","saturation","brightness","alpha","Slider","element","_this","down","value","min","max","snapMargin","snapPoints","snapTo","from","to","snapElements","map","snap","createSnapElement","snapElement","appendChild","handle","document","createElement","setAttribute","addEventListener","onMouseDown","bind","onMouseMove","onMouseUp","setValue","snapPoint","ratio","valueToRatio","style","left","button","onSlideTo","clientX","snapValue","offset","rect","getBoundingClientRect","handleOffset","Math","width","ratioToValue","snappedValue","moveHandle","Tine","parent","size","buildPath","setAngle","newAngle","onZero","angle","rotate","delta","_tone","_disc","_slider","_rainbow","canvas","getElementById","setup","_rainbow2","discCenter","view","discRadius","height","disc","_disc2","scale","_tone2","Frequency","transpose","synth","PolySynth","Synth","toMaster","set","attack","decay","sustain","release","notesToPlay","tineID","_slider2","setSpeed","deltaY","triggerAttackRelease","draw"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","import paper from 'paper';\nimport EventEmitter from 'events';\nimport Tine from './tine';\n\nexport default class Disc {\n  constructor(center, radius, tineCount, colors) {\n    this.showTracks = false;\n    this.showBackground = false;\n    this.center = center;\n    this.radius = radius;\n    this.speed = 0;\n    this.path = this.showBackground ? Disc.createPath(center, radius) : null;\n    this.zero = Disc.createZero(center, radius);\n    this.tines = this.createTines(tineCount, colors);\n    this.events = new EventEmitter();\n  }\n\n  createTines(count, colors) {\n    const tines = [];\n    const tineSize = (this.radius / count) * 2;\n    const minR = 0;\n    const maxR = this.radius - tineSize / 2;\n\n    for (let i = 0; i < count; i += 1) {\n      const r = minR + ((maxR - minR) / count) * (i + 1);\n      const speedFactor = i + 1;\n      const color = colors[i % colors.length];\n      if (this.showTracks) {\n        this.tracks = [];\n        this.tracks.push(new paper.Path.Circle(this.center, r)\n          .strokeColor = 'white');\n      }\n      tines.push(new Tine(i + 1, this, r, tineSize, color, speedFactor));\n    }\n\n    return tines;\n  }\n\n  onFrame(ev) {\n    this.tines.forEach(tine => tine.onFrame(ev));\n  }\n\n  onZero(tine) {\n    this.events.emit('zero', tine.id);\n  }\n\n  setSpeed(speed) {\n    this.speed = speed * 1 / (this.tines.length * 2);\n  }\n\n  static createPath(center, radius) {\n    const path = new paper.Path.Circle(center, radius);\n    path.fillColor = 'white';\n    path.opacity = 0.05;\n\n    return path;\n  }\n\n  static createZero(center, radius) {\n    const path = new paper.Path.Line(center, center.add(new paper.Point(radius, 0)));\n    path.strokeColor = 'white';\n  }\n}\n","import paper from 'paper';\n\nexport default function rainbow(steps) {\n  const answer = [];\n\n  // const keyColors = [\n  //   '#fe0000',\n  //   '#ff6200',\n  //   '#ffff00',\n  //   '#16cd16',\n  //   '#0f8eff',\n  //   '#6927bf',\n  //   '#bc31ff',\n  // ];\n\n  for (let i = 0; i < steps; i += 1) {\n    answer.push(new paper.Color({\n      hue: (((steps - 1) - i) * (270 / steps)),\n      saturation: 1,\n      brightness: 1,\n      alpha: 1,\n    }));\n  }\n\n  return answer;\n}\n","import EventEmitter from 'events';\n\nexport default class Slider {\n  constructor(element) {\n    this.down = false;\n\n    this.value = 0;\n    this.min = -1;\n    this.max = 1;\n    this.snapMargin = 0.25;\n\n    this.snapPoints = [\n      { snapTo: 0, from: this.snapMargin * -1, to: this.snapMargin },\n      // { snapTo: this.min, from: this.min, to: this.min + this.snapMargin },\n      // { snapTo: this.max, from: this.max - this.snapMargin, to: this.max },\n    ];\n\n    this.element = element;\n    this.snapElements = this.snapPoints.map(snap => this.createSnapElement(snap));\n    this.snapElements.forEach(snapElement => this.element.appendChild(snapElement));\n    this.handle = document.createElement('div');\n    this.element.appendChild(this.handle);\n    this.handle.setAttribute('class', 'handle');\n\n    this.events = new EventEmitter();\n\n    this.element.addEventListener('mousedown', this.onMouseDown.bind(this));\n    document.addEventListener('mousemove', this.onMouseMove.bind(this));\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\n\n    this.setValue(this.value);\n  }\n\n  createSnapElement(snapPoint) {\n    const element = document.createElement('div');\n    element.setAttribute('class', 'snap');\n    const ratio = this.valueToRatio(snapPoint.snapTo);\n    element.style.left = `${ratio * 100}%`;\n\n    return element;\n  }\n\n  onMouseDown(ev) {\n    if (ev.button === 0) {\n      this.down = true;\n    }\n    this.onSlideTo(ev.clientX);\n  }\n\n  onMouseMove(ev) {\n    if (this.down) {\n      this.onSlideTo(ev.clientX);\n    }\n  }\n\n  onMouseUp(ev) {\n    if (ev.button === 0) {\n      this.setValue(this.snapValue(this.value));\n      this.down = false;\n    }\n  }\n\n  onSlideTo(offset) {\n    const rect = this.element.getBoundingClientRect();\n    const handleOffset = Math.min(\n      Math.max(0, offset - rect.left),\n      rect.width\n    );\n    const ratio = handleOffset / rect.width;\n    this.setValue(this.ratioToValue(ratio));\n  }\n\n  moveHandle(value) {\n    const ratio = this.valueToRatio(value);\n    this.handle.style.left = `${ratio * 100}%`;\n  }\n\n  ratioToValue(ratio) {\n    return this.min + ratio * (this.max - this.min);\n  }\n\n  valueToRatio(value) {\n    return (value - this.min) / (this.max - this.min);\n  }\n\n  snapValue(value) {\n    let snappedValue = value;\n    this.snapPoints.forEach((snap) => {\n      if (snappedValue >= snap.from && snappedValue <= snap.to) {\n        snappedValue = snap.snapTo;\n      }\n    });\n\n    return snappedValue;\n  }\n\n  setValue(value) {\n    this.value = value;\n    this.moveHandle(value);\n    this.events.emit('changed', this.value);\n  }\n}\n","import paper from 'paper';\n\nexport default class Tine {\n  constructor(id, parent, radius, size, fillColor, speedFactor) {\n    this.id = id;\n    this.parent = parent;\n    this.radius = radius;\n    this.size = size;\n    this.fillColor = fillColor;\n    this.speedFactor = speedFactor;\n    this.path = Tine.buildPath(this.size, this.fillColor);\n    this.setAngle(0);\n  }\n\n  setAngle(newAngle) {\n    if (newAngle >= 360 || newAngle < 0) {\n      this.onZero();\n    }\n    this.angle = newAngle >= 0 ? newAngle % 360 : 360 + newAngle;\n    this.path.position = new paper.Point(this.radius, 0)\n      .rotate(this.angle)\n      .add(this.parent.center);\n  }\n\n  onFrame(ev) {\n    if (this.parent.speed !== 0) {\n      this.setAngle(this.angle + ev.delta * 360 * this.parent.speed * this.speedFactor);\n    }\n  }\n\n  onZero() {\n    this.parent.onZero(this);\n  }\n\n  static buildPath(size, fillColor) {\n    const path = new paper.Path.Circle(new paper.Point(0, 0), size / 2);\n    path.fillColor = fillColor;\n    return path;\n  }\n}\n","import paper from 'paper';\nimport Tone from 'tone';\nimport Disc from './lib/disc';\nimport Slider from './lib/slider';\nimport rainbow from './lib/rainbow';\n\nconst canvas = document.getElementById('mainCanvas');\npaper.setup(canvas);\n\nconst tineCount = 48;\nconst colors = rainbow(tineCount);\nconst discCenter = paper.view.center;\nconst discRadius = Math.min(paper.view.size.height, paper.view.size.width) / 2;\nconst disc = new Disc(discCenter, discRadius, tineCount, colors);\n\nconst scale = [];\nfor (let i = 0; i !== tineCount; i += 1) {\n  scale.push(Tone.Frequency('A2').transpose(i));\n}\nconst synth = new Tone.PolySynth(48, Tone.Synth).toMaster();\nsynth.set('envelope', {\n  attack: 0,\n  decay: 0.1,\n  sustain: 0.3,\n  release: 1,\n});\n\nconst notesToPlay = [];\ndisc.events.on('zero', (tineID) => {\n  notesToPlay.push(scale[tineID - 1]);\n});\n\nconst slider = new Slider(document.getElementById('speedSlider'));\nslider.events.on('changed', (value) => {\n  disc.setSpeed(value);\n});\n\ndocument.addEventListener('wheel', (ev) => {\n  disc.setSpeed(Math.min(ev.deltaY / 5000, 1));\n});\n\npaper.view.onFrame = ((ev) => {\n  notesToPlay.length = 0;\n  disc.onFrame(ev);\n  synth.triggerAttackRelease(notesToPlay, '8n');\n});\npaper.view.draw();\n"]}