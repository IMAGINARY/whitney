!function(){function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){return s(e[o][1][t]||t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}return t}()({1:[function(t,e,i){!function(t,n){"object"==typeof i&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(t.acorn={})}(this,function(t){"use strict";function e(t,e){for(var i=65536,n=0;n<e.length;n+=2){if((i+=e[n])>t)return!1;if((i+=e[n+1])>=t)return!0}}function i(t,i){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&j.test(String.fromCharCode(t)):!1!==i&&e(t,D)))}function n(t,i){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&V.test(String.fromCharCode(t)):!1!==i&&(e(t,D)||e(t,z)))))}function s(t,e){return new U(t,{beforeExpr:!0,binop:e})}function r(t,e){return void 0===e&&(e={}),e.keyword=t,H[t]=new U(t,e)}function o(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}function a(t,e){return K.call(t,e)}function h(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function u(t,e){for(var i=1,n=0;;){X.lastIndex=n;var s=X.exec(t);if(!(s&&s.index<e))return new it(i,e-n);++i,n=s.index+s[0].length}}function l(t){var e={};for(var i in st)e[i]=t&&a(t,i)?t[i]:st[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),et(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return et(e.onComment)&&(e.onComment=c(e,e.onComment)),e}function c(t,e){return function(i,n,s,r,o,a){var h={type:i?"Block":"Line",value:n,start:s,end:r};t.locations&&(h.loc=new nt(this,o,a)),t.ranges&&(h.range=[s,r]),e.push(h)}}function p(t,e){return rt|(t?at:0)|(e?ht:0)}function f(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function d(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}function _(t){var e=Rt[t]={binary:h(Mt[t]+" "+It),nonBinary:{General_Category:h(It),Script:h(Nt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}function g(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function y(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function v(t){return i(t,!0)||36===t||95===t}function m(t){return n(t,!0)||36===t||95===t||8204===t||8205===t}function b(t){return t>=65&&t<=90||t>=97&&t<=122}function x(t){return t>=0&&t<=1114111}function w(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function S(t){return b(t)||95===t}function T(t){return S(t)||k(t)}function k(t){return t>=48&&t<=57}function C(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function A(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function P(t){return t>=48&&t<=55}function O(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function E(t,e){return ut.parse(t,e)}function M(t,e,i){return ut.parseExpressionAt(t,e,i)}function I(t,e){return ut.tokenizer(t,e)}var F={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},N="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",R={5:N,6:N+" const class extends export import super"},L=/^in(stanceof)?$/,q="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",B="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",j=new RegExp("["+q+"]"),V=new RegExp("["+q+B+"]");q=B=null;var D=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],z=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],U=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null},G={beforeExpr:!0},W={startsExpr:!0},H={},Q={num:new U("num",W),regexp:new U("regexp",W),string:new U("string",W),name:new U("name",W),eof:new U("eof"),bracketL:new U("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new U("]"),braceL:new U("{",{beforeExpr:!0,startsExpr:!0}),braceR:new U("}"),parenL:new U("(",{beforeExpr:!0,startsExpr:!0}),parenR:new U(")"),comma:new U(",",G),semi:new U(";",G),colon:new U(":",G),dot:new U("."),question:new U("?",G),arrow:new U("=>",G),template:new U("template"),invalidTemplate:new U("invalidTemplate"),ellipsis:new U("...",G),backQuote:new U("`",W),dollarBraceL:new U("${",{beforeExpr:!0,startsExpr:!0}),eq:new U("=",{beforeExpr:!0,isAssign:!0}),assign:new U("_=",{beforeExpr:!0,isAssign:!0}),incDec:new U("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new U("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:s("||",1),logicalAND:s("&&",2),bitwiseOR:s("|",3),bitwiseXOR:s("^",4),bitwiseAND:s("&",5),equality:s("==/!=/===/!==",6),relational:s("</>/<=/>=",7),bitShift:s("<</>>/>>>",8),plusMin:new U("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:s("%",10),star:s("*",10),slash:s("/",10),starstar:new U("**",{beforeExpr:!0}),_break:r("break"),_case:r("case",G),_catch:r("catch"),_continue:r("continue"),_debugger:r("debugger"),_default:r("default",G),_do:r("do",{isLoop:!0,beforeExpr:!0}),_else:r("else",G),_finally:r("finally"),_for:r("for",{isLoop:!0}),_function:r("function",W),_if:r("if"),_return:r("return",G),_switch:r("switch"),_throw:r("throw",G),_try:r("try"),_var:r("var"),_const:r("const"),_while:r("while",{isLoop:!0}),_with:r("with"),_new:r("new",{beforeExpr:!0,startsExpr:!0}),_this:r("this",W),_super:r("super",W),_class:r("class",W),_extends:r("extends",G),_export:r("export"),_import:r("import"),_null:r("null",W),_true:r("true",W),_false:r("false",W),_in:r("in",{beforeExpr:!0,binop:7}),_instanceof:r("instanceof",{beforeExpr:!0,binop:7}),_typeof:r("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:r("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:r("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Z=/\r\n?|\n|\u2028|\u2029/,X=new RegExp(Z.source,"g"),$=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Y=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,J=Object.prototype,K=J.hasOwnProperty,tt=J.toString,et=Array.isArray||function(t){return"[object Array]"===tt.call(t)},it=function(t,e){this.line=t,this.column=e};it.prototype.offset=function(t){return new it(this.line,this.column+t)};var nt=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)},st={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},rt=2,ot=1|rt,at=4,ht=8,ut=function(t,e,i){this.options=t=l(t),this.sourceFile=t.sourceFile,this.keywords=h(R[t.ecmaVersion>=6?6:5]);var n="";if(!t.allowReserved){for(var s=t.ecmaVersion;!(n=F[s]);s--);"module"===t.sourceType&&(n+=" await")}this.reservedWords=h(n);var r=(n?n+" ":"")+F.strict;this.reservedWordsStrict=h(r),this.reservedWordsStrictBind=h(r+" "+F.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Z).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Q.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},lt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};ut.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},lt.inFunction.get=function(){return(this.currentVarScope().flags&rt)>0},lt.inGenerator.get=function(){return(this.currentVarScope().flags&ht)>0},lt.inAsync.get=function(){return(this.currentVarScope().flags&at)>0},lt.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},lt.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},lt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ut.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&rt)>0},ut.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,n=0;n<t.length;n++)i=t[n](i);return i},ut.parse=function(t,e){return new this(e,t).parse()},ut.parseExpressionAt=function(t,e,i){var n=new this(i,t,e);return n.nextToken(),n.parseExpression()},ut.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(ut.prototype,lt);var ct=ut.prototype,pt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;ct.strictDirective=function(t){for(var e=this;;){Y.lastIndex=t,t+=Y.exec(e.input)[0].length;var i=pt.exec(e.input.slice(t));if(!i)return!1;if("use strict"===(i[1]||i[2]))return!0;t+=i[0].length,Y.lastIndex=t,t+=Y.exec(e.input)[0].length,";"===e.input[t]&&t++}},ct.eat=function(t){return this.type===t&&(this.next(),!0)},ct.isContextual=function(t){return this.type===Q.name&&this.value===t&&!this.containsEsc},ct.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},ct.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},ct.canInsertSemicolon=function(){return this.type===Q.eof||this.type===Q.braceR||Z.test(this.input.slice(this.lastTokEnd,this.start))},ct.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ct.semicolon=function(){this.eat(Q.semi)||this.insertSemicolon()||this.unexpected()},ct.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},ct.expect=function(t){this.eat(t)||this.unexpected()},ct.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},ct.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},ct.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},ct.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ct.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ft=ut.prototype;ft.parseTopLevel=function(t){var e=this,i={};for(t.body||(t.body=[]);this.type!==Q.eof;){var n=e.parseStatement(null,!0,i);t.body.push(n)}if(this.inModule)for(var s=0,r=Object.keys(e.undefinedExports);s<r.length;s+=1){var o=r[s];e.raiseRecoverable(e.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var dt={kind:"loop"},_t={kind:"switch"};ft.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Y.lastIndex=this.pos;var e=Y.exec(this.input),s=this.pos+e[0].length,r=this.input.charCodeAt(s);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(i(r,!0)){for(var o=s+1;n(this.input.charCodeAt(o),!0);)++o;var a=this.input.slice(s,o);if(!L.test(a))return!0}return!1},ft.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Y.lastIndex=this.pos;var t=Y.exec(this.input),e=this.pos+t[0].length;return!(Z.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&n(this.input.charAt(e+8)))},ft.parseStatement=function(t,e,i){var n,s=this.type,r=this.startNode();switch(this.isLet(t)&&(s=Q._var,n="let"),s){case Q._break:case Q._continue:return this.parseBreakContinueStatement(r,s.keyword);case Q._debugger:return this.parseDebuggerStatement(r);case Q._do:return this.parseDoStatement(r);case Q._for:return this.parseForStatement(r);case Q._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!t);case Q._class:return t&&this.unexpected(),this.parseClass(r,!0);case Q._if:return this.parseIfStatement(r);case Q._return:return this.parseReturnStatement(r);case Q._switch:return this.parseSwitchStatement(r);case Q._throw:return this.parseThrowStatement(r);case Q._try:return this.parseTryStatement(r);case Q._const:case Q._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(r,n);case Q._while:return this.parseWhileStatement(r);case Q._with:return this.parseWithStatement(r);case Q.braceL:return this.parseBlock(!0,r);case Q.semi:return this.parseEmptyStatement(r);case Q._export:case Q._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===Q._import?this.parseImport(r):this.parseExport(r,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!t);var o=this.value,a=this.parseExpression();return s===Q.name&&"Identifier"===a.type&&this.eat(Q.colon)?this.parseLabeledStatement(r,o,a,t):this.parseExpressionStatement(r,a)}},ft.parseBreakContinueStatement=function(t,e){var i=this,n="break"===e;this.next(),this.eat(Q.semi)||this.insertSemicolon()?t.label=null:this.type!==Q.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var s=0;s<this.labels.length;++s){var r=i.labels[s];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return s===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},ft.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ft.parseDoStatement=function(t){return this.next(),this.labels.push(dt),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(Q._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Q.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ft.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(dt),this.enterScope(0),this.expect(Q.parenL),this.type===Q.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===Q._var||this.type===Q._const||i){var n=this.startNode(),s=i?"let":this.value;return this.next(),(this.parseVar(n,!0,s),this.finishNode(n,"VariableDeclaration"),!(this.type===Q._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==s&&n.declarations[0].init)?(e>-1&&this.unexpected(e),this.parseFor(t,n)):(this.options.ecmaVersion>=9&&(this.type===Q._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n))}var r=new f,o=this.parseExpression(!0,r);return this.type===Q._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===Q._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,r),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(r,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},ft.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,yt|(i?0:vt),!1,e)},ft.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(Q._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},ft.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Q.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ft.parseSwitchStatement=function(t){var e=this;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Q.braceL),this.labels.push(_t),this.enterScope(0);for(var i,n=!1;this.type!==Q.braceR;)if(e.type===Q._case||e.type===Q._default){var s=e.type===Q._case;i&&e.finishNode(i,"SwitchCase"),t.cases.push(i=e.startNode()),i.consequent=[],e.next(),s?i.test=e.parseExpression():(n&&e.raiseRecoverable(e.lastTokStart,"Multiple default clauses"),n=!0,i.test=null),e.expect(Q.colon)}else i||e.unexpected(),i.consequent.push(e.parseStatement(null));return this.exitScope(),i&&this.finishNode(i,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ft.parseThrowStatement=function(t){return this.next(),Z.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var gt=[];ft.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Q._catch){var e=this.startNode();if(this.next(),this.eat(Q.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?32:0),this.checkLVal(e.param,i?4:2),this.expect(Q.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Q._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ft.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ft.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(dt),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},ft.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},ft.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ft.parseLabeledStatement=function(t,e,i,n){for(var s=this,r=0,o=s.labels;r<o.length;r+=1){o[r].name===e&&s.raise(i.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===Q._switch?"switch":null,h=this.labels.length-1;h>=0;h--){var u=s.labels[h];if(u.statementStart!==t.start)break;u.statementStart=s.start,u.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},ft.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ft.parseBlock=function(t,e){var i=this;for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(Q.braceL),t&&this.enterScope(0);!this.eat(Q.braceR);){var n=i.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},ft.parseFor=function(t,e){return t.init=e,this.expect(Q.semi),t.test=this.type===Q.semi?null:this.parseExpression(),this.expect(Q.semi),t.update=this.type===Q.parenR?null:this.parseExpression(),this.expect(Q.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},ft.parseForIn=function(t,e){var i=this.type===Q._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===i&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===i?this.parseExpression():this.parseMaybeAssign(),this.expect(Q.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i)},ft.parseVar=function(t,e,i){var n=this;for(t.declarations=[],t.kind=i;;){var s=n.startNode();if(n.parseVarId(s,i),n.eat(Q.eq)?s.init=n.parseMaybeAssign(e):"const"!==i||n.type===Q._in||n.options.ecmaVersion>=6&&n.isContextual("of")?"Identifier"===s.id.type||e&&(n.type===Q._in||n.isContextual("of"))?s.init=null:n.raise(n.lastTokEnd,"Complex binding patterns require an initialization value"):n.unexpected(),t.declarations.push(n.finishNode(s,"VariableDeclarator")),!n.eat(Q.comma))break}return t},ft.parseVarId=function(t,e){"const"!==e&&"let"!==e||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var yt=1,vt=2;ft.parseFunction=function(t,e,i,n){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===Q.star&&e&vt&&this.unexpected(),t.generator=this.eat(Q.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&yt&&(t.id=4&e&&this.type!==Q.name?null:this.parseIdent(),!t.id||e&vt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,r=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(p(t.async,t.generator)),e&yt||(t.id=this.type===Q.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=o,this.finishNode(t,e&yt?"FunctionDeclaration":"FunctionExpression")},ft.parseFunctionParams=function(t){this.expect(Q.parenL),t.params=this.parseBindingList(Q.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ft.parseClass=function(t,e){var i=this;this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var s=this.startNode(),r=!1;for(s.body=[],this.expect(Q.braceL);!this.eat(Q.braceR);){var o=i.parseClassElement(null!==t.superClass);o&&(s.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind&&(r&&i.raise(o.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(s,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},ft.parseClassElement=function(t){var e=this;if(this.eat(Q.semi))return null;var i=this.startNode(),n=function(t,n){void 0===n&&(n=!1);var s=e.start,r=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===Q.parenL||n&&e.canInsertSemicolon())||(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(s,r),i.key.name=t,e.finishNode(i.key,"Identifier"),!1))};i.kind="method",i.static=n("static");var s=this.eat(Q.star),r=!1;s||(this.options.ecmaVersion>=8&&n("async",!0)?(r=!0,s=this.options.ecmaVersion>=9&&this.eat(Q.star)):n("get")?i.kind="get":n("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var o=i.key,a=!1;return i.computed||i.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?i.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),s&&this.raise(o.start,"Constructor can't be a generator"),r&&this.raise(o.start,"Constructor can't be an async method"),i.kind="constructor",a=t),this.parseClassMethod(i,s,r,a),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},ft.parseClassMethod=function(t,e,i,n){return t.value=this.parseMethod(e,i,n),this.finishNode(t,"MethodDefinition")},ft.parseClassId=function(t,e){this.type===Q.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},ft.parseClassSuper=function(t){t.superClass=this.eat(Q._extends)?this.parseExprSubscripts():null},ft.parseExport=function(t,e){var i=this;if(this.next(),this.eat(Q.star))return this.expectContextual("from"),this.type!==Q.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(Q._default)){this.checkExport(e,"default",this.lastTokStart);var n;if(this.type===Q._function||(n=this.isAsyncFunction())){var s=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(s,4|yt,!1,n)}else if(this.type===Q._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Q.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var o=0,a=t.specifiers;o<a.length;o+=1){var h=a[o];i.checkUnreserved(h.local),i.checkLocalExport(h.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ft.checkExport=function(t,e,i){t&&(a(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},ft.checkPatternExport=function(t,e){var i=this,n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var s=0,r=e.properties;s<r.length;s+=1){var o=r[s];i.checkPatternExport(t,o)}else if("ArrayPattern"===n)for(var a=0,h=e.elements;a<h.length;a+=1){var u=h[a];u&&i.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},ft.checkVariableExport=function(t,e){var i=this;if(t)for(var n=0,s=e;n<s.length;n+=1){var r=s[n];i.checkPatternExport(t,r.id)}},ft.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ft.parseExportSpecifiers=function(t){var e=this,i=[],n=!0;for(this.expect(Q.braceL);!this.eat(Q.braceR);){if(n)n=!1;else if(e.expect(Q.comma),e.afterTrailingComma(Q.braceR))break;var s=e.startNode();s.local=e.parseIdent(!0),s.exported=e.eatContextual("as")?e.parseIdent(!0):s.local,e.checkExport(t,s.exported.name,s.exported.start),i.push(e.finishNode(s,"ExportSpecifier"))}return i},ft.parseImport=function(t){return this.next(),this.type===Q.string?(t.specifiers=gt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),
t.source=this.type===Q.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ft.parseImportSpecifiers=function(){var t=this,e=[],i=!0;if(this.type===Q.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(Q.comma))return e}if(this.type===Q.star){var s=this.startNode();return this.next(),this.expectContextual("as"),s.local=this.parseIdent(),this.checkLVal(s.local,2),e.push(this.finishNode(s,"ImportNamespaceSpecifier")),e}for(this.expect(Q.braceL);!this.eat(Q.braceR);){if(i)i=!1;else if(t.expect(Q.comma),t.afterTrailingComma(Q.braceR))break;var r=t.startNode();r.imported=t.parseIdent(!0),t.eatContextual("as")?r.local=t.parseIdent():(t.checkUnreserved(r.imported),r.local=r.imported),t.checkLVal(r.local,2),e.push(t.finishNode(r,"ImportSpecifier"))}return e},ft.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},ft.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var mt=ut.prototype;mt.toAssignable=function(t,e,i){var n=this;if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var s=0,r=t.properties;s<r.length;s+=1){var o=r[s];n.toAssignable(o,e),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||n.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},mt.toAssignableList=function(t,e){for(var i=this,n=t.length,s=0;s<n;s++){var r=t[s];r&&i.toAssignable(r,e)}if(n){var o=t[n-1];6===this.options.ecmaVersion&&e&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return t},mt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},mt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Q.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},mt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Q.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Q.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Q.braceL:return this.parseObj(!0)}return this.parseIdent()},mt.parseBindingList=function(t,e,i){for(var n=this,s=[],r=!0;!this.eat(t);)if(r?r=!1:n.expect(Q.comma),e&&n.type===Q.comma)s.push(null);else{if(i&&n.afterTrailingComma(t))break;if(n.type===Q.ellipsis){var o=n.parseRestBinding();n.parseBindingListItem(o),s.push(o),n.type===Q.comma&&n.raise(n.start,"Comma is not permitted after the rest element"),n.expect(t);break}var a=n.parseMaybeDefault(n.start,n.startLoc);n.parseBindingListItem(a),s.push(a)}return s},mt.parseBindingListItem=function(t){return t},mt.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Q.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},mt.checkLVal=function(t,e,i){var n=this;switch(void 0===e&&(e=0),t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(a(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var s=0,r=t.properties;s<r.length;s+=1){var o=r[s];n.checkLVal(o,e,i)}break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var h=0,u=t.elements;h<u.length;h+=1){var l=u[h];l&&n.checkLVal(l,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var bt=ut.prototype;bt.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,s=t.key;switch(s.type){case"Identifier":n=s.name;break;case"Literal":n=String(s.value);break;default:return}var r=t.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===n&&"init"===r&&(e.proto&&(i&&i.doubleProto<0?i.doubleProto=s.start:this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),e.proto=!0));n="$"+n;var o=e[n];if(o){var a;a="init"===r?this.strict&&o.init||o.get||o.set:o.init||o[r],a&&this.raiseRecoverable(s.start,"Redefinition of property")}else o=e[n]={init:!1,get:!1,set:!1};o[r]=!0}},bt.parseExpression=function(t,e){var i=this,n=this.start,s=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===Q.comma){var o=this.startNodeAt(n,s);for(o.expressions=[r];this.eat(Q.comma);)o.expressions.push(i.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return r},bt.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,s=-1,r=-1,o=-1;e?(s=e.parenthesizedAssign,r=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new f,n=!0);var a=this.start,h=this.startLoc;this.type!==Q.parenL&&this.type!==Q.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(i&&(u=i.call(this,u,a,h)),this.type.isAssign){var l=this.startNodeAt(a,h);return l.operator=this.value,l.left=this.type===Q.eq?this.toAssignable(u,!1,e):u,n||f.call(e),e.shorthandAssign=-1,this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(t),this.finishNode(l,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),s>-1&&(e.parenthesizedAssign=s),r>-1&&(e.trailingComma=r),o>-1&&(e.shorthandAssign=o),u},bt.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(Q.question)){var r=this.startNodeAt(i,n);return r.test=s,r.consequent=this.parseMaybeAssign(),this.expect(Q.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")}return s},bt.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,s=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?s:s.start===i&&"ArrowFunctionExpression"===s.type?s:this.parseExprOp(s,i,n,-1,t)},bt.parseExprOp=function(t,e,i,n,s){var r=this.type.binop;if(null!=r&&(!s||this.type!==Q._in)&&r>n){var o=this.type===Q.logicalOR||this.type===Q.logicalAND,a=this.value;this.next();var h=this.start,u=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),h,u,r,s),c=this.buildBinary(e,i,t,l,a,o);return this.parseExprOp(c,e,i,n,s)}return t},bt.buildBinary=function(t,e,i,n,s,r){var o=this.startNodeAt(t,e);return o.left=i,o.operator=s,o.right=n,this.finishNode(o,r?"LogicalExpression":"BinaryExpression")},bt.parseMaybeUnary=function(t,e){var i,n=this,s=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),e=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===Q.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var h=n.startNodeAt(s,r);h.operator=n.value,h.prefix=!1,h.argument=i,n.checkLVal(i),n.next(),i=n.finishNode(h,"UpdateExpression")}}return!e&&this.eat(Q.starstar)?this.buildBinary(s,r,i,this.parseMaybeUnary(null,!1),"**",!1):i},bt.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,n=this.parseExprAtom(t),s="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||s)return n;var r=this.parseSubscripts(n,e,i);return t&&"MemberExpression"===r.type&&(t.parenthesizedAssign>=r.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=r.start&&(t.parenthesizedBind=-1)),r},bt.parseSubscripts=function(t,e,i,n){for(var s=this,r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var o=s.parseSubscript(t,e,i,n,r);if(o===t||"ArrowFunctionExpression"===o.type)return o;t=o}},bt.parseSubscript=function(t,e,i,n,s){var r=this.eat(Q.bracketL);if(r||this.eat(Q.dot)){var o=this.startNodeAt(e,i);o.object=t,o.property=r?this.parseExpression():this.parseIdent(!0),o.computed=!!r,r&&this.expect(Q.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!n&&this.eat(Q.parenL)){var a=new f,h=this.yieldPos,u=this.awaitPos,l=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var c=this.parseExprList(Q.parenR,this.options.ecmaVersion>=8,!1,a);if(s&&!this.canInsertSemicolon()&&this.eat(Q.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=h,this.awaitPos=u,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(e,i),c,!0);this.checkExpressionErrors(a,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=l||this.awaitIdentPos;var p=this.startNodeAt(e,i);p.callee=t,p.arguments=c,t=this.finishNode(p,"CallExpression")}else if(this.type===Q.backQuote){var d=this.startNodeAt(e,i);d.tag=t,d.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(d,"TaggedTemplateExpression")}return t},bt.parseExprAtom=function(t){this.type===Q.slash&&this.readRegexp();var e,i=this.potentialArrowAt===this.start;switch(this.type){case Q._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==Q.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==Q.dot&&this.type!==Q.bracketL&&this.type!==Q.parenL&&this.unexpected(),this.finishNode(e,"Super");case Q._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case Q.name:var n=this.start,s=this.startLoc,r=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!r&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(Q._function))return this.parseFunction(this.startNodeAt(n,s),0,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(Q.arrow))return this.parseArrowExpression(this.startNodeAt(n,s),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===Q.name&&!r)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Q.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,s),[o],!0)}return o;case Q.regexp:var a=this.value;return e=this.parseLiteral(a.value),e.regex={pattern:a.pattern,flags:a.flags},e;case Q.num:case Q.string:return this.parseLiteral(this.value);case Q._null:case Q._true:case Q._false:return e=this.startNode(),e.value=this.type===Q._null?null:this.type===Q._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case Q.parenL:var h=this.start,u=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),u;case Q.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(Q.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case Q.braceL:return this.parseObj(!1,t);case Q._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case Q._class:return this.parseClass(this.startNode(),!1);case Q._new:return this.parseNew();case Q.backQuote:return this.parseTemplate();default:this.unexpected()}},bt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},bt.parseParenExpression=function(){this.expect(Q.parenL);var t=this.parseExpression();return this.expect(Q.parenR),t},bt.parseParenAndDistinguishExpression=function(t){var e,i=this,n=this.start,s=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,h=this.startLoc,u=[],l=!0,c=!1,p=new f,d=this.yieldPos,_=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Q.parenR;){if(l?l=!1:i.expect(Q.comma),r&&i.afterTrailingComma(Q.parenR,!0)){c=!0;break}if(i.type===Q.ellipsis){o=i.start,u.push(i.parseParenItem(i.parseRestBinding())),i.type===Q.comma&&i.raise(i.start,"Comma is not permitted after the rest element");break}u.push(i.parseMaybeAssign(!1,p,i.parseParenItem))}var g=this.start,y=this.startLoc;if(this.expect(Q.parenR),t&&!this.canInsertSemicolon()&&this.eat(Q.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=_,this.parseParenArrowList(n,s,u);u.length&&!c||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=_||this.awaitPos,u.length>1?(e=this.startNodeAt(a,h),e.expressions=u,this.finishNodeAt(e,"SequenceExpression",g,y)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,s);return v.expression=e,this.finishNode(v,"ParenthesizedExpression")}return e},bt.parseParenItem=function(t){return t},bt.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var xt=[];bt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Q.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||i)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var n=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,s,!0),this.eat(Q.parenL)?t.arguments=this.parseExprList(Q.parenR,this.options.ecmaVersion>=8,!1):t.arguments=xt,this.finishNode(t,"NewExpression")},bt.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===Q.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===Q.backQuote,this.finishNode(i,"TemplateElement")},bt.parseTemplate=function(t){var e=this;void 0===t&&(t={});var i=t.isTagged;void 0===i&&(i=!1);var n=this.startNode();this.next(),n.expressions=[];var s=this.parseTemplateElement({isTagged:i});for(n.quasis=[s];!s.tail;)e.type===Q.eof&&e.raise(e.pos,"Unterminated template literal"),e.expect(Q.dollarBraceL),n.expressions.push(e.parseExpression()),e.expect(Q.braceR),n.quasis.push(s=e.parseTemplateElement({isTagged:i}));return this.next(),this.finishNode(n,"TemplateLiteral")},bt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Q.name||this.type===Q.num||this.type===Q.string||this.type===Q.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Q.star)&&!Z.test(this.input.slice(this.lastTokEnd,this.start))},bt.parseObj=function(t,e){var i=this,n=this.startNode(),s=!0,r={};for(n.properties=[],this.next();!this.eat(Q.braceR);){if(s)s=!1;else if(i.expect(Q.comma),i.afterTrailingComma(Q.braceR))break;var o=i.parseProperty(t,e);t||i.checkPropClash(o,r,e),n.properties.push(o)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},bt.parseProperty=function(t,e){var i,n,s,r,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Q.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===Q.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===Q.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===Q.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(s=this.start,r=this.startLoc),t||(i=this.eat(Q.star)));var a=this.containsEsc;return this.parsePropertyName(o),!t&&!a&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(o)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(Q.star),this.parsePropertyName(o,e)):n=!1,this.parsePropertyValue(o,t,i,n,s,r,e,a),this.finishNode(o,"Property")},bt.parsePropertyValue=function(t,e,i,n,s,r,o,a){if((i||n)&&this.type===Q.colon&&this.unexpected(),this.eat(Q.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===Q.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n);else if(e||a||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Q.comma||this.type===Q.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,r,t.key):this.type===Q.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,r,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(i||n)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var h="get"===t.kind?0:1;if(t.value.params.length!==h){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},bt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Q.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Q.bracketR),t.key;t.computed=!1}return t.key=this.type===Q.num||this.type===Q.string?this.parseExprAtom():this.parseIdent(!0)},bt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},bt.parseMethod=function(t,e,i){var n=this.startNode(),s=this.yieldPos,r=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|p(e,n.generator)|(i?128:0)),this.expect(Q.parenL),n.params=this.parseBindingList(Q.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=o,this.finishNode(n,"FunctionExpression")},bt.parseArrowExpression=function(t,e,i){var n=this.yieldPos,s=this.awaitPos,r=this.awaitIdentPos;return this.enterScope(16|p(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=r,this.finishNode(t,"ArrowFunctionExpression")},bt.parseFunctionBody=function(t,e,i){var n=e&&this.type!==Q.braceL,s=this.strict,r=!1;if(n)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(r=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],r&&(this.strict=!0),this.checkParams(t,!s&&!r&&!e&&!i&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=a}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=s},bt.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){if("Identifier"!==i[e].type)return!1}return!0},bt.checkParams=function(t,e){for(var i=this,n={},s=0,r=t.params;s<r.length;s+=1){var o=r[s];i.checkLVal(o,1,e?null:n)}},bt.parseExprList=function(t,e,i,n){for(var s=this,r=[],o=!0;!this.eat(t);){if(o)o=!1;else if(s.expect(Q.comma),e&&s.afterTrailingComma(t))break;var a=void 0;i&&s.type===Q.comma?a=null:s.type===Q.ellipsis?(a=s.parseSpread(n),n&&s.type===Q.comma&&n.trailingComma<0&&(n.trailingComma=s.start)):a=s.parseMaybeAssign(!1,n),r.push(a)}return r},bt.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;if(this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\"))){(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))}},bt.parseIdent=function(t,e){var i=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===Q.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},bt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Q.semi||this.canInsertSemicolon()||this.type!==Q.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Q.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},bt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var wt=ut.prototype;wt.raise=function(t,e){var i=u(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},wt.raiseRecoverable=wt.raise,wt.curPosition=function(){if(this.options.locations)return new it(this.curLine,this.pos-this.lineStart)};var St=ut.prototype,Tt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};St.enterScope=function(t){this.scopeStack.push(new Tt(t))},St.exitScope=function(){this.scopeStack.pop()},St.treatFunctionsAsVarInScope=function(t){return t.flags&rt||!this.inModule&&1&t.flags},St.declareName=function(t,e,i){var n=this,s=!1;if(2===e){var r=this.currentScope();s=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){var o=this.currentScope();o.lexical.push(t)}else if(3===e){var a=this.currentScope();s=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var h=this.scopeStack.length-1;h>=0;--h){var u=n.scopeStack[h];if(u.lexical.indexOf(t)>-1&&!(32&u.flags&&u.lexical[0]===t)||!n.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(t)>-1){s=!0;break}if(u.var.push(t),n.inModule&&1&u.flags&&delete n.undefinedExports[t],u.flags&ot)break}s&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},St.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},St.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},St.currentVarScope=function(){for(var t=this,e=this.scopeStack.length-1;;e--){var i=t.scopeStack[e];if(i.flags&ot)return i}},St.currentThisScope=function(){for(var t=this,e=this.scopeStack.length-1;;e--){var i=t.scopeStack[e];if(i.flags&ot&&!(16&i.flags))return i}};var kt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new nt(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Ct=ut.prototype;Ct.startNode=function(){return new kt(this,this.start,this.startLoc)},Ct.startNodeAt=function(t,e){return new kt(this,t,e)},Ct.finishNode=function(t,e){return d.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Ct.finishNodeAt=function(t,e,i,n){return d.call(this,t,e,i,n)};var At=function(t,e,i,n,s){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!s},Pt={b_stat:new At("{",!1),b_expr:new At("{",!0),b_tmpl:new At("${",!1),p_stat:new At("(",!1),p_expr:new At("(",!0),q_tmpl:new At("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new At("function",!1),f_expr:new At("function",!0),f_expr_gen:new At("function",!0,!1,null,!0),f_gen:new At("function",!1,!1,null,!0)},Ot=ut.prototype;Ot.initialContext=function(){return[Pt.b_stat]},Ot.braceIsBlock=function(t){var e=this.curContext();return e===Pt.f_expr||e===Pt.f_stat||(t!==Q.colon||e!==Pt.b_stat&&e!==Pt.b_expr?t===Q._return||t===Q.name&&this.exprAllowed?Z.test(this.input.slice(this.lastTokEnd,this.start)):t===Q._else||t===Q.semi||t===Q.eof||t===Q.parenR||t===Q.arrow||(t===Q.braceL?e===Pt.b_stat:t!==Q._var&&t!==Q._const&&t!==Q.name&&!this.exprAllowed):!e.isExpr)},Ot.inGeneratorContext=function(){for(var t=this,e=this.context.length-1;e>=1;e--){var i=t.context[e];if("function"===i.token)return i.generator}return!1},Ot.updateContext=function(t){var e,i=this.type;i.keyword&&t===Q.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},Q.parenR.updateContext=Q.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);var t=this.context.pop();t===Pt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr},Q.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Pt.b_stat:Pt.b_expr),this.exprAllowed=!0},Q.dollarBraceL.updateContext=function(){this.context.push(Pt.b_tmpl),this.exprAllowed=!0},Q.parenL.updateContext=function(t){var e=t===Q._if||t===Q._for||t===Q._with||t===Q._while;this.context.push(e?Pt.p_stat:Pt.p_expr),this.exprAllowed=!0},Q.incDec.updateContext=function(){},Q._function.updateContext=Q._class.updateContext=function(t){!t.beforeExpr||t===Q.semi||t===Q._else||t===Q._return&&Z.test(this.input.slice(this.lastTokEnd,this.start))||(t===Q.colon||t===Q.braceL)&&this.curContext()===Pt.b_stat?this.context.push(Pt.f_stat):this.context.push(Pt.f_expr),this.exprAllowed=!1},Q.backQuote.updateContext=function(){this.curContext()===Pt.q_tmpl?this.context.pop():this.context.push(Pt.q_tmpl),this.exprAllowed=!1},Q.star.updateContext=function(t){if(t===Q._function){var e=this.context.length-1;this.context[e]===Pt.f_expr?this.context[e]=Pt.f_expr_gen:this.context[e]=Pt.f_gen}this.exprAllowed=!0},Q.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Q.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Et="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Mt={9:Et,10:Et+" Extended_Pictographic"
},It="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ft="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Nt={9:Ft,10:Ft+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},Rt={};_(9),_(10);var Lt=ut.prototype,qt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Rt[t.options.ecmaVersion>=10?10:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};qt.prototype.reset=function(t,e,i){var n=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},qt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},qt.prototype.at=function(t){var e=this.source,i=e.length;if(t>=i)return-1;var n=e.charCodeAt(t);return!this.switchU||n<=55295||n>=57344||t+1>=i?n:(n<<10)+e.charCodeAt(t+1)-56613888},qt.prototype.nextIndex=function(t){var e=this.source,i=e.length;if(t>=i)return i;var n=e.charCodeAt(t);return!this.switchU||n<=55295||n>=57344||t+1>=i?t+1:t+2},qt.prototype.current=function(){return this.at(this.pos)},qt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},qt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},qt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Lt.validateRegExpFlags=function(t){for(var e=this,i=t.validFlags,n=t.flags,s=0;s<n.length;s++){var r=n.charAt(s);-1===i.indexOf(r)&&e.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,s+1)>-1&&e.raise(t.start,"Duplicate regular expression flag")}},Lt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Lt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];-1===t.groupNames.indexOf(n)&&t.raise("Invalid named capture referenced")}},Lt.regexp_disjunction=function(t){var e=this;for(this.regexp_alternative(t);t.eat(124);)e.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Lt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Lt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Lt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Lt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Lt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Lt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return-1!==s&&s<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Lt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Lt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Lt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Lt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Lt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Lt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Lt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!y(e)&&(t.lastIntValue=e,t.advance(),!0)},Lt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!y(i);)t.advance();return t.pos!==e},Lt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Lt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Lt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Lt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=g(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=g(t.lastIntValue);return!0}return!1},Lt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),v(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),m(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Lt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Lt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Lt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Lt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Lt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Lt.regexp_eatZero=function(t){return 48===t.current()&&!k(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Lt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Lt.regexp_eatControlLetter=function(t){var e=t.current();return!!b(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(t.switchU&&i>=55296&&i<=56319){var n=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(i-55296)+(s-56320)+65536,!0}t.pos=n,t.lastIntValue=i}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&x(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Lt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Lt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Lt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(w(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Lt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s),!0}return!1},Lt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){a(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Lt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Lt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";S(e=t.current());)t.lastStringValue+=g(e),t.advance();return""!==t.lastStringValue},Lt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";T(e=t.current());)t.lastStringValue+=g(e),t.advance();return""!==t.lastStringValue},Lt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Lt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Lt.regexp_classRanges=function(t){for(var e=this;this.regexp_eatClassAtom(t);){var i=t.lastIntValue;if(t.eat(45)&&e.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==i&&-1!==n||t.raise("Invalid character class"),-1!==i&&-1!==n&&i>n&&t.raise("Range out of order in character class")}}},Lt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||P(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},Lt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Lt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!k(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Lt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Lt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;k(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Lt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;C(i=t.current());)t.lastIntValue=16*t.lastIntValue+A(i),t.advance();return t.pos!==e},Lt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},Lt.regexp_eatOctalDigit=function(t){var e=t.current();return P(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Lt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var s=t.current();if(!C(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+A(s),t.advance()}return!0};var Bt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new nt(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},jt=ut.prototype;jt.next=function(){this.options.onToken&&this.options.onToken(new Bt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},jt.getToken=function(){return this.next(),new Bt(this)},"undefined"!=typeof Symbol&&(jt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Q.eof,value:e}}}}),jt.curContext=function(){return this.context[this.context.length-1]},jt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Q.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},jt.readToken=function(t){return i(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},jt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},jt.skipBlockComment=function(){var t=this,e=this.options.onComment&&this.curPosition(),i=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){X.lastIndex=i;for(var s;(s=X.exec(this.input))&&s.index<this.pos;)++t.curLine,t.lineStart=s.index+s[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,n),i,this.pos,e,this.curPosition())},jt.skipLineComment=function(t){for(var e=this,i=this.pos,n=this.options.onComment&&this.curPosition(),s=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!o(s);)s=e.input.charCodeAt(++e.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(i+t,this.pos),i,this.pos,n,this.curPosition())},jt.skipSpace=function(){var t=this;t:for(;this.pos<this.input.length;){var e=t.input.charCodeAt(t.pos);switch(e){case 32:case 160:++t.pos;break;case 13:10===t.input.charCodeAt(t.pos+1)&&++t.pos;case 10:case 8232:case 8233:++t.pos,t.options.locations&&(++t.curLine,t.lineStart=t.pos);break;case 47:switch(t.input.charCodeAt(t.pos+1)){case 42:t.skipBlockComment();break;case 47:t.skipLineComment(2);break;default:break t}break;default:if(!(e>8&&e<14||e>=5760&&$.test(String.fromCharCode(e))))break t;++t.pos}}},jt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},jt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Q.ellipsis)):(++this.pos,this.finishToken(Q.dot))},jt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Q.assign,2):this.finishOp(Q.slash,1)},jt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?Q.star:Q.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,n=Q.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Q.assign,i+1):this.finishOp(n,i)},jt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?Q.logicalOR:Q.logicalAND,2):61===e?this.finishOp(Q.assign,2):this.finishOp(124===t?Q.bitwiseOR:Q.bitwiseAND,1)},jt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Q.assign,2):this.finishOp(Q.bitwiseXOR,1)},jt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Z.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Q.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Q.assign,2):this.finishOp(Q.plusMin,1)},jt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(Q.assign,i+1):this.finishOp(Q.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(Q.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},jt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Q.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Q.arrow)):this.finishOp(61===t?Q.eq:Q.prefix,1)},jt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Q.parenL);case 41:return++this.pos,this.finishToken(Q.parenR);case 59:return++this.pos,this.finishToken(Q.semi);case 44:return++this.pos,this.finishToken(Q.comma);case 91:return++this.pos,this.finishToken(Q.bracketL);case 93:return++this.pos,this.finishToken(Q.bracketR);case 123:return++this.pos,this.finishToken(Q.braceL);case 125:return++this.pos,this.finishToken(Q.braceR);case 58:return++this.pos,this.finishToken(Q.colon);case 63:return++this.pos,this.finishToken(Q.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Q.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(Q.prefix,1)}this.raise(this.pos,"Unexpected character '"+O(t)+"'")},jt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},jt.readRegexp=function(){for(var t,e,i=this,n=this.pos;;){i.pos>=i.input.length&&i.raise(n,"Unterminated regular expression");var s=i.input.charAt(i.pos);if(Z.test(s)&&i.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++i.pos}var r=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var h=this.regexpState||(this.regexpState=new qt(this));h.reset(n,r,a),this.validateRegExpFlags(h),this.validateRegExpPattern(h);var u=null;try{u=new RegExp(r,a)}catch(t){}return this.finishToken(Q.regexp,{pattern:r,flags:a,value:u})},jt.readInt=function(t,e){for(var i=this,n=this.pos,s=0,r=0,o=null==e?1/0:e;r<o;++r){var a=i.input.charCodeAt(i.pos),h=void 0;if((h=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++i.pos,s=s*t+h}return this.pos===n||null!=e&&this.pos-n!==e?null:s},jt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Q.num,e)},jt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var s=this.input.charCodeAt(this.pos);46!==s||n||(++this.pos,this.readInt(10),s=this.input.charCodeAt(this.pos)),69!==s&&101!==s||n||(s=this.input.charCodeAt(++this.pos),43!==s&&45!==s||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),i(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=this.input.slice(e,this.pos),o=n?parseInt(r,8):parseFloat(r);return this.finishToken(Q.num,o)},jt.readCodePoint=function(){var t,e=this.input.charCodeAt(this.pos);if(123===e){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else t=this.readHexChar(4);return t},jt.readString=function(t){for(var e=this,i="",n=++this.pos;;){e.pos>=e.input.length&&e.raise(e.start,"Unterminated string constant");var s=e.input.charCodeAt(e.pos);if(s===t)break;92===s?(i+=e.input.slice(n,e.pos),i+=e.readEscapedChar(!1),n=e.pos):(o(s,e.options.ecmaVersion>=10)&&e.raise(e.start,"Unterminated string constant"),++e.pos)}return i+=this.input.slice(n,this.pos++),this.finishToken(Q.string,i)};var Vt={};jt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Vt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},jt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Vt;this.raise(t,e)},jt.readTmplToken=function(){for(var t=this,e="",i=this.pos;;){t.pos>=t.input.length&&t.raise(t.start,"Unterminated template");var n=t.input.charCodeAt(t.pos);if(96===n||36===n&&123===t.input.charCodeAt(t.pos+1))return t.pos!==t.start||t.type!==Q.template&&t.type!==Q.invalidTemplate?(e+=t.input.slice(i,t.pos),t.finishToken(Q.template,e)):36===n?(t.pos+=2,t.finishToken(Q.dollarBraceL)):(++t.pos,t.finishToken(Q.backQuote));if(92===n)e+=t.input.slice(i,t.pos),e+=t.readEscapedChar(!0),i=t.pos;else if(o(n)){switch(e+=t.input.slice(i,t.pos),++t.pos,n){case 13:10===t.input.charCodeAt(t.pos)&&++t.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}t.options.locations&&(++t.curLine,t.lineStart=t.pos),i=t.pos}else++t.pos}},jt.readInvalidTemplateToken=function(){for(var t=this;this.pos<this.input.length;this.pos++)switch(t.input[t.pos]){case"\\":++t.pos;break;case"$":if("{"!==t.input[t.pos+1])break;case"`":return t.finishToken(Q.invalidTemplate,t.input.slice(t.start,t.pos))}this.raise(this.start,"Unterminated template")},jt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return O(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return o(e)?"":String.fromCharCode(e)}},jt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},jt.readWord1=function(){var t=this;this.containsEsc=!1;for(var e="",s=!0,r=this.pos,o=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=t.fullCharCodeAtPos();if(n(a,o))t.pos+=a<=65535?1:2;else{if(92!==a)break;t.containsEsc=!0,e+=t.input.slice(r,t.pos);var h=t.pos;117!==t.input.charCodeAt(++t.pos)&&t.invalidStringToken(t.pos,"Expecting Unicode escape sequence \\uXXXX"),++t.pos;var u=t.readCodePoint();(s?i:n)(u,o)||t.invalidStringToken(h,"Invalid Unicode escape"),e+=O(u),r=t.pos}s=!1}return e+this.input.slice(r,this.pos)},jt.readWord=function(){var t=this.readWord1(),e=Q.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=H[t]),this.finishToken(e,t)};t.version="6.1.1",t.parse=E,t.parseExpressionAt=M,t.tokenizer=I,t.Parser=ut,t.defaultOptions=st,t.Position=it,t.SourceLocation=nt,t.getLineInfo=u,t.Node=kt,t.TokenType=U,t.tokTypes=Q,t.keywordTypes=H,t.TokContext=At,t.tokContexts=Pt,t.isIdentifierChar=n,t.isIdentifierStart=i,t.Token=Bt,t.isNewLine=o,t.lineBreak=Z,t.lineBreakG=X,t.nonASCIIwhitespace=$,Object.defineProperty(t,"__esModule",{value:!0})})},{}],2:[function(t,e,i){},{}],3:[function(t,e,i){"use strict";function n(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],n(i),n(s))}function s(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(o),i=1;i<e.length;i++)t=n(e,i).join(""),e=t.match(o);return t}}function r(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=a.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var n=s(i[0]);n!==i[0]&&(e[i[0]]=n)}i=a.exec(t)}e["%C2"]="�";for(var r=Object.keys(e),o=0;o<r.length;o++){var h=r[o];t=t.replace(new RegExp(h,"g"),e[h])}return t}var o=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return r(t)}}},{}],4:[function(t,e,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,r,h,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(i=this._events[t],a(i))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),i.apply(this,r)}else if(o(i))for(r=Array.prototype.slice.call(arguments,1),u=i.slice(),n=u.length,h=0;h<n;h++)u[h].apply(this,r);return!0},n.prototype.addListener=function(t,e){var i;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}if(!s(e))throw TypeError("listener must be a function");var n=!1;return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var i,n,r,a;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],r=i.length,n=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],
this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(a=r;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],s(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],5:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=n(t),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var l in i)r.call(i,l)&&(h[l]=i[l]);if(s){a=s(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},{}],6:[function(t,e,i){(function(i,n){i=i||t("./node/self.js");var s=i.window,r=i.document,o=new function(){function t(t,n,s,r,o){function u(i,u){"string"==typeof(u=u||(u=a(n,i))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,p="function"==typeof u,f=u,d=o||p&&!u.base?u&&u.get?i in t:t[i]:null;o&&d||(p&&d&&(u.base=d),p&&!1!==r&&(c=i.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),f&&!p&&f.get&&"function"==typeof f.get&&e.isPlainObject(f)||(f={value:f,writable:!0}),(a(t,i)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=s?s:!c),h(t,i,f))}var l={};if(n){for(var c in n)n.hasOwnProperty(c)&&!i.test(c)&&u(c);for(var c in l){var p=l[c],f=t["set"+p],d=t["get"+p]||f&&t["is"+p];!d||!0!==r&&0!==d.length||u(c,{get:d,set:f})}}return t}function e(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&c(this,i)}return this}var i=/^(statics|enumerable|beans|preserve)$/,s=[],r=s.slice,o=Object.create,a=Object.getOwnPropertyDescriptor,h=Object.defineProperty,u=s.forEach||function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)},l=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},c=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t},p=function(t,e,i){if(t){var n=a(t,"length");(n&&"number"==typeof n.value?u:l).call(t,e,i=i||t)}return i};return t(e,{inject:function(e){if(e){var i=!0===e.statics?e:e.statics,n=e.beans,s=e.preserve;i!==e&&t(this.prototype,e,e.enumerable,n,s),t(this,i,null,n,s)}for(var r=1,o=arguments.length;r<o;r++)this.inject(arguments[r]);return this},extend:function(){for(var e,i,n,s=this,r=0,a=arguments.length;r<a&&(!e||!i);r++)n=arguments[r],e=e||n.initialize,i=i||n.prototype;return e=e||function(){s.apply(this,arguments)},i=e.prototype=i||o(this.prototype),h(i,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=s,e}}).inject({enumerable:!1,initialize:e,set:e,inject:function(){for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=o(this);return t.inject.apply(t,arguments)},each:function(t,e){return p(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:p,create:o,define:h,describe:a,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var i=null!=t&&t.constructor;return i&&(i===Object||i===e||"Object"===i.name)},pick:function(t,e){return t!==n?t:e},slice:function(t,e,i){return r.call(t,e,i)}}})};void 0!==e&&(e.exports=o),o.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?l.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return o.importJSON(t,this)},exportJSON:function(t){return o.exportJSON(this,t)},toJSON:function(){return o.serialize(this)},set:function(t,e){return t&&o.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!o.exports[i]&&(o.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(!o.equals(t[i],e[i]))return!1}else{var n=Object.keys(t),i=n.length;if(i!==Object.keys(e).length)return!1;for(;i--;){var s=n[i];if(!e.hasOwnProperty(s)||!o.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,e,i,s){if(this===o){var r=this.peek(t,e);return t.__index++,r}var a=this.prototype,h=a._readIndex,u=e||h&&t.__index||0,l=t.length,c=t[u];if(s=s||l-u,c instanceof this||i&&i.readNull&&null==c&&s<=1)return h&&(t.__index=u+1),c&&i&&i.clone?c.clone():c;if(c=o.create(a),h&&(c.__read=!0),c=c.initialize.apply(c,u>0||u+s<l?o.slice(t,u,u+s):t)||c,h){t.__index=u+c.__read;var p=c.__filtered;p&&(t.__filtered=p,c.__filtered=n),c.__read=n}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){for(var s,r=[],o=e||0,a=n?o+n:t.length,h=o;h<a;h++)r.push(Array.isArray(s=t[h])?this.read(s,0,i):this.read(t,h,i,1));return r},readNamed:function(t,e,i,s,r){var a=this.getNamed(t,e),h=a!==n;if(h){var u=t.__filtered;u||(u=t.__filtered=o.create(t[0]),u.__unfiltered=t[0]),u[e]=n}var l=h?[a]:t;return this.read(l,i,s,r)},getNamed:function(t,e){var i=t[0];if(t._hasObject===n&&(t._hasObject=1===t.length&&o.isPlainObject(i)),t._hasObject)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,s){function r(s){if(!(i&&s in i||o&&s in o)){var r=e[s];r!==n&&(t[s]=r)}}var o;if(s){for(var a,h={},u=0,l=s.length;u<l;u++)(a=s[u])in e&&(r(a),h[a]=!0);o=h}return Object.keys(e.__unfiltered||e).forEach(r),t},isPlainValue:function(t,e){return o.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var s,r=!n;if(r&&(e.formatter=new l(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var s=e.call(t),r=t._class;r&&s[0]!==r&&s.unshift(r),this.definitions[i]=s,n=this.references[i]=[i]}return n}}),t&&t._serialize){s=t._serialize(e,n);var a=t._class;!a||t._compactSerialize||!r&&i||s[0]===a||s.unshift(a)}else if(Array.isArray(t)){s=[];for(var h=0,u=t.length;h<u;h++)s[h]=o.serialize(t[h],e,i,n)}else if(o.isPlainObject(t)){s={};for(var c=Object.keys(t),h=0,u=c.length;h<u;h++){var p=c[h];s[p]=o.serialize(t[p],e,i,n)}}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return r&&n.length>0?[["dictionary",n.definitions],s]:s},deserialize:function(t,e,i,n,s){var r=t,a=!i,h=a&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return i.dictionary[u];u=o.exports[u],r=[];for(var c=u?1:0,p=t.length;c<p;c++)r.push(o.deserialize(t[c],e,i,l,h));if(u){var f=r;r=e?e(u,f,a||s):new u(f)}}else if(o.isPlainObject(t)){r={},n&&(i.dictionary=r);for(var d in t)r[d]=o.deserialize(t[d],e,i)}return h?r[1]:r},exportJSON:function(t,e){var i=o.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return o.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,n){var s=n&&e&&e.constructor===t,r=s?e:o.create(t.prototype);if(1===i.length&&r instanceof w&&(s||!(r instanceof T))){var a=i[0];o.isPlainObject(a)&&(a.insert=!1)}return(s?r.set:t).apply(r,i),s&&(e=null),r})},push:function(t,e){var i=e.length;if(i<4096)t.push.apply(t,e);else{var n=t.length;t.length+=i;for(var s=0;s<i;s++)t[n+s]=e[s]}return t},splice:function(t,e,i,s){var r=e&&e.length,a=i===n;(i=a?t.length:i)>t.length&&(i=t.length);for(var h=0;h<r;h++)e[h]._index=i+h;if(a)return o.push(t,e),[];var u=[i,s];e&&o.push(u,e);for(var l=t.splice.apply(t,u),h=0,c=l.length;h<c;h++)l[h]._index=n;for(var h=i+r,c=t.length;h<c;h++)t[h]._index=h;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(t,e){if("string"!=typeof t)o.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,n=i&&i[t],s=this._callbacks=this._callbacks||{};s=s[t]=s[t]||[],-1===s.indexOf(e)&&(s.push(e),n&&n.install&&1===s.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void o.each(t,function(t,e){this.off(e,t)},this);var i,n=this._eventTypes,s=n&&n[t],r=this._callbacks&&this._callbacks[t];return r&&(!e||-1!==(i=r.indexOf(e))&&1===r.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&r.splice(i,1)),this},once:function(t,e){return this.on(t,function i(){e.apply(this,arguments),this.off(t,i)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=o.slice(arguments,1),s=e&&e.target&&!e.currentTarget;i=i.slice(),s&&(e.currentTarget=this);for(var r=0,a=i.length;r<a;r++)if(0==i[r].apply(this,n)){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var s in i)if(i[s].length>0){var r=e[s],o=r&&r[n];o&&o.call(this,s)}},statics:{inject:function t(e){var i=e._events;if(i){var n={};o.each(i,function(t,i){var s="string"==typeof t,r=s?t:i,a=o.capitalize(r),h=r.substring(2).toLowerCase();n[h]=s?{}:t,r="_"+r,e["get"+a]=function(){return this[r]},e["set"+a]=function(t){var e=this[r];e&&this.off(h,e),t&&this.on(h,t),this[r]=t}}),e._eventTypes=n}return t.base.apply(this,arguments)}}},h=o.extend({_class:"PaperScope",initialize:function t(){at=this,this.settings=new o({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=nt.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:st.nativeModes},nt.release(n)}if(!this.agent){var s=i.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(s)||[])[0],a="darwin"===r?"mac":r,h=e.agent=e.browser={platform:a};a&&(h[a]=!0),s.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,n,s){if(!h.chrome){var r="opera"===e?n:/^(node|trident)$/.test(e)?s:i;h.version=r,h.versionNumber=parseFloat(r),e="trident"===e?"msie":e,h.name=e,h[e]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.0",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var i=at.PaperScript.execute(t,this,e);return Q.updateFocus(),i},install:function(t){var e=this;o.each(["project","view","tool"],function(i){o.define(t,i,{configurable:!0,get:function(){return e[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return at=this,this.project=new x(t),this},createCanvas:function(t,e){return nt.getCanvas(t,e)},activate:function(){at=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(var i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete h._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),u=o.extend(a,{initialize:function(t){this._scope=at,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l=o.extend({initialize:function(t){this.precision=o.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});l.instance=new l;var c=new function(){function t(t,e,i){return t<e?e:t>i?i:t}function e(t,e,i){function n(t){var e=134217729*t,i=t-e,n=i+e;return[n,t-n]}var s=e*e-t*i,o=e*e+t*i;if(3*r(s)<o){var a=n(t),h=n(e),u=n(i),l=e*e,c=h[0]*h[0]-l+2*h[0]*h[1]+h[1]*h[1],p=t*i;s=l-p+(c-(a[0]*u[0]-p+a[0]*u[1]+a[1]*u[0]+a[1]*u[1]))}return s}function i(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?a(2,-Math.round(h(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],s=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,o=Math.sqrt,a=Math.pow,h=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,i,r){for(var o=n[r-2],a=s[r-2],h=.5*(i-e),u=h+e,l=0,c=r+1>>1,p=1&r?a[l++]*t(u):0;l<c;){var f=h*o[l];p+=a[l++]*(t(u+f)+t(u-f))}return h*p},findRoot:function(e,i,n,s,o,a,h){for(var u=0;u<a;u++){var l=e(n),c=l/i(n),p=n-c;if(r(c)<h){n=p;break}l>0?(o=n,n=p<=s?.5*(s+o):p):(s=n,n=p>=o?.5*(s+o):p)}return t(n,s,o)},solveQuadratic:function(n,s,a,h,u,l){var c,p=1/0;if(r(n)<1e-12){if(r(s)<1e-12)return r(a)<1e-12?-1:0;c=-a/s}else{s*=-.5;var f=e(n,s,a);if(f&&r(f)<1.12e-16){var d=i(r(n),r(s),r(a));d&&(n*=d,s*=d,a*=d,f=e(n,s,a))}if(f>=-1.12e-16){var _=f<0?0:o(f),g=s+(s<0?-_:_);0===g?(c=a/n,p=-c):(c=g/n,p=a/g)}}var y=0,v=null==u,m=u-1e-12,b=l+1e-12;return isFinite(c)&&(v||c>m&&c<b)&&(h[y++]=v?c:t(c,u,l)),p!==c&&isFinite(p)&&(v||p>m&&p<b)&&(h[y++]=v?p:t(p,u,l)),y},solveCubic:function(e,n,s,h,u,l,p){function f(t){d=t;var i=e*d;_=i+n,g=_*d+s,y=(i+_)*d+g,v=g*d+h}var d,_,g,y,v,m=i(r(e),r(n),r(s),r(h));if(m&&(e*=m,n*=m,s*=m,h*=m),r(e)<1e-12)e=n,_=s,g=h,d=1/0;else if(r(h)<1e-12)_=n,g=s,d=0;else{f(-n/e/3);var b=v/e,x=a(r(b),1/3),w=b<0?-1:1,S=-y/e,T=S>0?1.324717957244746*Math.max(x,o(S)):x,k=d-w*T;if(k!==d){do{f(k),k=0===y?d:d-v/y/(1+1.12e-16)}while(w*k>w*d);r(e)*d*d>r(h/d)&&(g=-h/d,_=(g-s)/d)}}var C=c.solveQuadratic(e,_,g,u,l,p),A=null==l;return isFinite(d)&&(0===C||C>0&&d!==u[0]&&d!==u[1])&&(A||d>l-1e-12&&d<p+1e-12)&&(u[C++]=A?d:t(d,l,p)),C}}},p={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},f=o.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var o="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new f(this.x,this.y)},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();c.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=f.read(arguments),e=this.getLength()*t.getLength();if(c.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=f.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=f.read(arguments),e=t.x-this.x,i=t.y-this.y,n=e*e+i*i;return o.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===n&&(t=1);var e=this.getLength(),i=0!==e?t/e:0,s=new f(this.x*i,this.y*i);return i>=0&&(s._angle=this._angle),s},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return i=new f(i.x*s-i.y*n,i.x*n+i.y*s),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=f.read(arguments);return new f(this.x+t.x,this.y+t.y)},subtract:function(){var t=f.read(arguments);return new f(this.x-t.x,this.y-t.y)},multiply:function(){var t=f.read(arguments);return new f(this.x*t.x,this.y*t.y)},divide:function(){var t=f.read(arguments);return new f(this.x/t.x,this.y/t.y)},modulo:function(){var t=f.read(arguments);return new f(this.x%t.x,this.y%t.y)},negate:function(){return new f(-this.x,-this.y)},isInside:function(){return y.read(arguments).contains(this)},isClose:function(){var t=f.read(arguments),e=o.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=f.read(arguments);return f.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=f.read(arguments);return f.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=c.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=f.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=f.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=f.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new f(t.x*e,t.y*e)},statics:{min:function(){var t=f.read(arguments),e=f.read(arguments);return new f(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=f.read(arguments),e=f.read(arguments);return new f(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new f(Math.random(),Math.random())},isCollinear:function(t,e,i,n){return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},o.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new f(e(this.x),e(this.y))}},{})),d=f.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),_=o.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var o="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var t=l.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=_.read(arguments);return new _(this.width+t.width,this.height+t.height)},subtract:function(){var t=_.read(arguments);return new _(this.width-t.width,this.height-t.height)},multiply:function(){var t=_.read(arguments);return new _(this.width*t.width,this.height*t.height)},divide:function(){var t=_.read(arguments);return new _(this.width/t.width,this.height/t.height)},modulo:function(){var t=_.read(arguments);return new _(this.width%t.width,this.height%t.height)},negate:function(){return new _(-this.width,-this.height)},isZero:function(){var t=c.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new _(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new _(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new _(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new _(e(this.width),e(this.height))}},{})),g=_.extend({initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),y=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,i,s){var r,a=typeof t;if("number"===a?(this._set(t,e,i,s),r=4):"undefined"===a||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==n||t.width!==n?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===n&&t.to===n&&(this._set(0,0,0,0),o.filter(this,t),r=1)),r===n){var h,u,l=f.readNamed(arguments,"from"),c=o.peek(arguments),p=l.x,d=l.y;if(c&&c.x!==n||o.hasNamed(arguments,"to")){var g=f.readNamed(arguments,"to");h=g.x-p,u=g.y-d,h<0&&(p=g.x,h=-h),u<0&&(d=g.y,u=-u)}else{var y=_.read(arguments);h=y.width,u=y.height}this._set(p,d,h,u),r=arguments.__index;var v=arguments.__filtered;v&&(this.__filtered=v)}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new y(this.x,this.y,this.width,this.height)},equals:function(t){var e=o.isPlainValue(t)?y.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?f:d)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=f.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?_:g)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=_.read(arguments),e=this._sx,i=this._sy,n=t.width,s=t.height;e&&(this.x+=(this.width-n)*e),i&&(this.y+=(this.height-s)*i),this.width=n,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?f:d)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=f.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==n||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(y.read(arguments)):this._containsPoint(f.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=y.read(arguments),e=o.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=y.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new y(e,i,n-e,s-i)},unite:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new y(e,i,n-e,s-i)},include:function(){var t=f.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new y(e,i,n-e,s-i)},expand:function(){var t=_.read(arguments),e=t.width,i=t.height;return new y(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===n?t:e)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],r=t[n?1:0],o="get"+s,a="get"+r,h="set"+s,u="set"+r,l="get"+i,c="set"+i;this[l]=function(t){return new(t?f:d)(this[o](),this[a](),this,c)},this[c]=function(){var t=f.read(arguments);this[h](t.x),this[u](t.y)}},{beans:!0})),v=y.extend({initialize:function(t,e,i,n,s,r){this._set(t,e,i,n,!0),this._owner=s,this._setter=r},_set:function(t,e,i,n,s){return this._x=t,this._y=e,this._width=i,this._height=n,s||this._owner[this._setter](this),this}},new function(){var t=y.prototype;return o.each(["x","y","width","height"],function(t){var e=o.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,
this._dontNotify||this._owner[this._setter](this)}},o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),m=o.extend({_class:"Matrix",initialize:function t(e,i){var n=arguments.length,s=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):s=!1:n?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,s,r,o){return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=s,this._ty=r,o||this._changed(),this},_serialize:function(t,e){return o.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new m(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=l.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,!0,o.pick(t,!0),e),this.isIdentity())},translate:function(){var t=f.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=f.read(arguments,1),i=e.x,n=e.y,s=Math.cos(t),r=Math.sin(t),o=i-i*s+n*r,a=n-i*r-n*s,h=this._a,u=this._b,l=this._c,c=this._d;return this._a=s*h+r*l,this._b=s*u+r*c,this._c=-r*h+s*l,this._d=-r*u+s*c,this._tx+=o*h+a*l,this._ty+=o*u+a*c,this._changed(),this},shear:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=f.read(arguments),e=f.read(arguments,0,{readNull:!0}),i=Math.PI/180,n=new f(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(n,e)},append:function(t,e){if(t){var i=this._a,n=this._b,s=this._c,r=this._d,o=t._a,a=t._c,h=t._b,u=t._d,l=t._tx,c=t._ty;this._a=o*i+h*s,this._c=a*i+u*s,this._b=o*n+h*r,this._d=a*n+u*r,this._tx+=l*i+c*s,this._ty+=l*n+c*r,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,n=this._b,s=this._c,r=this._d,o=this._tx,a=this._ty,h=t._a,u=t._c,l=t._b,c=t._d,p=t._tx,f=t._ty;this._a=h*i+u*n,this._c=h*s+u*r,this._b=l*i+c*n,this._d=l*s+c*r,this._tx=h*o+u*a+p,this._ty=l*o+c*a+f,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,s=this._tx,r=this._ty,o=t*n-e*i,a=null;return o&&!isNaN(o)&&isFinite(s)&&isFinite(r)&&(this._a=n/o,this._b=-e/o,this._c=-i/o,this._d=t/o,this._tx=(i*r-n*s)/o,this._ty=(e*s-t*r)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new m(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(f.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,s=t.y;return e||(e=new f),e._set(n*this._a+s*this._c+this._tx,n*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,s=2*i;n<s;n+=2){var r=t[n],o=t[n+1];e[n]=r*this._a+o*this._c+this._tx,e[n+1]=r*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=[e,i,n,i,n,s,e,s];return this._transformCoordinates(r,r,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),s=n.slice(0,2),r=s.slice(),o=2;o<8;o++){var a=n[o],h=1&o;a<s[h]?s[h]=a:a>r[h]&&(r[h]=a)}return e||(e=new y),e._set(s[0],s[1],r[0]-s[0],r[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(f.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,s=this._b,r=this._c,o=this._d,a=this._tx,h=this._ty,u=n*o-s*r,l=null;if(u&&!isNaN(u)&&isFinite(a)&&isFinite(h)){var c=t.x-this._tx,p=t.y-this._ty;e||(e=new f),l=e._set((c*o-p*r)/u,(p*n-c*s)/u,i)}return l},decompose:function(){var t,e,i,n=this._a,s=this._b,r=this._c,o=this._d,a=n*o-s*r,h=Math.sqrt,u=Math.atan2,l=180/Math.PI;if(0!==n||0!==s){var c=h(n*n+s*s);t=Math.acos(n/c)*(s>0?1:-1),e=[c,a/c],i=[u(n*r+s*o,c*c),0]}else if(0!==r||0!==o){var p=h(r*r+o*o);t=Math.asin(r/p)*(o>0?1:-1),e=[a/p,p],i=[0,u(n*r+s*o,p*p)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new f(e),skewing:new f(i[0]*l,i[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new f(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},o.each(["a","b","c","d","tx","ty"],function(t){var e=o.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),b=o.extend({_class:"Line",initialize:function(t,e,i,n,s){var r=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,r=s):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,r=i),r||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new f(this._px,this._py)},getVector:function(){return new f(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return b.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return b.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return b.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return f.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return f.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,s,r,o,a,h,u){h||(i-=t,n-=e,o-=s,a-=r);var l=i*a-n*o;if(!c.isZero(l)){var p=t-s,d=e-r,_=(o*d-a*p)/l,g=(i*d-n*p)/l;if(u||-1e-12<_&&_<1+1e-12&&-1e-12<g&&g<1+1e-12)return u||(_=_<=0?0:_>=1?1:_),new f(t+_*i,e+_*n)}},getSide:function(t,e,i,n,s,r,o,a){o||(i-=t,n-=e);var h=s-t,u=r-e,l=h*n-u*i;return!a&&c.isZero(l)&&(l=(h*i+h*i)/(i*i+n*n))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,i,n,s,r,o){return o||(i-=t,n-=e),0===i?n>0?s-t:t-s:0===n?i<0?r-e:e-r:((s-t)*n-(r-e)*i)/Math.sqrt(i*i+n*n)},getDistance:function(t,e,i,n,s,r,o){return Math.abs(b.getSignedDistance(t,e,i,n,s,r,o))}}}),x=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new G(null,null,this),this._view=Q.create(this,t||nt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return o.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var s=this._changesById,r=e._id,o=s[r];o?o.flags|=t:n.push(s[r]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new T({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:A,match:function(i){var n=i._definition,s=n._id;return e[s]||(e[s]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],s=n._selection;1&s&&n.isInserted()?e.push(n):s||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(n,t)},insertLayer:function(t,e){if(e instanceof T){e._remove(!1,!0),o.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(n,new T(w.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return w._getItems(this,t)},getItem:function(t){return w._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return o.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var s=i[n];for(var r in e){var o=e[r];o&&o!=i&&delete o[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,s=new o({offset:new f(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new m],updateMatrix:!0}),r=0,a=n.length;r<a;r++)n[r].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var h=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var c in h)h[c]._drawSelection(t,e,u,h,l);t.restore()}}}),w=o.extend(a,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=o.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new m,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return o.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&o.isPlainObject(t),s=i&&!0===t.internal,r=this._matrix=new m,a=i&&t.project||at.project,h=at.settings;return this._id=s?null:p.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new G(a._currentStyle,this,a),s||i&&0==t.insert||!h.insertItems&&(!i||!0!==t.insert)?this._setProject(a):(i&&t.parent||a)._insertItem(n,this,!0),i&&t!==w.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){function i(i){for(var r in i){var a=s[r];o.equals(a,"leading"===r?1.2*i.fontSize:i[r])||(n[r]=o.serialize(a,t,"data"!==r,e))}}var n={},s=this;return i(this._serializeFields),this instanceof S||i(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,i=this._parent||e,s=this._project;8&t&&(this._bounds=this._position=this._decomposed=n),16&t&&(this._globalMatrix=n),i&&72&t&&w._clearBoundsCache(i),2&t&&w._clearBoundsCache(this),s&&s._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,s=e._namedChildren;(s[t]=s[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},o.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=o.capitalize(t),i="_"+t,n={locked:256,visible:265};this["get"+e]=function(){return this[i]},this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(n[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;i<n;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?f:d,i=this._position||(this._position=this._getPositionFromBounds());return new e(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(f.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new d(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=f.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},o.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof m,n=o.set({},i?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var s=this._getCachedBounds(i&&t,n).rect;return arguments.length?s:new v(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=y.read(arguments),e=this.getBounds(),i=this._matrix,n=new m,s=t.getCenter();n.translate(s),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new m).translate(i.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),s=e.getCenter(),n.translate(-s.x,-s.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(w._updateBoundsCache(this,e.cacheItem),w._getBounds(i,t,e)):new y},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var n=e.internal&&!i,s=e.cacheItem,r=n?null:this._matrix._orNullIfIdentity(),o=s&&(!t||t.equals(r))&&this._getBoundsCacheKey(e,n),a=this._bounds;if(w._updateBoundsCache(this._parent||this._symbol,s),o&&a&&o in a){var h=a[o];return{rect:h.rect.clone(),nonscaling:h.nonscaling}}var u=this._getBounds(t||r,e),l=u.rect||u,c=this._style,p=u.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){a||(this._bounds=a={});var h=a[o]={rect:l.clone(),nonscaling:p,internal:n}}return{rect:l,nonscaling:p}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=n;for(var i=0,s=e.list,r=s.length;i<r;i++){var o=s[i];o!==t&&(o._bounds=o._position=n,o._boundsCache&&w._clearBoundsCache(o))}}},_getBounds:function(t,e,i){var n=1/0,s=-n,r=n,o=s,a=!1;i=i||{};for(var h=0,u=t.length;h<u;h++){var l=t[h];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),i,!0),p=c.rect;n=Math.min(p.x,n),r=Math.min(p.y,r),s=Math.max(p.x+p.width,s),o=Math.max(p.y+p.height,o),c.nonscaling&&(a=!0)}}return{rect:isFinite(n)?new y(n,r,s-n,o-r):new y,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new d(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=f.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),n=this._decomposed,s=new m,r=this.getPosition(!0);s.translate(r),i&&s.rotate(i),s.scale(e.x/t.x,e.y/t.y),i&&s.rotate(-i),s.translate(r.negate()),this.transform(s),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var i=this._parent,n=[];i;){if(!i._globalMatrix){e=null;for(var s=0,r=n.length;s<r;s++)n[s]._globalMatrix=null;break}n.push(i),i=i._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0))}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,s=i&&i.length;n<s;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,n=0,s=i&&i.length;n<s;n++)i[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof T)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return o.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(w.NO_INSERT),i=this._children,s=o.pick(t?t.insert:n,t===n||!0===t),r=o.pick(t?t.deep:n,!0);i&&e.copyAttributes(this),i&&!r||e.copyContent(this),i||e.copyAttributes(this),s&&e.insertAbove(this);var a=this._name,h=this._parent;if(a&&h){for(var i=h._children,u=a,l=1;i[a];)a=u+" "+l++;a!==u&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,i=0,n=e&&e.length;i<n;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,s=i.length;n<s;n++){var r=i[n];t.hasOwnProperty(r)&&(this[r]=t[r])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,h=t._name;this._data=a?o.clone(a):null,h&&this.setName(h)},rasterize:function(t,e){var i=this.getStrokeBounds(),s=(t||this.getView().getResolution())/72,r=i.getTopLeft().floor(),a=i.getBottomRight().ceil(),h=new _(a.subtract(r)),u=new C(w.NO_INSERT);if(!h.isZero()){var l=nt.getCanvas(h.multiply(s)),c=l.getContext("2d"),p=(new m).scale(s).translate(r.negate());c.save(),p.applyToContext(c),this.draw(c,new o({matrices:[p]})),c.restore(),u.setCanvas(l)}return u.transform((new m).translate(r.add(h.divide(2))).scale(1/s)),(e===n||e)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(f.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return y.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new R.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof w&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(f.read(arguments),O.getOptions(arguments))}function e(){var t=f.read(arguments),e=O.getOptions(arguments),i=[];return this._hitTest(t,o.set({all:i},e)),i}function i(t,e,i,n){var s=this._children;if(s)for(var r=s.length-1;r>=0;r--){var o=s[r],a=o!==n&&o._hitTest(t,e,i);if(a&&!e.all)return a}return null}return x.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){function n(t){return t&&f&&!f(t)&&(t=null),t&&e.all&&e.all.push(t),t}function s(e,i){var n=i?l["get"+i]():d.getPosition();if(t.subtract(n).divide(u).length<=1)return new O(e,d,{name:i?o.hyphenate(i):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,a=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),h=Math.max(e.tolerance,1e-12),u=e._tolerancePadding=new _(R._getStrokePadding(h,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(u.multiply(2))._containsPoint(t))return null;var l,c,p=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==o.hyphenate(this._class)||e.class&&!(this instanceof e.class)),f=e.match,d=this,g=e.position,y=e.center,v=e.bounds;if(p&&this._parent&&(g||y||v)){if((y||v)&&(l=this.getInternalBounds()),!(c=g&&s("position")||y&&s("center","Center"))&&v)for(var m=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!c;b++)c=s("bounds",m[b]);c=n(c)}return c||(c=this._hitTestChildren(t,e,a)||p&&n(this._hitTestSelf(t,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),c&&c.point&&(c.point=r.transform(c.point)),c},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new O("fill",this)},matches:function(t,e){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n],r=e[n];if(o.isPlainObject(s)&&o.isPlainObject(r)){if(!i(s,r))return!1}else if(!o.equals(s,r))return!1}return!0}var n=typeof t;if("object"===n){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+o.capitalize(t)]():"type"===t?o.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(o.isPlainObject(e))return i(e,r)}return o.equals(r,e)},getItems:function(t){return w._getItems(this,t,this._matrix)},getItem:function(t){return w._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,n,s,r){if(!s){var a="object"==typeof i&&i,h=a&&a.overlapping,u=a&&a.inside,l=h||u,c=l&&y.read([l]);s={items:[],recursive:a&&!1!==a.recursive,inside:!!u,overlapping:!!h,rect:c,path:h&&new R.Rectangle({rectangle:c,insert:!1})},a&&(i=o.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var p=e._children,f=s.items,c=s.rect;n=c&&(n||new m);for(var d=0,_=p&&p.length;d<_;d++){var g=p[d],v=n&&n.appended(g._matrix),b=!0;if(c){var l=g.getBounds(v);if(!c.intersects(l))continue;c.contains(l)||s.overlapping&&(l.contains(c)||s.path.intersects(g,v))||(b=!1)}if(b&&g.matches(i)&&(f.push(g),r))break;if(!1!==s.recursive&&t(g,i,v,s,r),r&&f.length>0)break}return f}}},{importJSON:function(t){var e=o.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(n,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){e=o.slice(e);for(var n={},s=e.length-1;s>=0;s--){var r=e[s],a=r&&r._id;!r||n[a]?e.splice(s,1):(r._remove(!1,!0),n[a]=!0)}o.splice(i,e,t,0);for(var h=this._project,u=h._changes,s=0,l=e.length;s<l;s++){var r=e[s],c=r._name;r._parent=this,r._setProject(h,!0),c&&r.setName(c),u&&r._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(n,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,s=i[n],r=s?s.indexOf(this):-1;-1!==r&&(e[n]==this&&delete e[n],s.splice(r,1),s.length?e[n]=s[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,s=this._index;return this._style&&this._style._dispose(),!!i&&(this._name&&this._removeNamed(),null!=s&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(i._children,null,s,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=o.pick(e,this._children.length);for(var i=o.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var i=e(this),n=e(t),s=0,r=Math.min(i.length,n.length);s<r;s++)if(i[s]!=n[s])return i[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},o.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?o:f).read(arguments),n=f.read(arguments,0,{readNull:!0});return this.transform((new m)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new m;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,n){var s=this._matrix,r=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!s.isIdentity()||r||e&&i&&this._children);if(!r&&!o)return this;if(r){!t.isInvertible()&&s.isInvertible()&&(s._backup=s.getValues()),s.prepend(t,!0);var a=this._style,h=a.getFillColor(!0),u=a.getStrokeColor(!0);h&&h.transform(t),u&&u.transform(t)}if(o&&(o=this._transformContent(s,i,n))){var l=this._pivot;l&&s._transformPoint(l,l,!0),s.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,p=this._position;(r||o)&&this._changed(25);var f=r&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var d in c){var _=c[d];if(_.nonscaling)delete c[d];else if(o||!_.internal){var g=_.rect;t._transformBounds(g,g)}}this._bounds=c;var y=c[this._getBoundsCacheKey(this._boundsOptions||{})];y&&(this._position=this._getPositionFromBounds(y.rect))}else r&&p&&this._pivot&&(this._position=t._transformPoint(p,p));return this},_transformContent:function(t,e,i){var n=this._children;if(n){
for(var s=0,r=n.length;s<r;s++)n[s].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(f.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(f.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(f.read(arguments))},localToParent:function(){return this._matrix._transformPoint(f.read(arguments))},fitBounds:function(t,e){t=y.read(arguments);var i=this.getBounds(),n=i.height/i.width,s=t.height/t.width,r=(e?n>s:n<s)?t.width/i.width:t.height/i.height,o=new y(new f,new _(i.width*r,i.height*r));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,i){var n=this._style,s=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,s)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=n.getStrokeWidth();var r=n.getStrokeJoin(),o=n.getStrokeCap(),a=n.getMiterLimit();if(r&&(t.lineJoin=r),o&&(t.lineCap=o),a&&(t.miterLimit=a),at.support.nativeDash){var h=n.getDashArray(),u=n.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=u):(t.mozDash=h,t.mozDashOffset=u))}}if(n.hasShadow()){var l=e.pixelRatio||1,c=i._shiftless().prepend((new m).scale(l,l)),p=c.transform(new f(n.getShadowBlur(),0)),d=c.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=p.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,i){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var n=e.matrices,s=e.viewMatrix,r=this._matrix,o=n[n.length-1].appended(r);if(o.isInvertible()){s=s?s.appended(o):o,n.push(o),e.updateMatrix&&(this._globalMatrix=o);var a,h,u,l=this._blendMode,c=this._opacity,p="normal"===l,f=st.nativeModes[l],d=p&&1===c||e.dontStart||e.clip||(f||p&&c<1)&&this._canComposite(),_=e.pixelRatio||1;if(!d){var g=this.getStrokeBounds(s);if(!g.width||!g.height)return void n.pop();u=e.offset,h=e.offset=g.getTopLeft().floor(),a=t,t=nt.getContext(g.getSize().ceil().add(1).multiply(_)),1!==_&&t.scale(_,_)}t.save();var y=i?i.appended(r):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,v=!d&&e.clipItem,m=!y||v;if(d?(t.globalAlpha=c,f&&(t.globalCompositeOperation=l)):m&&t.translate(-h.x,-h.y),m&&(d?r:s).applyToContext(t),v&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(_,0,0,_,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,y),t.restore(),n.pop(),e.clip&&!e.dontFinish&&t.clip(),d||(st.process(l,t,a,c,h.subtract(u).multiply(_)),nt.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof L)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,s){var r=this._selection,o=1&r,a=2&r||o&&this._selectBounds,h=4&r;if(this._drawSelected||(o=!1),(o||a||h)&&this._isUpdated(s)){var u,l=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),p=i/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,c,n),h){var f=this.getPosition(!0),d=this._parent,_=d?d.localToGlobal(f):f,g=_.x,y=_.y;t.beginPath(),t.arc(g,y,p,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],m=p,b=i+1,x=0;x<4;x++){var w=v[x],S=w[0],T=w[1];t.moveTo(g+S*m,y+T*m),t.lineTo(g+S*b,y+T*b),t.stroke()}}if(a){var k=c._transformCorners(this.getInternalBounds());t.beginPath();for(var x=0;x<8;x++)t[x?"lineTo":"moveTo"](k[x],k[++x]);t.closePath(),t.stroke();for(var x=0;x<8;x++)t.fillRect(k[x]-p,k[++x]-p,i,i)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],function(t){this["removeOn"+o.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,s=n._removeSets=n._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}}),{tween:function(t,e,i){function n(t){a._handleFrame(1e3*t.time),a.running||this.off("frame",n)}i||(i=e,e=t,t=null,i||(i=e,e=null));var s=i&&i.easing,r=i&&i.start,o=null!=i&&("number"==typeof i?i:i.duration),a=new et(this,t,e,o,s,r);return o&&this.on("frame",n),a},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),S=w.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=n)},_getClipItem:function(){var t=this._clipItem;if(t===n){t=null;for(var e=this._children,i=0,s=e.length;i<s;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),o.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,n){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,i,n,s)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var s=this._children,r=0,o=s.length;r<o;r++){var a=s[r];a!==n&&a.draw(t,e)}}}),T=S.extend({_class:"Layer",initialize:function(){S.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),k=w.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&o.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new g(t.width,t.height,this,"setSize")},setSize:function(){var t=_.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(_.min(this._radius,t.divide(2))):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new g(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var i=2*t;this._radius=t,this._size._set(i,i)}else if(t=_.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var i=_.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(R[o.capitalize(this._type)])({center:new f,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),at.settings.applyMatrix&&e.setApplyMatrix(!0),(t===n||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,n){var s=this._style,r=s.hasFill(),o=s.hasStroke(),a=e.dontFinish||e.clip,h=!n;if(r||o||a){var u=this._type,l=this._radius,c="circle"===u;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,l,0,2*Math.PI,!0);else{var p=c?l:l.width,f=c?l:l.height,d=this._size,_=d.width,g=d.height;if(h&&"rectangle"===u&&0===p&&0===f)t.rect(-_/2,-g/2,_,g);else{var y=_/2,v=g/2,m=.44771525016920644,b=p*m,x=f*m,w=[-y,-v+f,-y,-v+x,-y+b,-v,-y+p,-v,y-p,-v,y-b,-v,y,-v+x,y,-v+f,y,v-f,y,v-x,y-b,v,y-p,v,-y+p,v,-y+b,v,-y,v-x,-y,v-f];n&&n.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),y!==p&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),v!==f&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),y!==p&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}a||!r&&!o||(this._setStyles(t,e,i),r&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new y(this._size).setCenter(0,0),n=this._style,s=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),s?i.expand(R._getStrokePadding(s,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var s=t._size.divide(2),r=1;r<=4;r++){var o=new f(r>1&&r<4?-1:1,r>2?-1:1),a=o.multiply(s),h=a.subtract(o.multiply(n)),u=new y(i?a.add(o.multiply(i)):a,h);if(u.contains(e))return{point:h,quadrant:r}}}function e(t,e,i,n){var s=t.divide(e);return(!n||s.isInQuadrant(n))&&s.subtract(s.normalize()).multiply(e).divide(i).length<=1}return{_contains:function e(i){if("rectangle"===this._type){var n=t(this,i);return n?i.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}return i.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,s,r,o){var a=!1,h=this._style,u=s.stroke&&h.hasStroke(),l=s.fill&&h.hasFill();if(u||l){var c=this._type,p=this._radius,f=u?h.getStrokeWidth()/2:0,d=s._tolerancePadding.add(R._getStrokePadding(f,!h.getStrokeScaling()&&o));if("rectangle"===c){var _=d.multiply(2),g=t(this,n,_);if(g)a=e(n.subtract(g.point),p,d,g.quadrant);else{var v=new y(this._size).setCenter(0,0),m=v.expand(_),b=v.expand(_.negate());a=m._containsPoint(n)&&!b._containsPoint(n)}}else a=e(n,p,d)}return a?new O(u?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,s){var r=new k(o.getNamed(s),e);return r._type=t,r._size=i,r._radius=n,r}return{Circle:function(){var e=f.readNamed(arguments,"center"),i=o.readNamed(arguments,"radius");return t("circle",e,new _(2*i),i,arguments)},Rectangle:function(){var e=y.readNamed(arguments,"rectangle"),i=_.min(_.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=k._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(o.hasNamed(t,"radius"))e=f.readNamed(t,"center"),i=_.readNamed(t,"radius");else{var n=y.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),C=w.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,initialize:function(t,e){if(!this._initialize(t,e!==n&&f.read(arguments,1))){var i="string"==typeof t?r.getElementById(t):t;i?this.setImage(i):this.setSource(t)}this._size||(this._size=new _,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=nt.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new g(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=_.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(nt.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&nt.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new f(0,0).transform(t),i=new f(1,0).transform(t).subtract(e),n=new f(0,1).transform(t).subtract(e);return new _(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=i.getView(),n=t&&t.type||"load";e&&i.responds(n)&&(at=e._scope,i.emit(n,new X(t)))}var i=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&H.add(t,{load:function(n){i._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&nt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new _(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=nt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){nt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new i.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=y.read(arguments),e=nt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=y.read(arguments),e=new C(w.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=f.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof N?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new y(t):"x"in t&&(e=new y(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),s=Math.min(e.height,32),r=C._sampleContext;r?r.clearRect(0,0,33,33):r=C._sampleContext=nt.getContext(new _(32)),r.save();var a=(new m).scale(n/e.width,s/e.height).translate(-e.x,-e.y);a.applyToContext(r),i&&i.draw(r,new o({clip:!0,matrices:[a]})),this._matrix.applyToContext(r);var h=this.getElement(),u=this._size;h&&r.drawImage(h,-u.width/2,-u.height/2),r.restore();for(var l=r.getImageData(.5,.5,Math.ceil(n),Math.ceil(s)).data,c=[0,0,0],p=0,f=0,d=l.length;f<d;f+=4){var g=l[f+3];p+=g,g/=255,c[0]+=l[f]*g,c[1]+=l[f+1]*g,c[2]+=l[f+2]*g}for(var f=0;f<3;f++)c[f]/=p;return p?D.read(c):null},getPixel:function(){var t=f.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new D("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=f.read(arguments),e=D.read(arguments),i=e._convert("rgb"),n=e._alpha,s=this.getContext(!0),r=s.createImageData(1,1),o=r.data;o[0]=255*i[0],o[1]=255*i[1],o[2]=255*i[2],o[3]=null!=n?255*n:255,s.putImageData(r,t.x,t.y)},createImageData:function(){var t=_.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=y.read(arguments);return t.isEmpty()&&(t=new y(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=f.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new y(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new O("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,i){var n=this.getElement();n&&n.width>0&&n.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,i),W.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(n,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),A=w.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==n&&f.read(arguments,1))||this.setDefinition(t instanceof P?t:new P(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var n=this._definition._item._hitTest(t,e,i);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),P=o.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=p.get(),this.project=at.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return o.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&w._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new f),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new A(this,t)},clone:function(){return new P(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),O=o.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&o.read(t);return o.set({type:null,tolerance:at.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),E=o.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,i,s,r,o){var a,h,u,l,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(a=t.point,h=t.handleIn,u=t.handleOut,l=t.selection):(a=t,h=e,u=i,l=s):(a=[t,e],h=i!==n?[i,s]:null,u=r!==n?[r,o]:null)),new M(a,this,"_point"),new M(h,this,"_handleIn"),new M(u,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var i=this._point,n=this._selection,s=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&s.push(n),o.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,s=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=s>0?n[s-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[s])||i._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(f.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(f.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(f.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(257))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new F(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var s=t||{},r=s.type,o=s.factor,a=this.getPrevious(),h=this.getNext(),u=(a||this)._point,l=this._point,c=(h||this)._point,p=u.getDistance(l),d=l.getDistance(c);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(a&&h){var _=u.subtract(c),g=o===n?.4:o,y=g*p/(p+d);e||this.setHandleIn(_.multiply(y)),i||this.setHandleOut(_.multiply(y-g))}}else{var v=o===n?.5:o,m=Math.pow(p,v),b=m*m,x=Math.pow(d,v),w=x*x;if(!e&&a){var S=2*w+3*x*m+b,T=3*x*(x+m);this.setHandleIn(0!==T?new f((w*u._x+S*l._x-b*c._x)/T-l._x,(w*u._y+S*l._y-b*c._y)/T-l._y):new f)}if(!i&&h){var S=2*b+3*m*x+w,T=3*m*(m+x);this.setHandleOut(0!==T?new f((b*c._x+S*l._x-w*u._x)/T-l._x,(b*c._y+S*l._y-w*u._y)/T-l._y):new f)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new E(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new E(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,s=i,r=t._point,o=e._point,a=t._handleIn,h=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(n*r._x+s*o._x,n*r._y+s*o._y,!0),this._handleIn._set(n*a._x+s*h._x,n*a._y+s*h._y,!0),this._handleOut._set(n*l._x+s*u._x,n*l._y+s*u._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,r=i&&this._handleOut.isZero()?null:this._handleOut,o=n._x,a=n._y,h=2;return e[0]=o,e[1]=a,s&&(e[h++]=s._x+o,e[h++]=s._y+a),r&&(e[h++]=r._x+o,e[h++]=r._y+a),t&&(t._transformCoordinates(e,e,h/2),o=e[0],a=e[1],i?(n._x=o,n._y=a,h=2,s&&(s._x=e[h++]-o,s._y=e[h++]-a),r&&(r._x=e[h++]-o,r._y=e[h++]-a)):(s||(e[h++]=o,e[h++]=a),r||(e[h++]=o,e[h++]=a))),e}}),M=f.extend({initialize:function(t,e,i){var s,r,o;if(t)if((s=t[0])!==n)r=t[1];else{var a=t;(s=a.x)===n&&(a=f.read(arguments),s=a.x),r=a.y,o=a.selected}else s=r=0;this._x=s,this._y=r,this._owner=e,e[i]=this,o&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=c.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),I=o.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,n,s,r,o,a){var h,u,l,c,p,f,d=arguments.length;3===d?(this._path=t,h=e,u=i):d?1===d?"segment1"in t?(h=new E(t.segment1),u=new E(t.segment2)):"point1"in t?(l=t.point1,p=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],c=[t[6],t[7]],p=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===d?(h=new E(t),u=new E(e)):4===d?(l=t,p=e,f=i,c=n):8===d&&(l=[t,e],c=[o,a],p=[i-t,n-e],f=[s-o,r-a]):(h=new E,u=new E),this._segment1=h||new E(l,null,p),this._segment2=u||new E(c,f,null)},_serialize:function(t,e){return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=n},clone:function(){return new I(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return I.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(f.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(f.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(f.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(f.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return I.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new f(t[i],t[i+1]));return e}},{getLength:function(){return null==this._length&&(this._length=I.getLength(this.getValues(),0,1)),this._length},getArea:function(){return I.getArea(this.getValues())},getLine:function(){return new b(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new I(I.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return I.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=null;if(t>=1e-8&&t<=1-1e-8){var n=I.subdivide(this.getValues(),t),s=n[0],r=n[1],o=e||this.hasHandles(),a=this._segment1,h=this._segment2,u=this._path;o&&(a._handleOut._set(s[2]-s[0],s[3]-s[1]),h._handleIn._set(r[4]-r[6],r[5]-r[7]));var l=s[6],c=s[7],p=new E(new f(l,c),o&&new f(s[4]-l,s[5]-c),o&&new f(r[2]-l,r[3]-c));u?(u.insert(a._index+1,p),i=this.getNext()):(this._segment2=p,this._changed(),i=new I(p,h))}return i},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===n?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===n?.5:e?t:this.getTimeAt(t))},reversed:function(){return new I(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){var s=t._point,r=t._handleOut,o=e._handleIn,a=e._point,h=s.x,u=s.y,l=a.x,c=a.y,p=n?[h,u,h,u,l,c,l,c]:[h,u,h+r._x,u+r._y,l+o._x,c+o._y,l,c];return i&&i._transformCoordinates(p,p,4),p},subdivide:function(t,e){var i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],h=t[5],u=t[6],l=t[7];e===n&&(e=.5);var c=1-e,p=c*i+e*r,f=c*s+e*o,d=c*r+e*a,_=c*o+e*h,g=c*a+e*u,y=c*h+e*l,v=c*p+e*d,m=c*f+e*_,b=c*d+e*g,x=c*_+e*y,w=c*v+e*b,S=c*m+e*x;return[[i,s,p,f,v,m,w,S],[w,S,b,x,g,y,u,l]]},getMonoCurves:function(t,e){var i=[],n=e?0:1,s=t[n+0],r=t[n+2],o=t[n+4],a=t[n+6];if(s>=r==r>=o&&r>=o==o>=a||I.isStraight(t))i.push(t);else{var h=3*(r-o)-s+a,u=2*(s+o)-4*r,l=r-s,p=[],f=c.solveQuadratic(h,u,l,p,1e-8,1-1e-8);if(f){p.sort();var d=p[0],_=I.subdivide(t,d);i.push(_[0]),f>1&&(d=(p[1]-d)/(1-d),_=I.subdivide(_[1],d),i.push(_[0])),i.push(_[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,s,r){var o=t[e],a=t[e+2],h=t[e+4],u=t[e+6],l=0;if(!(o<i&&u<i&&a<i&&h<i||o>i&&u>i&&a>i&&h>i)){var p=3*(a-o),f=3*(h-a)-p,d=u-o-p-f;l=c.solveCubic(d,f,p,o-i,n,s,r)}return l},getTimeOf:function(t,e){var i=new f(t[0],t[1]),n=new f(t[6],t[7]);if(null===(e.isClose(i,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var s=[e.x,e.y],r=[],o=0;o<2;o++)for(var a=I.solveCubic(t,o,s[o],r,0,1),h=0;h<a;h++){var u=r[h];if(e.isClose(I.getPoint(t,u),1e-7))return u}return e.isClose(i,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(t,e){function i(i){if(i>=0&&i<=1){var n=e.getDistance(I.getPoint(t,i),!0);if(n<c)return c=n,p=i,!0}}if(I.isStraight(t)){var n=t[0],s=t[1],r=t[6],o=t[7],a=r-n,h=o-s,u=a*a+h*h;if(0===u)return 0;var l=((e.x-n)*a+(e.y-s)*h)/u;return l<1e-12?0:l>.999999999999?1:I.getTimeOf(t,new f(n+l*a,s+l*h))}for(var c=1/0,p=0,d=0;d<=100;d++)i(d/100);for(var _=.005;_>1e-8;)i(p-_)||i(p+_)||(_/=2);return p},getPart:function(t,e,i){var n=e>i;if(n){var s=e;e=i,i=s}return e>0&&(t=I.subdivide(t,e)[1]),i<1&&(t=I.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],u=t[7],l=3*s-2*i-h,c=3*r-2*n-u,p=3*o-2*h-i,f=3*a-2*u-n;return Math.max(l*l,p*p)+Math.max(c*c,f*f)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],h=t[7];return 3*((h-i)*(n+r)-(a-e)*(s+o)+s*(e-r)-n*(i-o)+h*(r+e/3)-a*(o+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],s=0;s<2;s++)I._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,n);return new y(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,s,r,o,a,h){function u(t,e){var i=t-e,n=t+e;i<o[s]&&(o[s]=i),n>a[s]&&(a[s]=n)}r/=2;var l=o[s]-r,p=a[s]+r;if(t<l||e<l||i<l||n<l||t>p||e>p||i>p||n>p)if(e<t!=e<n&&i<t!=i<n)u(t,r),u(n,r);else{var f=3*(e-i)-t+n,d=2*(t+i)-4*e,_=e-t,g=c.solveQuadratic(f,d,_,h);u(n,0);for(var y=0;y<g;y++){var v=h[y],m=1-v;1e-8<=v&&v<=1-1e-8&&u(m*m*m*t+3*m*m*v*e+3*m*v*v*i+v*v*v*n,r)}}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=R[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),o.each({isStraight:function(t,e,i,n){if(e.isZero()&&i.isZero())return!0;var s=n.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(i)){var r=new b(t,n);if(r.getDistance(t.add(e))<1e-7&&r.getDistance(n.add(i))<1e-7){var o=s.dot(s),a=s.dot(e)/o,h=s.dot(i)/o;return a>=0&&a<=1&&h<=0&&h>=-1}}return!1},isLinear:function(t,e,i,n){var s=n.subtract(t).divide(3)
;return e.equals(s)&&i.negate().equals(s)}},function(t,e){this[e]=function(e){var i=this._segment1,n=this._segment2;return t(i._point,i._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,i){var n=e[0],s=e[1],r=e[6],o=e[7];return t(new f(n,s),new f(e[2]-n,e[3]-s),new f(e[4]-r,e[5]-o),new f(r,o),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new F(this,t):null},getTimeAt:function(t,e){return I.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=f.read(arguments);return t.isZero()?[]:I.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(f.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return I.getTimeOf(this.getValues(),f.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=f.read(arguments),e=this.getValues(),i=I.getNearestTime(e,t),n=I.getPoint(e,i);return new F(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(t,function(t){this[t+"At"]=function(e,i){var n=this.getValues();return I[t](n,i?e:I.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return I[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],h=t[7],u=9*(n-r)+3*(a-e),l=6*(e+r)-12*n,c=3*(n-e),p=9*(s-o)+3*(h-i),f=6*(i+o)-12*s,d=3*(s-i);return function(t){var e=(u*t+l)*t+c,i=(p*t+f)*t+d;return Math.sqrt(e*e+i*i)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,i,n){if(null==e||e<0||e>1)return null;var s=t[0],r=t[1],o=t[2],a=t[3],h=t[4],u=t[5],l=t[6],p=t[7],d=c.isZero;d(o-s)&&d(a-r)&&(o=s,a=r),d(h-l)&&d(u-p)&&(h=l,u=p);var _,g,y=3*(o-s),v=3*(h-o)-y,m=l-s-y-v,b=3*(a-r),x=3*(u-a)-b,w=p-r-b-x;if(0===i)_=0===e?s:1===e?l:((m*e+v)*e+y)*e+s,g=0===e?r:1===e?p:((w*e+x)*e+b)*e+r;else{if(e<1e-8?(_=y,g=b):e>1-1e-8?(_=3*(l-h),g=3*(p-u)):(_=(3*m*e+2*v)*e+y,g=(3*w*e+2*x)*e+b),n){0===_&&0===g&&(e<1e-8||e>1-1e-8)&&(_=h-o,g=u-a);var S=Math.sqrt(_*_+g*g);S&&(_/=S,g/=S)}if(3===i){var h=6*m*e+2*v,u=6*w*e+2*x,T=Math.pow(_*_+g*g,1.5);_=0!==T?(_*u-g*h)/T:0,g=0}}return 2===i?new f(g,-_):new f(_,g)}return{statics:{classify:function(t){function e(t,e,i){var s=e!==n,r=s&&e>0&&e<1,o=s&&i>0&&i<1;return!s||(r||o)&&("loop"!==t||r&&o)||(t="arch",r=o=!1),{type:t,roots:r||o?r&&o?e<i?[e,i]:[i,e]:[r?e:i]:null}}var i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],h=t[5],u=t[6],l=t[7],p=i*(l-h)+s*(a-u)+u*h-l*a,f=r*(s-l)+o*(u-i)+i*l-s*u,d=a*(o-s)+h*(i-r)+r*s-o*i,_=3*d,g=_-f,y=g-f+p,v=Math.sqrt(y*y+g*g+_*_),m=0!==v?1/v:0,b=c.isZero;if(y*=m,g*=m,_*=m,b(y))return b(g)?e(b(_)?"line":"quadratic"):e("serpentine",_/(3*g));var x=3*g*g-4*y*_;if(b(x))return e("cusp",g/(2*y));var w=x>0?Math.sqrt(x/3):Math.sqrt(-x),S=2*y;return e(x>0?"serpentine":"loop",(g+w)/S,(g-w)/S)},getLength:function(i,s,r,o){if(s===n&&(s=0),r===n&&(r=1),I.isStraight(i)){var a=i;r<1&&(a=I.subdivide(a,r)[0],s/=r),s>0&&(a=I.subdivide(a,s)[1]);var h=a[6]-a[0],u=a[7]-a[1];return Math.sqrt(h*h+u*u)}return c.integrate(o||t(i),s,r,e(s,r))},getTimeAt:function(i,s,r){function o(t){return g+=c.integrate(p,r,t,e(r,t)),r=t,g-s}if(r===n&&(r=s<0?1:0),0===s)return r;var a=Math.abs,h=s>0,u=h?r:0,l=h?1:r,p=t(i),f=I.getLength(i,u,l,p),d=a(s)-f;if(a(d)<1e-12)return h?l:u;if(d>1e-12)return null;var _=s/f,g=0;return c.findRoot(o,p,r+_,u,l,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],h=t[7],u=3*n-e-3*r+a,l=3*e-6*n+3*r,p=-3*e+3*n,f=3*s-i-3*o+h,d=3*i-6*s+3*o,_=-3*i+3*s,g=[];return c.solveCubic(9*(u*u+f*f),9*(u*l+d*f),2*(l*l+d*d)+3*(p*u+_*f),p*l+d*_,g,1e-8,1-1e-8),g.sort()}}}},new function(){function t(t,e,i,n,s,r,o){var a=!o&&i.getPrevious()===s,h=!o&&i!==s&&i.getNext()===s;if(null!==n&&n>=(a?1e-8:0)&&n<=(h?1-1e-8:1)&&null!==r&&r>=(h?1e-8:0)&&r<=(a?1-1e-8:1)){var u=new F(i,n,null,o),l=new F(s,r,null,o);u._intersection=l,l._intersection=u,e&&!e(u)||F.insert(t,u,!0)}}function e(s,r,o,a,h,u,l,c,p,f,d,_,g){if(++p>=4096||++c>=40)return p;var y,v,m=r[0],x=r[1],w=r[6],S=r[7],T=b.getSignedDistance,k=T(m,x,w,S,r[2],r[3]),C=T(m,x,w,S,r[4],r[5]),A=k*C>0?.75:4/9,P=A*Math.min(0,k,C),O=A*Math.max(0,k,C),E=T(m,x,w,S,s[0],s[1]),M=T(m,x,w,S,s[2],s[3]),F=T(m,x,w,S,s[4],s[5]),N=T(m,x,w,S,s[6],s[7]),R=i(E,M,F,N),L=R[0],q=R[1];if(0===k&&0===C&&0===E&&0===M&&0===F&&0===N||null==(y=n(L,q,P,O))||null==(v=n(L.reverse(),q.reverse(),P,O)))return p;var B=f+(d-f)*y,j=f+(d-f)*v;if(Math.max(g-_,j-B)<1e-9){var V=(B+j)/2,D=(_+g)/2;t(h,u,l?a:o,l?D:V,l?o:a,l?V:D)}else if(s=I.getPart(s,y,v),v-y>.8)if(j-B>g-_){var z=I.subdivide(s,.5),V=(B+j)/2;p=e(r,z[0],a,o,h,u,!l,c,p,_,g,B,V),p=e(r,z[1],a,o,h,u,!l,c,p,_,g,V,j)}else{var z=I.subdivide(r,.5),D=(_+g)/2;p=e(z[0],s,a,o,h,u,!l,c,p,_,D,B,j),p=e(z[1],s,a,o,h,u,!l,c,p,D,g,B,j)}else p=g-_>=1e-9?e(r,s,a,o,h,u,!l,c,p,_,g,B,j):e(s,r,o,a,h,u,l,c,p,B,j,_,g);return p}function i(t,e,i,n){var s,r=[0,t],o=[1/3,e],a=[2/3,i],h=[1,n],u=e-(2*t+n)/3,l=i-(t+2*n)/3;if(u*l<0)s=[[r,o,h],[r,a,h]];else{var c=u/l;s=[c>=2?[r,o,h]:c<=.5?[r,a,h]:[r,o,a,h],[r,h]]}return(u||l)<0?s.reverse():s}function n(t,e,i,n){return t[0][1]<i?s(t,!0,i):e[0][1]>n?s(e,!1,n):t[0][0]}function s(t,e,i){for(var n=t[0][0],s=t[0][1],r=1,o=t.length;r<o;r++){var a=t[r][0],h=t[r][1];if(e?h>=i:h<=i)return h===i?a:n+(i-s)*(a-n)/(h-s);n=a,s=h}return null}function r(t,e,i,n,s){var r=c.isZero;if(r(n)&&r(s)){var o=I.getTimeOf(t,new f(e,i));return null===o?[]:[o]}for(var a=Math.atan2(-s,n),h=Math.sin(a),u=Math.cos(a),l=[],p=[],d=0;d<8;d+=2){var _=t[d]-e,g=t[d+1]-i;l.push(_*u-g*h,_*h+g*u)}return I.solveCubic(l,1,0,p,0,1),p}function a(e,i,n,s,o,a,h){for(var u=i[0],l=i[1],c=i[6],p=i[7],f=r(e,u,l,c-u,p-l),d=0,_=f.length;d<_;d++){var g=f[d],y=I.getPoint(e,g),v=I.getTimeOf(i,y);null!==v&&t(o,a,h?s:n,h?v:g,h?n:s,h?g:v)}}function h(e,i,n,s,r,o){var a=b.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);a&&t(r,o,n,I.getTimeOf(e,a),s,I.getTimeOf(i,a))}function u(i,n,s,r,o,u){var l=Math.min,c=Math.max;if(c(i[0],i[2],i[4],i[6])+1e-12>l(n[0],n[2],n[4],n[6])&&l(i[0],i[2],i[4],i[6])-1e-12<c(n[0],n[2],n[4],n[6])&&c(i[1],i[3],i[5],i[7])+1e-12>l(n[1],n[3],n[5],n[7])&&l(i[1],i[3],i[5],i[7])-1e-12<c(n[1],n[3],n[5],n[7])){var p=d(i,n);if(p)for(var _=0;_<2;_++){var g=p[_];t(o,u,s,g[0],r,g[1],!0)}else{var y=I.isStraight(i),v=I.isStraight(n),m=y&&v,b=y&&!v,x=o.length;if((m?h:y||v?a:e)(b?n:i,b?i:n,b?r:s,b?s:r,o,u,b,0,0,0,1,0,1),!m||o.length===x)for(var _=0;_<4;_++){var w=_>>1,S=1&_,T=6*w,k=6*S,C=new f(i[T],i[T+1]),A=new f(n[k],n[k+1]);C.isClose(A,1e-12)&&t(o,u,s,w,r,S)}}}return o}function l(e,i,n,s){var r=I.classify(e);if("loop"===r.type){var o=r.roots;t(n,s,i,o[0],i,o[1])}return n}function p(t,e,i,n,s,r){var a=!e;a&&(e=t);for(var h,c,p=t.length,f=e.length,d=[],_=[],g=0;g<f;g++)d[g]=e[g].getValues(s);for(var g=0;g<p;g++){var y=t[g],v=a?d[g]:y.getValues(n),m=y.getPath();m!==c&&(c=m,h=[],_.push(h)),a&&l(v,y,h,i);for(var b=a?g+1:0;b<f;b++){if(r&&h.length)return h;u(v,d[b],y,e[b],h,i)}}h=[];for(var g=0,x=_.length;g<x;g++)o.push(h,_[g]);return h}function d(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var n=Math.abs,s=b.getDistance,r=I.isStraight(t),o=I.isStraight(e),a=r&&o,h=i(t)<i(e),u=h?e:t,l=h?t:e,c=u[0],p=u[1],d=u[6]-c,_=u[7]-p;if(s(c,p,d,_,l[0],l[1],!0)<1e-7&&s(c,p,d,_,l[6],l[7],!0)<1e-7)!a&&s(c,p,d,_,u[2],u[3],!0)<1e-7&&s(c,p,d,_,u[4],u[5],!0)<1e-7&&s(c,p,d,_,l[2],l[3],!0)<1e-7&&s(c,p,d,_,l[4],l[5],!0)<1e-7&&(r=o=a=!0);else if(a)return null;if(r^o)return null;for(var g=[t,e],y=[],v=0;v<4&&y.length<2;v++){var m=1&v,x=1^m,w=v>>1,S=I.getTimeOf(g[m],new f(g[x][w?6:0],g[x][w?7:1]));if(null!=S){var T=m?[w,S]:[S,w];(!y.length||n(T[0]-y[0][0])>1e-8&&n(T[1]-y[0][1])>1e-8)&&y.push(T)}if(v>2&&!y.length)break}if(2!==y.length)y=null;else if(!a){var k=I.getPart(t,y[0][0],y[1][0]),C=I.getPart(e,y[0][1],y[1][1]);(n(C[2]-k[2])>1e-7||n(C[3]-k[3])>1e-7||n(C[4]-k[4])>1e-7||n(C[5]-k[5])>1e-7)&&(y=null)}return y}function _(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],u=t[7],l=e.normalize(),p=l.x,f=l.y,d=3*h-9*o+9*s-3*i,_=3*u-9*a+9*r-3*n,g=6*o-12*s+6*i,y=6*a-12*r+6*n,v=3*s-3*i,m=3*r-3*n,b=2*d*f-2*_*p,x=[];if(Math.abs(b)<c.CURVETIME_EPSILON){var w=d*m-_*v,b=d*y-_*g;if(0!=b){var S=-w/b;S>=0&&S<=1&&x.push(S)}}else{var T=(g*g-4*d*v)*f*f+(-2*g*y+4*_*v+4*d*m)*p*f+(y*y-4*_*m)*p*p,k=g*f-y*p;if(T>=0&&0!=b){var C=Math.sqrt(T),A=-(k+C)/b,P=(-k+C)/b;A>=0&&A<=1&&x.push(A),P>=0&&P<=1&&x.push(P)}}return x}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?u(e,i,this,t,[]):l(e,this,[])},statics:{getOverlaps:d,getIntersections:p,getCurveLineIntersections:r,getTimesWithTangent:_}}}),F=o.extend({_class:"CurveLocation",initialize:function(t,e,i,n,s){if(e>=.99999999){var r=t.getNext();r&&(e=0,t=r)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=s,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(i._time=e.getTimeOf(i._point)))return i._setCurve(e),e}var e=this._path,i=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),s=0;s<i;s++)t+=n[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof F){var n=this.getCurve(),s=t.getCurve(),r=n._path;if(r===s._path){var o=Math.abs,a=o(this.getOffset()-t.getOffset()),h=!e&&this._intersection,u=!e&&t._intersection;i=(a<1e-7||r&&o(r.getLength()-a)<1e-7)&&(!h&&!u||h&&u&&h.equals(u,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=l.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var s=this.getTime();return null!=s&&t.push("time: "+i.number(s)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){function t(t,e){var i=t.getValues(),n=I.classify(i).roots||I.getPeaks(i),s=n.length,r=e&&s>1?n[s-1]:s>0?n[0]:.5;c.push(I.getLength(i,e?r:0,e?1:r)/2)}function e(t,e,i){return e<i?t>e&&t<i:t>e||t<i}var i=this._intersection;if(!i)return!1;var n=this.getTime(),s=i.getTime(),r=n>=1e-8&&n<=1-1e-8,o=s>=1e-8&&s<=1-1e-8;if(r&&o)return!this.isTouching();var a=this.getCurve(),h=n<1e-8?a.getPrevious():a,u=i.getCurve(),l=s<1e-8?u.getPrevious():u;if(n>1-1e-8&&(a=a.getNext()),s>1-1e-8&&(u=u.getNext()),!(h&&a&&l&&u))return!1;var c=[];r||(t(h,!0),t(a,!1)),o||(t(l,!0),t(u,!1));var p=this.getPoint(),f=Math.min.apply(Math,c),d=r?a.getTangentAtTime(n):a.getPointAt(f).subtract(p),_=r?d.negate():h.getPointAt(-f).subtract(p),g=o?u.getTangentAtTime(s):u.getPointAt(f).subtract(p),y=o?g.negate():l.getPointAt(-f).subtract(p),v=_.getAngle(),m=d.getAngle(),b=y.getAngle(),x=g.getAngle();return!!(r?e(v,b,x)^e(m,b,x)&&e(v,x,b)^e(m,x,b):e(b,v,m)^e(x,v,m)&&e(b,m,v)^e(x,m,v))},hasOverlap:function(){return!!this._overlap}},o.each(I._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){function n(i,n){for(var r=i+n;r>=-1&&r<=s;r+=n){var o=t[(r%s+s)%s];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(var s=t.length,r=0,o=s-1;r<=o;){var a,h=r+o>>>1,u=t[h];if(i&&(a=e.equals(u)?u:n(h,-1)||n(h,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var l=e.getPath(),c=u.getPath();(l!==c?l._id-c._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?o=h-1:r=h+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),N=w.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(o.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var s=i[0];n=s&&Array.isArray(s[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?L:R)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var i=+n[t];return a&&(i+=h[e]),i}function i(t){return new f(e(t,"x"),e(t+1,"y"))}var n,s,r,o=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,h=new f,u=new f;this.clear();for(var l=0,c=o&&o.length;l<c;l++){var p=o[l],d=p[0],g=d.toLowerCase();n=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var y=n&&n.length;switch(a=d===g,"z"!==s||/[mz]/.test(g)||this.moveTo(h),g){case"m":case"l":for(var v="m"===g,m=0;m<y;m+=2)this[v?"moveTo":"lineTo"](h=i(m)),v&&(u=h,v=!1);r=h;break;case"h":case"v":var b="h"===g?"x":"y";h=h.clone();for(var m=0;m<y;m++)h[b]=e(m,b),this.lineTo(h);r=h;break;case"c":for(var m=0;m<y;m+=6)this.cubicCurveTo(i(m),r=i(m+2),h=i(m+4));break;case"s":for(var m=0;m<y;m+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(r):h,r=i(m),h=i(m+2)),s=g;break;case"q":for(var m=0;m<y;m+=4)this.quadraticCurveTo(r=i(m),h=i(m+2));break;case"t":for(var m=0;m<y;m+=2)this.quadraticCurveTo(r=/[qt]/.test(s)?h.multiply(2).subtract(r):h,h=i(m)),s=g;break;case"a":for(var m=0;m<y;m+=7)this.arcTo(h=i(m+5),new _(+n[m],+n[m+1]),+n[m+2],+n[m+4],+n[m+3]);break;case"z":this.closePath(1e-12),h=u}s=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var s=this===t||!t,r=this._matrix._orNullIfIdentity(),o=s?r:(i||t._matrix)._orNullIfIdentity();return s||this.getBounds(r).intersects(t.getBounds(o),1e-12)?I.getIntersections(this.getCurves(),!s&&t.getCurves(),e,r,o,n):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=f.read(arguments),e=this.getCurves(),i=1/0,n=null,s=0,r=e.length;s<r;s++){var o=e[s].getNearestLocation(t);o._distance<i&&(i=o._distance,n=o)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,s=n?"_segments":"_children",r=t[s],o=e[s],a=this[s];if(!r||!o||r.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=a.length,u=o.length;if(h<u)for(var l=n?E:R,c=h;c<u;c++)this.add(new l);else h>u&&this[n?"removeSegments":"removeChildren"](u,h);for(var c=0;c<u;c++)a[c].interpolate(r[c],o[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],n=t._children?t._children.slice():[t],s=i.length,r=n.length,o=[],a=0;e=!0;for(var h=s-1;h>=0&&e;h--){var u=i[h];e=!1;for(var l=r-1;l>=0&&!e;l--)u.compare(n[l])&&(o[l]||(o[l]=!0,a++),e=!0)}e=e&&a===r}return e}}),R=N.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==n||t.x===n&&t.point===n?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=n,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&o.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=n,32&e)this._version++;else if(this._curves)for(var i=0,s=this._curves.length;i<s;i++)this._curves[i]._changed()}else 64&e&&(this._bounds=n)},getStyle:function(){var t=this._parent;return(t instanceof L?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,i){var s=t[i-1];"boolean"==typeof s&&(this.setClosed(s),i--),this._add(E.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;n<i;n++)t[n]=new I(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new I(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){function i(e,i){if(e._transformCoordinates(t,_),n=_[0],s=_[1],g)y.push("M"+d.pair(n,s)),g=!1;else if(a=_[2],h=_[3],a===n&&h===s&&u===r&&c===o){if(!i){var l=n-r,p=s-o;y.push(0===l?"v"+d.number(p):0===p?"h"+d.number(l):"l"+d.pair(l,p))}}else y.push("c"+d.pair(u-r,c-o)+" "+d.pair(a-r,h-o)+" "+d.pair(n-r,s-o));r=n,o=s,u=_[4],c=_[5]}var n,s,r,o,a,h,u,c,p=this._segments,f=p.length,d=new l(e),_=new Array(6),g=!0,y=[];if(!f)return"";for(var v=0;v<f;v++)i(p[v]);return this._closed&&f>0&&(i(p[0],!0),y.push("z")),y.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,s=e.length;n<s;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,s=t.length,r=null==e,e=r?i.length:e,a=0;a<s;a++){var h=t[a];h._path&&(h=t[a]=h.clone()),h._path=this,h._index=e+a,h._selection&&this._updateSelection(h,0,h._selection)}if(r)o.push(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var a=e+s,u=i.length;a<u;a++)i[a]._index=a}if(n){var l=this._countCurves(),c=e>0&&e+s-1===l?e-1:e,p=c,f=Math.min(c+s,l);t._curves&&(n.splice.apply(n,[c,0].concat(t._curves)),p+=t._curves.length);for(var a=p;a<f;a++)n.splice(a,0,new I(this,null,null));this._adjustCurves(c,f)}return this._changed(41),t},_adjustCurves:function(t,e){for(var i,n=this._segments,s=this._curves,r=t;r<e;r++)i=s[r],i._path=this,i._segment1=n[r],i._segment2=n[r+1]||n[0],i._changed();(i=s[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=s[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(E.readList(arguments)):this._add([E.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(E.readList(arguments,1),t):this._add([E.read(arguments,1)],t)[0]},addSegment:function(){return this._add([E.read(arguments)])[0]},insertSegment:function(t){return this._add([E.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(E.readList(t))},insertSegments:function(t,e){return this._add(E.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=o.pick(e,this._segments.length);var n=this._segments,s=this._curves,r=n.length,a=n.splice(t,e-t),h=a.length;if(!h)return a;for(var u=0;u<h;u++){var l=a[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}for(var u=t,c=n.length;u<c;u++)n[u]._index=u;if(s){for(var p=t>0&&e===r+(this._closed?1:0)?t-1:t,s=s.splice(p,h),u=s.length-1;u>=0;u--)s[u]._path=null;i&&(a._curves=s.slice(1)),this._adjustCurves(p,p)}return this._changed(41),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,s=e.length;n<s;n++){var r=n+1===s;t+=I.getArea(I.getValues(e[n],e[r?0:n+1],null,r&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var s=0;s<i;s++)e[s]._selection=n},_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time;n>1-1e-8&&(i++,n=0);var s=this.getCurves();if(i>=0&&i<s.length){n>=1e-8&&s[i++].divideAtTime(n);var r,o=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),r=this):(r=new R(w.NO_INSERT),r.insertAbove(this),r.copyAttributes(this)),r._add(o,0),this.addSegment(o[0]),r}return null},split:function(t,e){var i,s=e===n?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return null!=s?this.splitAt(s):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,s=this.getLastSegment(),r=t.getLastSegment();if(!r)return this;s&&s._point.isClose(r._point,i)&&t.reverse();var o=t.getFirstSegment();if(s&&s._point.isClose(o._point,i))s.setHandleOut(o._handleOut),this._add(n.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,i)&&t.reverse(),r=t.getLastSegment(),a&&a._point.isClose(r._point,i)?(a.setHandleIn(r._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var h=this.getFirstSegment(),u=this.getLastSegment();return h!==u&&h._point.isClose(u._point,i)&&(h.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,s=e.length-1;s>=0;s--){var r=e[s];!r.hasHandles()&&(!r.hasLength(n)||i&&r.isCollinear(r.getNext()))&&r.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new q(this,t||.25,256,!0),i=e.parts,n=i.length,s=[],r=0;r<n;r++)s.push(new E(i[r].curve.slice(0,2)));!this._closed&&n>0&&s.push(new E(i[n-1].curve.slice(6))),this.setSegments(s)},simplify:function(t){var e=new B(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var n=t&&t.index;if(null!=n){var s=t.path;if(s&&s!==i)throw new Error(t._class+" "+n+" of "+s+" is not part of "+i);e&&t instanceof I&&n++}else n="number"==typeof t?t:e;return Math.min(n<0&&h?n%a:n<0?n+a:n,a-1)}var i=this,s=t||{},r=s.type||"asymmetric",o=this._segments,a=o.length,h=this._closed,u=h&&s.from===n&&s.to===n,l=e(s.from,0),c=e(s.to,a-1);if(l>c)if(h)l-=a;else{var p=l;l=c,c=p}if(/^(?:asymmetric|continuous)$/.test(r)){var f="asymmetric"===r,d=Math.min,_=c-l+1,g=_-1,y=u?d(_,4):1,v=y,m=y,b=[];if(h||(v=d(1,l),m=d(1,a-c-1)),(g+=v+m)<=1)return;for(var x=0,w=l-v;x<=g;x++,w++)b[x]=o[(w<0?w+a:w)%a]._point;for(var S=b[0]._x+2*b[1]._x,T=b[0]._y+2*b[1]._y,k=2,C=g-1,A=[S],P=[T],O=[k],E=[],M=[],x=1;x<g;x++){var F=x<C,N=F?1:f?1:2,R=F?4:f?2:7,L=F?4:f?3:8,q=F?2:f?0:1,B=N/k;k=O[x]=R-B,S=A[x]=L*b[x]._x+q*b[x+1]._x-B*S,T=P[x]=L*b[x]._y+q*b[x+1]._y-B*T}E[C]=A[C]/O[C],M[C]=P[C]/O[C];for(var x=g-2;x>=0;x--)E[x]=(A[x]-E[x+1])/O[x],M[x]=(P[x]-M[x+1])/O[x];E[g]=(3*b[g]._x-E[C])/2,M[g]=(3*b[g]._y-M[C])/2;for(var x=v,j=g-m,w=l;x<=j;x++,w++){var V=o[w<0?w+a:w],D=V._point,z=E[x]-D._x,U=M[x]-D._y;(u||x<j)&&V.setHandleOut(z,U),(u||x>v)&&V.setHandleIn(-z,-U)}}else for(var x=l;x<=c;x++)o[x<0?x+a:x].smooth(s,!u&&x===l,!u&&x===c)},toShape:function(t){function e(t,e){var i=u[t],n=i.getNext(),s=u[e],r=s.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&s._handleOut.isZero()&&r._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(r._point.subtract(s._point))}function i(t){var e=u[t],i=e.getNext(),n=e._handleOut,s=i._handleIn;if(n.isOrthogonal(s)){var r=e._point,o=i._point,a=new b(r,n,!0).intersect(new b(o,s,!0),!0);return a&&c.isZero(n.getLength()/a.subtract(r).getLength()-.5522847498307936)&&c.isZero(s.getLength()/a.subtract(o).getLength()-.5522847498307936)}return!1}function s(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this._closed)return null;var r,o,a,h,u=this._segments;if(!this.hasHandles()&&4===u.length&&e(0,2)&&e(1,3)&&function(t){var e=u[t],i=e.getPrevious(),n=e.getNext();return i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(n._point.subtract(e._point))}(1)?(r=k.Rectangle,o=new _(s(0,3),s(0,1)),h=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(r=k.Rectangle,o=new _(s(1,6),s(0,3)),a=o.subtract(new _(s(0,7),s(1,2))).divide(2),h=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&i(0)&&i(1)&&i(2)&&i(3)&&(c.isZero(s(0,2)-s(1,3))?(r=k.Circle,a=s(0,2)/2):(r=k.Ellipse,a=new _(s(2,0)/2,s(3,1)/2)),h=u[1]._point),r){var l=this.getPosition(!0),p=new r({center:l,size:o,radius:a,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(h.subtract(l).getAngle()+90),(t===n||t)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof L)return t.base.call(this,e);var i=this.getCurves(),n=e.getCurves(),s=i.length,r=n.length;if(!s||!r)return s==r;for(var o,a,h=i[0].getValues(),u=[],l=0,c=0,p=0;p<r;p++){var f=n[p].getValues();u.push(f);var d=I.getOverlaps(h,f);if(d){o=!p&&d[0][0]>0?r-1:p,a=d[0][1];break}}for(var _,g=Math.abs,f=u[o];h&&f;){var d=I.getOverlaps(h,f);if(d){if(g(d[0][0]-c)<1e-8){c=d[1][0],1===c&&(h=++l<s?i[l].getValues():null,c=0);var y=d[0][1];if(g(y-a)<1e-8){if(_||(_=[o,y]),a=d[1][1],1===a&&(++o>=r&&(o=0),f=u[o]||n[o].getValues(),a=0),!h)return _[0]===o&&_[1]===a;continue}}}break}return!1},_hitTestSelf:function(t,e,i,n){function s(e,i){return t.subtract(e).divide(i).length<=1}function r(t,i,n){if(!e.selected||i.isSelected()){var r=t._point;if(i!==r&&(i=i.add(r)),s(i,x))return new O(n,_,{segment:t,point:i})}}function o(t,i){return(i||e.segments)&&r(t,t._point,"segment")||!i&&e.handles&&(r(t,t._handleIn,"handle-in")||r(t,t._handleOut,"handle-out"))}function a(t){p.add(t)}function h(e){var i=m||e._index>0&&e._index<v-1;if("round"===(i?u:l))return s(e._point,x);if(p=new R({internal:!0,closed:!0}),i?e.isSmooth()||R._addBevelJoin(e,u,k,c,null,n,a,!0):"square"===l&&R._addSquareCap(e,l,k,null,n,a,!0),!p.isEmpty()){var r;return p.contains(t)||(r=p.getNearestLocation(t))&&s(r.getPoint(),b)}}var u,l,c,p,f,d,_=this,g=this.getStyle(),y=this._segments,v=y.length,m=this._closed,b=e._tolerancePadding,x=b,w=e.stroke&&g.hasStroke(),S=e.fill&&g.hasFill(),T=e.curves,k=w?g.getStrokeWidth()/2:S&&e.tolerance>0||T?0:null;if(null!==k&&(k>0?(u=g.getStrokeJoin(),l=g.getStrokeCap(),c=g.getMiterLimit(),x=x.add(R._getStrokePadding(k,n))):u=l="round"),!e.ends||e.segments||m){if(e.segments||e.handles)for(var C=0;C<v;C++)if(d=o(y[C]))return d}else if(d=o(y[0],!0)||o(y[v-1],!0))return d;if(null!==k){if(f=this.getNearestLocation(t)){var A=f.getTime();0===A||1===A&&v>1?h(f.getSegment())||(f=null):s(f.getPoint(),x)||(f=null)}if(!f&&"miter"===u&&v>1)for(var C=0;C<v;C++){var P=y[C];if(t.getDistance(P._point)<=c*k&&h(P)){f=P.getLocation();break}}}return!f&&S&&this._contains(t)||f&&!w&&!T?new O("fill",this):f?new O(w?"stroke":"curve",this,{location:f,point:f.getPoint()}):null}},o.each(I._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=f.read(arguments),e=this.getCurves(),i=0,n=e.length;i<n;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,s=e.length;n<s;n++){var r=i,o=e[n];if((i+=o.getLength())>t)return o.getLocationAt(t-r)}if(e.length>0&&t<=this.getLength())return new F(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=f.read(arguments);if(t.isZero())return[];for(var e=[],i=0,n=this.getCurves(),s=0,r=n.length;s<r;s++){for(var o=n[s],a=o.getTimesWithTangent(t),h=0,u=a.length;h<u;h++){var l=i+o.getOffsetAtTime(a[h]);e.indexOf(l)<0&&e.push(l)}i+=o.length}return e}}),new function(){function t(t,e,i,n){function s(e){var i=h[e],n=h[e+1];r==i&&o==n||(t.beginPath(),t.moveTo(r,o),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,a,0,2*Math.PI,!0),t.fill())}for(var r,o,a=n/2,h=new Array(6),u=0,l=e.length;u<l;u++){var c=e[u],p=c._selection
;if(c._transformCoordinates(i,h),r=h[0],o=h[1],2&p&&s(2),4&p&&s(4),t.fillRect(r-a,o-a,n,n),!(1&p)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-a+1,o-a+1,n-2,n-2),t.fillStyle=f}}}function e(t,e,i){function n(e){if(i)e._transformCoordinates(i,d),s=d[0],r=d[1];else{var n=e._point;s=n._x,r=n._y}if(_)t.moveTo(s,r),_=!1;else{if(i)h=d[2],u=d[3];else{var p=e._handleIn;h=s+p._x,u=r+p._y}h===s&&u===r&&l===o&&c===a?t.lineTo(s,r):t.bezierCurveTo(l,c,h,u,s,r)}if(o=s,a=r,i)l=d[4],c=d[5];else{var p=e._handleOut;l=o+p._x,c=a+p._y}}for(var s,r,o,a,h,u,l,c,p=e._segments,f=p.length,d=new Array(6),_=!0,g=0;g<f;g++)n(p[g]);e._closed&&f>0&&n(p[0])}return{_draw:function(t,i,n,s){function r(t){return c[(t%p+p)%p]}var o=i.dontStart,a=i.dontFinish||i.clip,h=this.getStyle(),u=h.hasFill(),l=h.hasStroke(),c=h.getDashArray(),p=!at.support.nativeDash&&l&&c&&c.length;if(o||t.beginPath(),(u||l&&!p||a)&&(e(t,this,s),this._closed&&t.closePath()),!a&&(u||l)&&(this._setStyles(t,i,n),u&&(t.fill(h.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),l)){if(p){o||t.beginPath();var f,d=new q(this,.25,32,!1,s),_=d.length,g=-h.getDashOffset(),y=0;for(g%=_;g>0;)g-=r(y--)+r(y--);for(;g<_;)f=g+r(y++),(g>0||f>0)&&d.drawPart(t,Math.max(g,0),Math.max(f,0)),g=f+r(y++)}t.stroke()}},_drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),t(i,this._segments,n,at.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new E(f.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new E(f.read(arguments))])},cubicCurveTo:function(){var e=f.read(arguments),i=f.read(arguments),n=f.read(arguments),s=t(this);s.setHandleOut(e.subtract(s._point)),this._add([new E(n,i.subtract(n))])},quadraticCurveTo:function(){var e=f.read(arguments),i=f.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var e=f.read(arguments),i=f.read(arguments),n=o.pick(o.read(arguments),.5),s=1-n,r=t(this)._point,a=e.subtract(r.multiply(s*s)).subtract(i.multiply(n*n)).divide(2*n*s);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(a,i)},arcTo:function(){var e,i,n,s,r,a=Math.abs,h=Math.sqrt,u=t(this),l=u._point,p=f.read(arguments),d=o.peek(arguments),g=o.pick(d,!0);if("boolean"==typeof g)var y=l.add(p).divide(2),e=y.add(y.subtract(l).rotate(g?-90:90));else if(o.remain(arguments)<=2)e=p,p=f.read(arguments);else{var v=_.read(arguments),x=c.isZero;if(x(v.width)||x(v.height))return this.lineTo(p);var w=o.read(arguments),g=!!o.read(arguments),S=!!o.read(arguments),y=l.add(p).divide(2),T=l.subtract(y).rotate(-w),k=T.x,C=T.y,A=a(v.width),P=a(v.height),O=A*A,M=P*P,I=k*k,F=C*C,N=h(I/O+F/M);if(N>1&&(A*=N,P*=N,O=A*A,M=P*P),N=(O*M-O*F-M*I)/(O*F+M*I),a(N)<1e-12&&(N=0),N<0)throw new Error("Cannot create an arc with the given arguments");i=new f(A*C/P,-P*k/A).multiply((S===g?-1:1)*h(N)).rotate(w).add(y),r=(new m).translate(i).rotate(w).scale(A,P),s=r._inverseTransform(l),n=s.getDirectedAngle(r._inverseTransform(p)),!g&&n>0?n-=360:g&&n<0&&(n+=360)}if(e){var R=new b(l.add(e).divide(2),e.subtract(l).rotate(90),!0),L=new b(e.add(p).divide(2),p.subtract(e).rotate(90),!0),q=new b(l,p),B=q.getSide(e);if(!(i=R.intersect(L,!0))){if(!B)return this.lineTo(p);throw new Error("Cannot create an arc with the given arguments")}s=l.subtract(i),n=s.getDirectedAngle(p.subtract(i));var j=q.getSide(i,!0);0===j?n=B*a(n):B===j&&(n+=n<0?360:-360)}for(var V=a(n),D=V>=360?4:Math.ceil((V-1e-7)/90),z=n/D,U=z*Math.PI/360,G=4/3*Math.sin(U)/(1+Math.cos(U)),W=[],H=0;H<=D;H++){var T=p,Q=null;if(H<D&&(Q=s.rotate(90).multiply(G),r?(T=r._transformPoint(s),Q=r._transformPoint(s.add(Q)).subtract(T)):T=i.add(s)),H){var Z=s.rotate(-90).multiply(G);r&&(Z=r._transformPoint(s.add(Z)).subtract(T)),W.push(new E(T,Z,Q))}else u.setHandleOut(Q);s=s.rotate(z)}this._add(W)},lineBy:function(){var e=f.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=f.read(arguments),i=f.read(arguments),n=o.read(arguments),s=t(this)._point;this.curveTo(s.add(e),s.add(i),n)},cubicCurveBy:function(){var e=f.read(arguments),i=f.read(arguments),n=f.read(arguments),s=t(this)._point;this.cubicCurveTo(s.add(e),s.add(i),s.add(n))},quadraticCurveBy:function(){var e=f.read(arguments),i=f.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(f.read(arguments)),n=o.pick(o.peek(arguments),!0);"boolean"==typeof n?this.arcTo(i,n):this.arcTo(i,e.add(f.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return R[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,n,s,r){function o(t){t._transformCoordinates(n,h);for(var e=0;e<2;e++)I._addBounds(u[e],u[e+4],h[e+2],h[e],e,r?r[e]:0,l,c,p);var i=u;u=h,h=i}var a=t[0];if(!a)return new y;for(var h=new Array(6),u=a._transformCoordinates(n,new Array(6)),l=u.slice(0,2),c=l.slice(),p=new Array(2),f=1,d=t.length;f<d;f++)o(t[f]);return e&&o(a),new y(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,i,n,s){function r(t){d=d.include(t)}function o(t){d=d.unite(x.setCenter(t._point.transform(n)))}function a(t,e){"round"===e||t.isSmooth()?o(t):R._addBevelJoin(t,e,g,b,n,p,r)}function h(t,e){"round"===e?o(t):R._addSquareCap(t,e,g,n,p,r)}var u=i.getStyle(),l=u.hasStroke(),c=u.getStrokeWidth(),p=l&&i._getStrokeMatrix(n,s),f=l&&R._getStrokePadding(c,p),d=R.getBounds(t,e,i,n,s,f);if(!l)return d;for(var g=c/2,v=u.getStrokeJoin(),m=u.getStrokeCap(),b=u.getMiterLimit(),x=new y(new _(f)),w=t.length-(e?0:1),S=1;S<w;S++)a(t[S],v);return e?a(t[0],v):w>0&&(h(t[0],m),h(t[t.length-1],m)),d},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new f(t,0).transform(e),n=new f(0,t).transform(e),s=i.getAngleInRadians(),r=i.getLength(),o=n.getLength(),a=Math.sin(s),h=Math.cos(s),u=Math.tan(s),l=Math.atan2(o*u,r),c=Math.atan2(o,u*r);return[Math.abs(r*Math.cos(l)*h+o*Math.sin(l)*a),Math.abs(o*Math.sin(c)*h+r*Math.cos(c)*a)]},_addBevelJoin:function(t,e,i,n,s,r,o,a){var h=t.getCurve(),u=h.getPrevious(),l=h.getPoint1().transform(s),c=u.getNormalAtTime(1).multiply(i).transform(r),p=h.getNormalAtTime(0).multiply(i).transform(r);if(c.getDirectedAngle(p)<0&&(c=c.negate(),p=p.negate()),a&&o(l),o(l.add(c)),"miter"===e){var d=new b(l.add(c),new f(-c.y,c.x),!0).intersect(new b(l.add(p),new f(-p.y,p.x),!0),!0);d&&l.getDistance(d)<=n*i&&o(d)}o(l.add(p))},_addSquareCap:function(t,e,i,n,s,r,o){var a=t._point.transform(n),h=t.getLocation(),u=h.getNormal().multiply(0===h.getTime()?i:-i).transform(s);"square"===e&&(o&&(r(a.subtract(u)),r(a.add(u))),a=a.add(u.rotate(-90))),r(a.add(u)),r(a.subtract(u))},getHandleBounds:function(t,e,i,n,s){var r,o,a=i.getStyle(),h=s.stroke&&a.hasStroke();if(h){var u=i._getStrokeMatrix(n,s),l=a.getStrokeWidth()/2,c=l;"miter"===a.getStrokeJoin()&&(c=l*a.getMiterLimit()),"square"===a.getStrokeCap()&&(c=Math.max(c,l*Math.SQRT2)),r=R._getStrokePadding(l,u),o=R._getStrokePadding(c,u)}for(var p=new Array(6),f=1/0,d=-f,_=f,g=d,v=0,m=t.length;v<m;v++){t[v]._transformCoordinates(n,p);for(var b=0;b<6;b+=2){var x=b?r:o,w=x?x[0]:0,S=x?x[1]:0,T=p[b],k=p[b+1],C=T-w,A=T+w,P=k-S,O=k+S;C<f&&(f=C),A>d&&(d=A),P<_&&(_=P),O>g&&(g=O)}}return new y(f,_,d-f,g-_)}}});R.inject({statics:new function(){function t(t,e,i){var n=o.getNamed(i),s=new R(n&&0==n.insert&&w.NO_INSERT);return s._add(t),s._closed=e,s.set(n,{insert:!0})}function e(e,i,s){for(var r=new Array(4),o=0;o<4;o++){var a=n[o];r[o]=new E(a._point.multiply(i).add(e),a._handleIn.multiply(i),a._handleOut.multiply(i))}return t(r,!0,s)}var i=.5522847498307936,n=[new E([-1,0],[0,i],[0,-i]),new E([0,-1],[-i,0],[i,0]),new E([1,0],[0,-i],[0,i]),new E([0,1],[i,0],[-i,0])];return{Line:function(){return t([new E(f.readNamed(arguments,"from")),new E(f.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=f.readNamed(arguments,"center"),i=o.readNamed(arguments,"radius");return e(t,new _(i),arguments)},Rectangle:function(){var e,n=y.readNamed(arguments,"rectangle"),s=_.readNamed(arguments,"radius",0,{readNull:!0}),r=n.getBottomLeft(!0),o=n.getTopLeft(!0),a=n.getTopRight(!0),h=n.getBottomRight(!0);if(!s||s.isZero())e=[new E(r),new E(o),new E(a),new E(h)];else{s=_.min(s,n.getSize(!0).divide(2));var u=s.width,l=s.height,c=u*i,p=l*i;e=[new E(r.add(u,0),null,[-c,0]),new E(r.subtract(0,l),[0,p]),new E(o.add(0,l),null,[0,-p]),new E(o.add(u,0),[-c,0],null),new E(a.subtract(u,0),null,[c,0]),new E(a.add(0,l),[0,-p],null),new E(h.subtract(0,l),null,[0,p]),new E(h.subtract(u,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=k._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=f.readNamed(arguments,"from"),e=f.readNamed(arguments,"through"),i=f.readNamed(arguments,"to"),n=o.getNamed(arguments),s=new R(n&&0==n.insert&&w.NO_INSERT);return s.moveTo(t),s.arcTo(e,i),s.set(n)},RegularPolygon:function(){for(var e=f.readNamed(arguments,"center"),i=o.readNamed(arguments,"sides"),n=o.readNamed(arguments,"radius"),s=360/i,r=i%3==0,a=new f(0,r?-n:n),h=r?-1:.5,u=new Array(i),l=0;l<i;l++)u[l]=new E(e.add(a.rotate((l+h)*s)));return t(u,!0,arguments)},Star:function(){for(var e=f.readNamed(arguments,"center"),i=2*o.readNamed(arguments,"points"),n=o.readNamed(arguments,"radius1"),s=o.readNamed(arguments,"radius2"),r=360/i,a=new f(0,-1),h=new Array(i),u=0;u<i;u++)h[u]=new E(e.add(a.rotate(r*u).multiply(u%2?s:n)));return t(h,!0,arguments)}}}});var L=N.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,i){var n=i,s=n[0];s&&"number"==typeof s[0]&&(n=[n]);for(var r=i.length-1;r>=0;r--){var a=n[r];n!==i||a instanceof R||(n=o.slice(n)),Array.isArray(a)?n[r]=new R({segments:a,insert:!1}):a instanceof L&&(n.splice.apply(n,[r,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var i=this._children,n=i.length-1;n>=0;n--){var s=i[n].reduce(e);s.isEmpty()&&s.remove()}if(!i.length){var s=new R(w.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;i<n;i++)o.push(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],s=0,r=i.length;s<r;s++){var o=i[s],a=o._matrix;n.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return n.join("")},_hitTestChildren:function t(e,i,n){return t.base.call(this,e,i.class===R||"path"===i.type?i:o.set({},i,{fill:!1}),n)},_draw:function(t,e,i,n){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,o=s.length;r<o;r++)s[r].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,s=0,r=n.length;s<r;s++){var o=n[s],a=o._matrix;i[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new R(w.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=f.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},o.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,n=this._children,s=0,r=n.length;s<r;s++)i=n[s][t](e)||i;return i}},{}));N.inject(new function(){function t(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0):i}function e(t,e,i,n,s){var r=new L(w.NO_INSERT);return r.addChildren(t,!0),r=r.reduce({simplify:e}),s&&0==s.insert||r.insertAbove(n&&i.isSibling(n)&&i.getIndex()<n.getIndex()?n:i),r.copyAttributes(i,!0),r}function i(i,n,r,a){function l(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];o.push(x,n._segments),o.push(w,n.getCurves()),n._overlapsOnly=!0}}if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(r))return s(i,n,r);var c=t(i,!0),d=n&&i!==n&&t(n,!0),_=y[r];_[r]=!0,d&&(_.subtract||_.exclude)^d.isClockwise()^c.isClockwise()&&d.reverse();var g,v=u(F.expand(c.getCrossings(d))),m=c._children||[c],b=d&&(d._children||[d]),x=[],w=[];if(v.length){l(m),b&&l(b);for(var S=0,T=v.length;S<T;S++)p(v[S]._segment,c,d,w,_);for(var S=0,T=x.length;S<T;S++){var k=x[S],C=k._intersection;k._winding||p(k,c,d,w,_),C&&C._overlap||(k._path._overlapsOnly=!1)}g=f(x,_)}else g=h(b?m.concat(b):m.slice(),function(t){return!!_[t]});return e(g,!0,i,n,a)}function s(i,n,s){function r(t){if(!c[t._id]&&(l||a.contains(t.getPointAt(t.getLength()/2))^u))return p.unshift(t),c[t._id]=!0}for(var o=t(i),a=t(n),h=o.getCrossings(a),u="subtract"===s,l="divide"===s,c={},p=[],f=h.length-1;f>=0;f--){var d=h[f].split();d&&(r(d)&&d.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return r(o),e(p,!1,i,n)}function r(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function a(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function h(t,e,i){var n=t&&t.length;if(n){var s=o.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),r=t.slice().sort(function(t,e){return g(e.getArea())-g(t.getArea())}),a=r[0];null==i&&(i=a.isClockwise());for(var h=0;h<n;h++){for(var u=r[h],l=s[u._id],c=u.getInteriorPoint(),p=0,f=h-1;f>=0;f--){var d=r[f];if(d.contains(c)){var _=s[d._id];p=_.winding,l.winding+=p,l.container=_.exclude?_.container:d;break}}if(e(l.winding)===e(p))l.exclude=!0,t[l.index]=null;else{var y=l.container;u.setClockwise(y?!y.isClockwise():i)}}}return t}function u(t,e,i){function n(t){return t._path._id+"."+t._segment1._index}for(var s,o,h,u=e&&[],l=!1,c=i||[],p=i&&{},f=(i&&i.length)-1;f>=0;f--){var d=i[f];d._path&&(p[n(d)]=!0)}for(var f=t.length-1;f>=0;f--){var _,g=t[f],y=g._time,v=y,m=e&&!e(g),d=g._curve;if(d&&(d!==o?(l=!d.hasHandles()||p&&p[n(d)],s=[],h=null,o=d):h>=1e-8&&(y/=h)),m)s&&s.push(g);else{if(e&&u.unshift(g),h=v,y<1e-8)_=d._segment1;else if(y>1-1e-8)_=d._segment2;else{var b=d.divideAtTime(y,!0);l&&c.push(d,b),_=b._segment1;for(var x=s.length-1;x>=0;x--){var w=s[x];w._time=(w._time-y)/(1-y)}}g._setSegment(_);var S=_._intersection,T=g._intersection;if(S){r(S,T);for(var k=S;k;)r(k._intersection,S),k=k._next}else _._intersection=T}}return i||a(c),u||t}function l(t,e,i,n,s){function r(r){var o=r[c+0],h=r[c+6];if(!(y<d(o,h)||y>_(o,h))){var p=r[u+0],g=r[u+2],x=r[u+4],w=r[u+6];if(o===h)return void((p<b&&w>m||w<b&&p>m)&&(k=!0));var C=y===o?0:y===h?1:m>_(p,g,x,w)||b<d(p,g,x,w)?1:I.solveCubic(r,c,y,P,0,1)>0?P[0]:1,O=0===C?p:1===C?w:I.getPoint(r,C)[i?"y":"x"],E=o>h?1:-1,M=a[c]>a[c+6]?1:-1,F=a[u+6];return y!==o?(O<m?S+=E:O>b?T+=E:k=!0,O>f-v&&O<f+v&&(A/=2)):(E!==M?p<m?S+=E:p>b&&(T+=E):p!=F&&(F<b&&O>b?(T+=E,k=!0):F>m&&O<m&&(S+=E,k=!0)),A=0),a=r,!s&&O>m&&O<b&&0===I.getTangent(r,C)[i?"x":"y"]&&l(t,e,!i,n,!0)}}function o(t){var e=t[c+0],n=t[c+2],s=t[c+4],o=t[c+6];if(y<=_(e,n,s,o)&&y>=d(e,n,s,o))for(var a,h=t[u+0],l=t[u+2],p=t[u+4],f=t[u+6],g=m>_(h,l,p,f)||b<d(h,l,p,f)?[t]:I.getMonoCurves(t,i),v=0,x=g.length;v<x;v++)if(a=r(g[v]))return a}for(var a,h,u=i?1:0,c=1^u,p=[t.x,t.y],f=p[u],y=p[c],v=1e-6,m=f-1e-9,b=f+1e-9,x=0,w=0,S=0,T=0,k=!1,C=!1,A=1,P=[],O=0,E=e.length;O<E;O++){var M,F=e[O],N=F._path,R=F.getValues();if(!(O&&e[O-1]._path===N||(a=null,N._closed||(h=I.getValues(N.getLastCurve().getSegment2(),F.getSegment1(),null,!n),h[c]!==h[c+6]&&(a=h)),a))){a=R;for(var L=N.getLastCurve();L&&L!==F;){var q=L.getValues();if(q[c]!==q[c+6]){a=q;break}L=L.getPrevious()}}if(M=o(R))return M;if(O+1===E||e[O+1]._path!==N){if(h&&(M=o(h)))return M;!k||S||T||(S=T=N.isClockwise(n)^i?1:-1),x+=S,w+=T,S=T=0,k&&(C=!0,k=!1),h=null}}return x=g(x),w=g(w),{winding:_(x,w),windingL:x,windingR:w,quality:A,onPath:C}}function p(t,e,i,n,s){var r,o=[],a=t,h=0;do{var u=t.getCurve(),p=u.getLength();o.push({segment:t,curve:u,length:p}),h+=p,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var f=[.5,.25,.75],r={winding:0,quality:-1},d=0;d<f.length&&r.quality<.5;d++)for(var p=h*f[d],_=0,y=o.length;_<y;_++){var v=o[_],m=v.length;if(p<=m){var u=v.curve,b=u._path,x=b._parent,w=x instanceof L?x:b,S=c.clamp(u.getTimeAt(p),1e-8,1-1e-8),T=u.getPointAtTime(S),k=g(u.getTangentAtTime(S).y)<Math.SQRT1_2,C=null;if(s.subtract&&i){var A=w===e?i._getWinding(T,k,!0):e._getWinding(T,k,!0);if(w===e&&A.winding||w===i&&!A.winding){if(A.quality<1)continue;C={winding:0,quality:1}}}C=C||l(T,n,k,!0),C.quality>r.quality&&(r=C);break}p-=m}for(var _=o.length-1;_>=0;_--)o[_].segment._winding=r}function f(t,e){function i(t){var i;return!(!t||t._visited||e&&(!e[(i=t._winding||{}).winding]||e.unite&&2===i.winding&&i.windingL&&i.windingR))}function n(t){if(t)for(var e=0,i=r.length;e<i;e++)if(t===r[e])return!0;return!1}function s(t){for(var e=t._segments,i=0,n=e.length;i<n;i++)e[i]._visited=!0}var r,o=[];t.sort(function(t,e){var i=t._intersection,n=e._intersection,s=!(!i||!i._overlap),r=!(!n||!n._overlap),o=t._path,a=e._path;return s^r?s?1:-1:!i^!n?i?1:-1:o!==a?o._id-a._id:t._index-e._index});for(var a=0,h=t.length;a<h;a++){var u,l,c,p=t[a],f=i(p),d=null,_=!1,g=!0,y=[];if(f&&p._path._overlapsOnly){var v=p._path,m=p._intersection._segment._path;v.compare(m)&&(v.getArea()&&o.push(v.clone(!1)),s(v),s(m),f=!1)}for(;f;){var b=!d,x=function(t,e){function s(s,o){for(;s&&s!==o;){var a=s._segment,u=a&&a._path;if(u){var l=a.getNext()||u.getFirstSegment(),c=l._intersection;a!==t&&(n(a)||n(l)||l&&i(a)&&(i(l)||c&&i(c._segment)))&&h.push(a),e&&r.push(a)}s=s._next}}var o=t._intersection,a=o,h=[];if(e&&(r=[t]),o){for(s(o);o&&o._prev;)o=o._prev;s(o,a)}return h}(p,b),S=x.shift(),_=!b&&(n(p)||n(S)),T=!_&&S;if(b&&(d=new R(w.NO_INSERT),u=null),_){(p.isFirst()||p.isLast())&&(g=p._path._closed),p._visited=!0;break}if(T&&u&&(y.push(u),u=null),u||(T&&x.push(p),u={start:d._segments.length,crossings:x,visited:l=[],handleIn:c}),T&&(p=S),!i(p)){d.removeSegments(u.start);for(var k=0,C=l.length;k<C;k++)l[k]._visited=!1;l.length=0;do{(p=u&&u.crossings.shift())&&p._path||(p=null,(u=y.pop())&&(l=u.visited,c=u.handleIn))}while(u&&!i(p));if(!p)break}var A=p.getNext();d.add(new E(p._point,c,A&&p._handleOut)),p._visited=!0,l.push(p),p=A||p._path.getFirstSegment(),c=A&&A._handleIn}_&&(g&&(d.getFirstSegment().setHandleIn(c),d.setClosed(g)),0!==d.getArea()&&o.push(d))}return o}var d=Math.min,_=Math.max,g=Math.abs,y={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,i){return l(t,this.getCurves(),e,i)},unite:function(t,e){return i(this,t,"unite",e)},intersect:function(t,e){return i(this,t,"intersect",e)},subtract:function(t,e){return i(this,t,"subtract",e)},exclude:function(t,e){return i(this,t,"exclude",e)},divide:function(t,i){return i&&(0==i.trace||i.stroke)?s(this,t,"divide"):e([this.subtract(t,i),this.intersect(t,i)],!0,this,t,i)},resolveCrossings:function(){function t(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path===e}var e=this._children,i=e||[this],n=!1,s=!1,r=this.getIntersections(null,function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(s=!0)}),h=n&&s&&[];if(r=F.expand(r),n)for(var l=u(r,function(t){return t.hasOverlap()},h),c=l.length-1;c>=0;c--){var p=l[c],d=p._path,_=p._segment,g=_.getPrevious(),y=_.getNext();t(g,d)&&t(y,d)&&(_.remove(),g._handleOut._set(0,0),y._handleIn._set(0,0),g===_||g.getCurve().hasLength()||(y._handleIn.set(g._handleIn),g.remove()))}s&&(u(r,n&&function(t){var e=t.getCurve(),i=t.getSegment(),n=t._intersection,s=n._curve,r=n._segment;if(e&&s&&e._path&&s._path)return!0;i&&(i._intersection=null),r&&(r._intersection=null)},h),h&&a(h),i=f(o.each(i,function(t){o.push(this,t._segments)},[])));var v,m=i.length;return m>1&&e?(i!==e&&this.setChildren(i),v=this):1!==m||e||(i[0]!==this&&this.setSegments(i[0].removeSegments()),v=this),v||(v=new L(w.NO_INSERT),v.addChildren(i),v=v.reduce(),v.copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,e){var i=this._children;return i&&i.length?this.setChildren(h(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==n&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var i=this.getCurves(),n=e.y,s=[],r=[],o=0,a=i.length;o<a;o++){var h=i[o].getValues(),u=h[1],l=h[3],c=h[5],p=h[7];if(n>=d(u,l,c,p)&&n<=_(u,l,c,p))for(var f=I.getMonoCurves(h),g=0,y=f.length;g<y;g++){var v=f[g],m=v[1],b=v[7];if(m!==b&&(n>=m&&n<=b||n>=b&&n<=m)){var x=n===m?v[0]:n===b?v[6]:1===I.solveCubic(v,1,n,r,0,1)?I.getPoint(v,r[0]).x:(v[0]+v[6])/2;s.push(x)}}}s.length>1&&(s.sort(function(t,e){return t-e}),e.x=(s[0]+s[1])/2)}return e}}});var q=o.extend({_class:"PathFlattener",initialize:function(t,e,i,n,s){function r(t,e){var i=I.getValues(t,e,s);h.push(i),o(i,t._index,0,1)}function o(t,i,s,r){if(!(r-s>c)||n&&I.isStraight(t)||I.isFlatEnough(t,e||.25)){var a=t[6]-t[0],h=t[7]-t[1],p=Math.sqrt(a*a+h*h);p>0&&(l+=p,u.push({offset:l,curve:t,index:i,time:r}))}else{var f=I.subdivide(t,.5),d=(s+r)/2;o(f[0],i,s,d),o(f[1],i,d,r)}}for(var a,h=[],u=[],l=0,c=1/(i||32),p=t._segments,f=p[0],d=1,_=p.length;d<_;d++)a=p[d],r(f,a),f=a;t._closed&&r(a||f,p[0]),this.curves=h,this.parts=u,this.length=l,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,s=this.index;e=s,s&&!(i[--s].offset<t););for(;e<n;e++){var r=i[e];if(r.offset>=t){this.index=e;var o=i[e-1],a=o&&o.index===r.index?o.time:0,h=o?o.offset:0;return{index:r.index,time:a+(r.time-a)*(t-h)/(r.offset-h)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){for(var n=this._get(e),s=this._get(i),r=n.index,o=s.index;r<=o;r++){var a=I.getPart(this.curves[r],r===n.index?n.time:0,r===s.index?s.time:1);r===n.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},o.each(I._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return I[t](this.curves[i.index],i.time)}},{})),B=o.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,s=t._closed,r=0,o=n.length;r<o;r++){var a=n[r].point;e&&e.equals(a)||i.push(e=a.clone())}s&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=s},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new E(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,s,r){var o=this.points;if(n-i==1){var a=o[i],h=o[n],u=a.getDistance(h)/3;return void this.addCurve(t,[a,a.add(s.normalize(u)),h.add(r.normalize(u)),h])}for(var l,c=this.chordLengthParameterize(i,n),p=Math.max(e,e*e),f=!0,d=0;d<=4;d++){var _=this.generateBezier(i,n,c,s,r),g=this.findMaxError(i,n,_,c);if(g.error<e&&f)return void this.addCurve(t,_);if(l=g.index,g.error>=p)break;f=this.reparameterize(i,n,c,_),p=g.error}var y=o[l-1].subtract(o[l+1]);this.fitCubic(t,e,i,l,s,y),this.fitCubic(t,e,l,n,y.negate(),r)},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new E(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,s){for(var r=Math.abs,o=this.points,a=o[t],h=o[e],u=[[0,0],[0,0]],l=[0,0],c=0,p=e-t+1;c<p;c++){var f=i[c],d=1-f,_=3*f*d,g=d*d*d,y=_*d,v=_*f,m=f*f*f,b=n.normalize(y),x=s.normalize(v),w=o[t+c].subtract(a.multiply(g+y)).subtract(h.multiply(v+m));u[0][0]+=b.dot(b),u[0][1]+=b.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),l[0]+=b.dot(w),l[1]+=x.dot(w)}var S,T,k=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(r(k)>1e-12){var C=u[0][0]*l[1]-u[1][0]*l[0];S=(l[0]*u[1][1]-l[1]*u[0][1])/k,T=C/k}else{var A=u[0][0]+u[0][1],P=u[1][0]+u[1][1];S=T=r(A)>1e-12?l[0]/A:r(P)>1e-12?l[1]/P:0}var O,E,M=h.getDistance(a),I=1e-12*M;if(S<I||T<I)S=T=M/3;else{var F=h.subtract(a);O=n.normalize(S),E=s.normalize(T),O.dot(F)-E.dot(F)>M*M&&(S=T=M/3,O=E=null)}return[a,a.add(O||n.normalize(S)),h.add(E||s.normalize(T)),h]},reparameterize:function(t,e,i,n){for(var s=t;s<=e;s++)i[s-t]=this.findRoot(n,this.points[s],i[s-t]);for(var s=1,r=i.length;s<r;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(t,e,i){for(var n=[],s=[],r=0;r<=2;r++)n[r]=t[r+1].subtract(t[r]).multiply(3);for(var r=0;r<=1;r++)s[r]=n[r+1].subtract(n[r]).multiply(2);var o=this.evaluate(3,t,i),a=this.evaluate(2,n,i),h=this.evaluate(1,s,i),u=o.subtract(e),l=a.dot(a)+u.dot(h);return c.isZero(l)?i:i-u.dot(a)/l},evaluate:function(t,e,i){for(var n=e.slice(),s=1;s<=t;s++)for(var r=0;r<=t-s;r++)n[r]=n[r].multiply(1-i).add(n[r+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;n<=e;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,s=e-t;n<=s;n++)i[n]/=i[s];return i},findMaxError:function(t,e,i,n){for(var s=Math.floor((e-t+1)/2),r=0,o=t+1;o<e;o++){var a=this.evaluate(3,i,n[o-t]),h=a.subtract(this.points[o]),u=h.x*h.x+h.y*h.y;u>=r&&(r=u,s=o)}return{error:r,index:s}}}),j=w.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&o.isPlainObject(t)&&t.x===n&&t.y===n;this._initialize(e&&t,!e&&f.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),V=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new d(t.x,t.y,this,"setPoint")},setPoint:function(){var t=f.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,s=this._style,r=s.hasFill(),o=s.hasStroke(),a=s.getLeading(),h=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var u=0,l=n.length;u<l;u++){t.shadowColor=h;var c=n[u];r&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var i=this._style,n=this._lines,s=n.length,r=i.getJustification(),o=i.getLeading(),a=this.getView().getTextWidth(i.getFontStyle(),n),h=0;"left"!==r&&(h-=a/("center"===r?2:1));var u=new y(h,s?-.75*o:0,a,s*o);return t?t._transformBounds(u,u):u}}),D=o.extend(new function(){function t(t){var i,n=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),o="rgb";if(n){var a=n[4]?4:3;i=new Array(a);for(var h=0;h<a;h++){var u=n[h+1];i[h]=parseInt(1==u.length?u+u:u,16)/255}}else if(n=t.match(/^(rgb|hsl)a?\((.*)\)$/)){o=n[1],i=n[2].split(/[,\s]+/g);for(var l="hsl"===o,h=0,c=Math.min(i.length,4);h<c;h++){var p=i[h],u=parseFloat(p);if(l)if(0===h){var f=p.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else h<3&&(u/=100);else h<3&&(u/=255);i[h]=u}}else{var d=r[t];if(!d)if(s){e||(e=nt.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var _=e.getImageData(0,0,1,1).data;d=r[t]=[_[0]/255,_[1]/255,_[2]/255]}else d=[0,0,0];i=d.slice()}return[o,i]}var e,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s;return[0===r?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){t=(t/60%6+6)%6;var n=Math.floor(t),s=t-n,n=a[n],r=[i,i*(1-e),i*(1-e*s),i*(1-e*(1-s))];return[r[n[0]],r[n[1]],r[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,o=0===r,a=o?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),h=(n+s)/2;return[a,o?0:h<.5?r/(n+s):r/(2-n-s),h]},"hsl-rgb":function(t,e,i){if(t=(t/360%1+1)%1,0===e)return[i,i,i];for(var n=[t+1/3,t,t-1/3],s=i<.5?i*(1+e):i+e-i*e,r=2*i-s,o=[],a=0;a<3;a++){var h=n[a];h<0&&(h+=1),h>1&&(h-=1),o[a]=6*h<1?r+6*(s-r)*h:2*h<1?s:3*h<2?r+(s-r)*(2/3-h)*6:r}return o},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(i,function(t,e){n[e]=[],o.each(t,function(t,s){var r=o.capitalize(t),a=/^(hue|saturation)$/.test(t),h=n[e][s]="gradient"===e?"gradient"===t?function(t){var e=this._components[0];return t=z.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return f.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+r]=function(){return this._type===e||a&&/^hs[bl]$/.test(this._type)?this._components[s]:this._convert(e)[s]},this["set"+r]=function(t){this._type===e||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=i[e],this._type=e),this._components[s]=h.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(s){var r,a,h,u,l=arguments,c=this.__read,p=0;Array.isArray(s)&&(l=s,s=l[0]);var f=null!=s&&typeof s;if("string"===f&&s in i&&(r=s,s=l[1],Array.isArray(s)?(a=s,h=l[2]):(c&&(p=1),l=o.slice(l,1),f=typeof s)),!a){if(u="number"===f?l:"object"===f&&null!=s.length?s:null){r||(r=u.length>=3?"rgb":"gray");var d=i[r].length;h=u[d],c&&(p+=u===arguments?d+(null!=h?1:0):1),u.length>d&&(u=o.slice(u,0,d))}else if("string"===f){var _=t(s);r=_[0],a=_[1],4===a.length&&(h=a[3],a.length--)}else if("object"===f)if(s.constructor===e){if(r=s._type,a=s._components.slice(),h=s._alpha,"gradient"===r)for(var g=1,y=a.length;g<y;g++){var v=a[g];v&&(a[g]=v.clone())}}else if(s.constructor===z)r="gradient",u=l;else{r="hue"in s?"lightness"in s?"hsl":"hsb":"gradient"in s||"stops"in s||"radial"in s?"gradient":"gray"in s?"gray":"rgb";var m=i[r],b=n[r];this._components=a=[];for(var g=0,y=m.length;g<y;g++){var x=s[m[g]];null==x&&!g&&"gradient"===r&&"stops"in s&&(x={stops:s.stops,radial:s.radial}),x=b[g].call(this,x),null!=x&&(a[g]=x)}h=s.alpha}c&&r&&(p=1)}
if(this._type=r||"rgb",!a){this._components=a=[];for(var b=n[this._type],g=0,y=b.length;g<y;g++){var x=b[g].call(this,u&&u[g]);null!=x&&(a[g]=x)}}return this._components=a,this._properties=i[this._type],this._alpha=h,c&&(this.__read=p),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(129)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new D(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=o.isPlainValue(t,!0)?D.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&o.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=l.instance,s=0,r=t.length;s<r;s++){var o=this._components[s];null!=o&&e.push(t[s]+": "+(i?o:n.number(o)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return i=[e(i[0]),e(i[1]),e(i[2])],n<1&&i.push(n<0?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,n=this._components,s=n[0],r=s._stops,o=n[1],a=n[2],h=n[3],u=e&&e.inverted();if(u&&(o=u._transformPoint(o),a=u._transformPoint(a),h&&(h=u._transformPoint(h))),s._radial){var l=a.getDistance(o);if(h){var c=h.subtract(o);c.getLength()>l&&(h=o.add(c.normalize(l-.1)))}var p=h||o;i=t.createRadialGradient(p.x,p.y,0,o.x,o.y,l)}else i=t.createLinearGradient(o.x,o.y,a.x,a.y);for(var f=0,d=r.length;f<d;f++){var _=r[f],g=_._offset;i.addColorStop(null==g?f/(d-1):g,_._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,n=e.length;i<n;i++){var s=e[i];t._transformPoint(s,s,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new D(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return o.each(t,function(t,e){this[e]=function(e){e=D.read(arguments);for(var i=this._type,n=this._components,s=e._convert(i),r=0,o=n.length;r<o;r++)s[r]=t(n[r],s[r]);return new D(i,s,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),z=o.extend({_class:"Gradient",initialize:function(t,e){this._id=p.get(),t&&o.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return o.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=n))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new z(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,s=e.length;i<s;i++)e[i]._owner=n;e=this._stops=U.readList(t,0,{clone:!0});for(var i=0,s=e.length;i<s;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var s=0;s<n;s++)if(!e[s].equals(i[s]))return!1;return!0}}return!1}}),U=o.extend({_class:"GradientStop",initialize:function(t,e){var i=t,s=e;"object"==typeof t&&e===n&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,s=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(s)},clone:function(){return new U(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,n=this._offset;return o.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=D.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),G=o.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new f,selectedColor:null},e=o.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=o.set({},e,{fillColor:new D}),s={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_class:"Style",beans:!0,initialize:function(n,s,r){this._values={},this._owner=s,this._project=s&&s._project||r||at.project,this._defaults=!s||s instanceof S?e:s instanceof j?i:t,n&&this.set(n)}};return o.each(e,function(t,e){var i=/Color$/.test(e),h="shadowOffset"===e,u=o.capitalize(e),l=s[e],c="set"+u,p="get"+u;a[c]=function(t){var s=this._owner,r=s&&s._children,o=r&&r.length>0&&!(s instanceof L);if(o)for(var a=0,h=r.length;a<h;a++)r[a]._style[c](t);if(("selectedColor"===e||!o)&&e in this._defaults){var u=this._values[e];u!==t&&(i&&(u&&u._owner!==n&&(u._owner=n,u._canvasStyle=null),t&&t.constructor===D&&(t._owner&&(t=t.clone()),t._owner=s)),this._values[e]=t,s&&s._changed(l||129))}},a[p]=function(t){var s,r=this._owner,a=r&&r._children;if(e in this._defaults&&(!a||!a.length||t||r instanceof L)){var s=this._values[e];if(s===n)(s=this._defaults[e])&&s.clone&&(s=s.clone());else{var u=i?D:h?f:null;!u||s&&s.constructor===u||(this._values[e]=s=u.read([s],0,{readNull:!0,clone:!0}),s&&i&&(s._owner=r))}}else if(a)for(var l=0,c=a.length;l<c;l++){var d=a[l]._style[p]();if(l){if(!o.equals(s,d))return n}else s=d}return s},r[p]=function(t){return this._style[p](t)},r[c]=function(t){this._style[c](t)}}),o.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var i="get"+e,n="set"+e;a[i]=r[i]="#get"+t,a[n]=r[n]="#set"+t}),w.inject(r),a},{set:function(t){var e=t instanceof G,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var s=i[n];this[n]=s&&e&&s.clone?s.clone():s}},equals:function(t){function e(t,e,i){var s=t._values,r=e._values,a=e._defaults;for(var h in s){var u=s[h],l=r[h];if(!(i&&h in r||o.equals(u,l===n?a[h]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),null!=e?e:1.2*i}}),W=new function(){function t(t,e,i,n){for(var s=["","webkit","moz","Moz","ms","o"],r=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=s[o],h=a?a+r:e;if(h in t){if(!i)return t[h];t[h]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,s=n.body,r=n.documentElement;try{i=t.getBoundingClientRect()}catch(t){i={left:0,top:0,width:0,height:0}}var o=i.left-(r.clientLeft||s.clientLeft||0),a=i.top-(r.clientTop||s.clientTop||0);if(!e){var h=n.defaultView;o+=h.pageXOffset||r.scrollLeft||s.scrollLeft,a+=h.pageYOffset||r.scrollTop||s.scrollTop}return new y(o,a,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new y(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return W.getBounds(t,e).getPoint()},getSize:function(t){return W.getBounds(t,!0).getSize()},isInvisible:function(t){return W.getSize(t).equals(new _(0,0))},isInView:function(t){return!W.isInvisible(t)&&W.getViewportBounds(t).intersects(W.getBounds(t,!0))},isInserted:function(t){return r.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var s in i)t(e,s,!0,i[s]);else t(e,i,!0,n)}}},H={add:function(t,e){if(t)for(var i in e)for(var n=e[i],s=i.split(/[\s,]+/g),o=0,a=s.length;o<a;o++){var h=s[o],u=t===r&&("touchstart"===h||"touchmove"===h)&&{passive:!1};t.addEventListener(h,n,u)}},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],s=i.split(/[\s,]+/g),r=0,o=s.length;r<o;r++)t.removeEventListener(s[r],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new f(e.pageX||e.clientX+r.documentElement.scrollLeft,e.pageY||e.clientY+r.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return H.getPoint(t).subtract(W.getOffset(e||H.getTarget(t)))}};H.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var s=0,o=e.length;s<o;s++)e[s]();(n=i&&r.length)&&i(t)}var e,i=W.getPrefixed(s,"requestAnimationFrame"),n=!1,r=[];return function(s){r.push(s),i?n||(i(t),n=!0):e||(e=setInterval(t,1e3/60))}};var Q=o.extend(a,{_class:"View",initialize:function t(e,i){function n(t){return i[t]||parseInt(i.getAttribute(t),10)}function o(){var t=W.getSize(i);return t.isNaN()||t.isZero()?new _(n("width"),n("height")):t}var a;if(s&&i){this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+t._id++),H.add(i,this._viewEvents);if(W.setPrefixed(i.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),h.hasAttribute(i,"resize")){var u=this;H.add(s,this._windowEvents={resize:function(){u.setViewSize(o())}})}if(a=o(),h.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,c=l.style,p=W.getOffset(i);c.position="absolute",c.left=p.x+"px",c.top=p.y+"px",r.body.appendChild(l)}}else a=new _(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new m)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!at.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Q._focused===this&&(Q._focused=null),Q._views.splice(Q._views.indexOf(this),1),delete Q._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),H.remove(this._element,this._viewEvents),H.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:o.each(w._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;H.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;W.getPrefixed(r,"hidden")&&"true"!==h.getAttribute(e,"keepalive")||!W.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){at=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new o({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new o(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new g(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=_.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new y(new f,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return W.isInView(this._element)},isInserted:function(){return W.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var n=i.parentNode,s=r.createElement("div");s.style.fontSize=t,n.appendChild(s),e=parseFloat(W.getStyles(s).fontSize),n.removeChild(s)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},o.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?o:f).read(arguments),n=f.read(arguments,0,{readNull:!0});return this.transform((new m)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new m;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=f.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new m).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new d(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=f.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(f.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(f.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(f.read(arguments))},getEventPoint:function(t){return this.viewToProject(H.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return r&&"string"==typeof e&&(e=r.getElementById(e)),new(s?Z:Q)(t,e)}}},new function(){function t(t){var e=H.getTarget(t);return e.getAttribute&&Q._viewsById[e.getAttribute("id")]}function e(){var t=Q._focused;if(!t||!t.isVisible())for(var e=0,i=Q._views.length;e<i;e++)if((t=Q._views[e]).isVisible()){Q._focused=h=t;break}}function i(t,e,i){t._handleMouseEvent("mousemove",e,i)}function n(t,e,i,n,s,r,o){function a(t,i){if(t.responds(i)){if(h||(h=new J(i,n,s,e||t,r?s.subtract(r):null)),t.emit(i,h)&&(C=!0,h.prevented&&(A=!0),h.stopped))return u=!0}else{var o=P[i];if(o)return a(t,o)}}for(var h,u=!1;t&&t!==o&&!a(t,i);)t=t._parent;return u}function o(t,e,i,s,r,o){return t._project.removeOn(i),A=C=!1,w&&n(w,null,i,s,r,o)||e&&e!==w&&!e.isDescendant(w)&&n(e,null,"mousedrag"===i?"mousemove":i,s,r,o,w)||n(t,w||e||t,i,s,r,o)}if(s){var a,h,u,l,c,p=!1,f=!1,d=s.navigator;d.pointerEnabled||d.msPointerEnabled?(u="pointerdown MSPointerDown",l="pointermove MSPointerMove",c="pointerup pointercancel MSPointerUp MSPointerCancel"):(u="touchstart",l="touchmove",c="touchend touchcancel","ontouchstart"in s&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(u+=" mousedown",l+=" mousemove",c+=" mouseup"));var _={},g={mouseout:function(t){var e=Q._focused,n=H.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var s=H.getOffset(t,e._element),r=s.x,o=Math.abs,a=o(r),h=a-(1<<25);s.x=o(h)<a?h*(r<0?-1:1):r,i(e,t,e.viewToProject(s))}},scroll:e};_[u]=function(e){var i=Q._focused=t(e);p||(p=!0,i._handleMouseEvent("mousedown",e))},g[l]=function(n){var s=Q._focused;if(!f){var r=t(n);r?s!==r&&(s&&i(s,n),a||(a=s),s=Q._focused=h=r):h&&h===s&&(a&&!a.isInserted()&&(a=null),s=Q._focused=a,a=null,e())}s&&i(s,n)},g[u]=function(){f=!0},g[c]=function(t){var e=Q._focused;e&&p&&e._handleMouseEvent("mouseup",t),f=p=!1},H.add(r,g),H.add(s,{load:e});var y,v,m,b,x,w,S,T,k,C=!1,A=!1,P={doubleclick:"click",mousedrag:"mousemove"},O=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:_,_handleMouseEvent:function(t,e,i){function s(t){return r.virtual[t]||l.responds(t)||u&&u.responds(t)}var r=this._itemEvents,a=r.native[t],h="mousemove"===t,u=this._scope.tool,l=this;h&&p&&s("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var c=this.getBounds().contains(i),f=a&&c&&l._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),d=f&&f.item||null,_=!1,g={};if(g[t.substr(5)]=!0,a&&d!==x&&(x&&n(x,null,"mouseleave",e,i),d&&n(d,null,"mouseenter",e,i),x=d),O^c&&(n(this,null,c?"mouseenter":"mouseleave",e,i),y=c?this:null,_=!0),!c&&!g.drag||i.equals(m)||(o(this,d,h?t:"mousemove",e,i,m),_=!0),O=c,g.down&&c||g.up&&v){if(o(this,d,t,e,i,v),g.down){if(k=d===S&&Date.now()-T<300,b=S=d,!A&&d){for(var P=d;P&&!P.responds("mousedrag");)P=P._parent;P&&(w=d)}v=i}else g.up&&(A||d!==b||(T=Date.now(),o(this,d,k?"doubleclick":"click",e,i,v),k=!1),b=w=null);O=!1,_=!0}m=i,_&&u&&(C=u._handleMouseEvent(t,e,i,g)||C),!1!==e.cancelable&&(C&&!g.move||g.down&&s("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){function s(s){s.responds(t)&&(at=o,s.emit(t,r=r||new $(t,e,i,n)))}var r,o=this._scope,a=o.tool;this.isVisible()&&(s(this),a&&a.responds(t)&&s(a))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i.native,s=i.virtual;for(var r in E)n[r]=(n[r]||0)+(E[r][t]||0)*e;s[t]=(s[t]||0)+e},statics:{updateFocus:e,_resetState:function(){p=f=C=O=!1,a=h=y=v=m=b=x=w=S=T=k=null}}}}}),Z=Q.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof s.HTMLCanvasElement)){var i=_.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+o.slice(arguments,1));e=nt.getCanvas(i)}var n=this._context=e.getContext("2d");if(n.save(),this._pixelRatio=1,!/^off|false$/.test(h.getAttribute(e,"hidpi"))){var r=s.devicePixelRatio||1,a=W.getPrefixed(n,"backingStorePixelRatio")||1;this._pixelRatio=r/a}Q.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var n=this._pixelRatio;if(t.base.call(this,e*n,i*n),1!==n){var s=this._element,r=this._context;if(!h.hasAttribute(s,"resize")){var o=s.style;o.width=e+"px",o.height=i+"px"}r.restore(),r.save(),r.scale(n,n)}},getPixelSize:function t(e){var i,n=at.agent;if(n&&n.firefox)i=t.base.call(this,e);else{var s=this._context,r=s.font;s.font=e+" serif",i=parseFloat(s.font),s.font=r}return i},getTextWidth:function(t,e){var i=this._context,n=i.font,s=0;i.font=t;for(var r=0,o=e.length;r<o;r++)s=Math.max(s,i.measureText(e[r]).width);return i.font=n,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),X=o.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Y.modifiers}}),$=X.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Y=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===n?String.fromCharCode(t.keyCode):e,h[e]||(e.length>1?o.hyphenate(e):e.toLowerCase())}function e(t,n,s,r){var a,h=Q._focused;if(l[n]=t,t?c[n]=s:delete c[n],n.length>1&&(a=o.camelize(n))in p){p[a]=t;var u=at&&at.agent;if("meta"===a&&u&&u.mac)if(t)i={};else{for(var f in i)f in c&&e(!1,f,i[f],r);i=null}}else t&&i&&(i[n]=s);h&&h._handleKeyEvent(t?"keydown":"keyup",r,n,s)}var i,a,h={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},u={tab:"\t",space:" ",enter:"\r"},l={},c={},p=new o({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=at&&at.agent;return t&&t.mac?this.meta:this.control}}});return H.add(r,{keydown:function(i){var n=t(i),s=at&&at.agent;n.length>1||s&&s.chrome&&(i.altKey||s.mac&&i.metaKey||!s.mac&&i.ctrlKey)?e(!0,n,u[n]||(n.length>1?"":n),i):a=n},keypress:function(i){if(a){var n=t(i),s=i.charCode,r=s>=32?String.fromCharCode(s):n.length>1?"":n;n!==a&&(n=r.toLowerCase()),e(!0,n,r,i),a=null}},keyup:function(i){var n=t(i);n in c&&e(!1,n,c[n],i)}}),H.add(s,{blur:function(t){for(var i in c)e(!1,i,c[i],t)}}),{modifiers:p,isDown:function(t){return!!l[t]}}},J=X.extend({_class:"MouseEvent",initialize:function(t,e,i,n,s){this.type=t,this.event=e,this.point=i,this.target=n,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),K=X.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),tt=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,n){function s(t,e){var s=i,r=o?c._point:c._downPoint||s;if(o){if(c._moveCount>=0&&s.equals(r))return!1;if(r&&(null!=t||null!=e)){var a=s.subtract(r),h=a.getLength();if(h<(t||0))return!1;e&&(s=r.add(a.normalize(Math.min(h,e))))}c._moveCount++}return c._point=s,c._lastPoint=r||s,n.down&&(c._moveCount=-1,c._downPoint=s,c._downCount++),!0}function r(){a&&(l=c.emit(t,new K(c,t,e))||l)}at=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var o=n.move||n.drag,a=this.responds(t),h=this.minDistance,u=this.maxDistance,l=!1,c=this;if(n.down)s(),r();else if(n.up)s(null,u),r();else if(a)for(;s(h,u);)r();return l}}),et=o.extend(a,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,i,n,s,r,o){this.object=e;var a=typeof r,h="function"===a;this.type=h?a:"string"===a?r:"linear",this.easing=h?r:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var u=i||n;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(i),this._to=u&&this._getState(n),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),i=this._keys,n=function(i){return"function"==typeof i?i(e,t):i},s=0,r=i&&i.length;s<r;s++){var a=i[s],h=n(this._from[a]),u=n(this._to[a]),l=h&&u&&h.__add&&u.__add?u.__subtract(h).__multiply(e).__add(h):(u-h)*e+h;this._setProperty(this._parsedKeys[a],l)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new o({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,i=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(i)},_getState:function(t){for(var e=this._keys,i={},n=0,s=e.length;n<s;n++){var r,o=e[n],a=this._parsedKeys[o],h=this._getProperty(a);if(t){var u=this._resolveValue(h,t[o]);this._setProperty(a,u),r=this._getProperty(a),r=r&&r.clone?r.clone():r,this._setProperty(a,h)}else r=h&&h.clone?h.clone():h;i[o]=r}return i},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var i=e[0];return i&&i.match&&i.match(/^[+\-*\/]=/)?this._calculate(t,i[0],e[1]):e}if("string"==typeof e){var n=e.match(/^[+\-*\/]=(.*)/);if(n){var s=JSON.parse(n[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],s)}}}return e},_calculate:function(t,e,i){return at.PaperScript.calculateBinary(t,e,i)},_parseKeys:function(t){for(var e={},i=0,n=t.length;i<n;i++){var s=t[i],r=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=r.split("/")}return e},_getProperty:function(t,e){for(var i=this.object,n=0,s=t.length-(e||0);n<s&&i;n++)i=i[t[n]];return i},_setProperty:function(t,e){var i=this._getProperty(t,1);i&&(i[t[t.length-1]]=e)}}),it={request:function(t){var e=new i.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,o.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var i=e.status;0===i||200===i?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var i=e.status,n='Could not load "'+t.url+'" (Status: '+i+")";if(!t.onError)throw new Error(n);t.onError(n,i)},e.send(null)}},nt={canvases:[],getCanvas:function(t,e){if(!s)return null;var i,n=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=r.createElement("canvas"),n=!1);var o=i.getContext("2d");if(!o)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===t&&i.height===e?n&&o.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),o.save(),i},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},st=new function(){function t(t,e,i){return.2989*t+.587*e+.114*i}function e(e,i,n,s){var r=s-t(e,i,n);f=e+r,d=i+r,_=n+r;var s=t(f,d,_),o=g(f,d,_),a=y(f,d,_);if(o<0){var h=s-o;f=s+(f-s)*s/h,d=s+(d-s)*s/h,_=s+(_-s)*s/h}if(a>255){var u=255-s,l=a-s;f=s+(f-s)*u/l,d=s+(d-s)*u/l,_=s+(_-s)*u/l}}function i(t,e,i){return y(t,e,i)-g(t,e,i)}function n(t,e,i,n){var s,r=[t,e,i],o=y(t,e,i),a=g(t,e,i);a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2,s=0===g(a,o)?1===y(a,o)?2:1:0,r[o]>r[a]?(r[s]=(r[s]-r[a])*n/(r[o]-r[a]),r[o]=n):r[s]=r[o]=0,r[a]=0,f=r[0],d=r[1],_=r[2]}var s,r,a,h,u,l,c,p,f,d,_,g=Math.min,y=Math.max,v=Math.abs,m={multiply:function(){f=u*s/255,d=l*r/255,_=c*a/255},screen:function(){f=u+s-u*s/255,d=l+r-l*r/255,_=c+a-c*a/255},overlay:function(){f=u<128?2*u*s/255:255-2*(255-u)*(255-s)/255,d=l<128?2*l*r/255:255-2*(255-l)*(255-r)/255,_=c<128?2*c*a/255:255-2*(255-c)*(255-a)/255},
"soft-light":function(){var t=s*u/255;f=t+u*(255-(255-u)*(255-s)/255-t)/255,t=r*l/255,d=t+l*(255-(255-l)*(255-r)/255-t)/255,t=a*c/255,_=t+c*(255-(255-c)*(255-a)/255-t)/255},"hard-light":function(){f=s<128?2*s*u/255:255-2*(255-s)*(255-u)/255,d=r<128?2*r*l/255:255-2*(255-r)*(255-l)/255,_=a<128?2*a*c/255:255-2*(255-a)*(255-c)/255},"color-dodge":function(){f=0===u?0:255===s?255:g(255,255*u/(255-s)),d=0===l?0:255===r?255:g(255,255*l/(255-r)),_=0===c?0:255===a?255:g(255,255*c/(255-a))},"color-burn":function(){f=255===u?255:0===s?0:y(0,255-255*(255-u)/s),d=255===l?255:0===r?0:y(0,255-255*(255-l)/r),_=255===c?255:0===a?0:y(0,255-255*(255-c)/a)},darken:function(){f=u<s?u:s,d=l<r?l:r,_=c<a?c:a},lighten:function(){f=u>s?u:s,d=l>r?l:r,_=c>a?c:a},difference:function(){f=u-s,f<0&&(f=-f),d=l-r,d<0&&(d=-d),(_=c-a)<0&&(_=-_)},exclusion:function(){f=u+s*(255-u-u)/255,d=l+r*(255-l-l)/255,_=c+a*(255-c-c)/255},hue:function(){n(s,r,a,i(u,l,c)),e(f,d,_,t(u,l,c))},saturation:function(){n(u,l,c,i(s,r,a)),e(f,d,_,t(u,l,c))},luminosity:function(){e(u,l,c,t(s,r,a))},color:function(){e(s,r,a,t(u,l,c))},add:function(){f=g(u+s,255),d=g(l+r,255),_=g(c+a,255)},subtract:function(){f=y(u-s,0),d=y(l-r,0),_=y(c-a,0)},average:function(){f=(u+s)/2,d=(l+r)/2,_=(c+a)/2},negation:function(){f=255-v(255-s-u),d=255-v(255-r-l),_=255-v(255-a-c)}},b=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),x=nt.getContext(1,1);x&&(o.each(m,function(t,e){var i="darken"===e,n=!1;x.save();try{x.fillStyle=i?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=i?"#a00":"#300",x.fillRect(0,0,1,1),n=x.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(t){}x.restore(),b[e]=n}),nt.release(x)),this.process=function(t,e,i,n,o){var g=e.canvas,y="normal"===t;if(y||b[t])i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,y||(i.globalCompositeOperation=t),i.drawImage(g,o.x,o.y),i.restore();else{var v=m[t];if(!v)return;for(var x=i.getImageData(o.x,o.y,g.width,g.height),w=x.data,S=e.getImageData(0,0,g.width,g.height).data,T=0,k=w.length;T<k;T+=4){s=S[T],u=w[T],r=S[T+1],l=w[T+1],a=S[T+2],c=w[T+2],h=S[T+3],p=w[T+3],v();var C=h*n/255,A=1-C;w[T]=C*f+A*u,w[T+1]=C*d+A*l,w[T+2]=C*_+A*c,w[T+3]=h*n+A*p}i.putImageData(x,o.x,o.y)}}},rt=new function(){function t(t,e,s){return i(r.createElementNS(n,t),e,s)}function e(t,e){var i=a[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n}function i(t,e,i){for(var n in e){var s=e[n],r=a[n];"number"==typeof s&&i&&(s=i.number(s)),r?t.setAttributeNS(r,n,s):t.setAttribute(n,s)}return t}var n="http://www.w3.org/2000/svg",s="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",a={href:o,xlink:s,xmlns:s+"/","xmlns:xlink":s+"/"};return{svg:n,xmlns:s,xlink:o,create:t,get:e,set:i}},ot=o.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof N||t instanceof k||t instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=o.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&o.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});new function(){function t(t,e,i){var n=new o,s=t.getTranslation();if(e){t=t._shiftless();var r=t._inverseTransform(s);n[i?"cx":"x"]=r.x,n[i?"cy":"y"]=r.y,s=null}if(!t.isIdentity()){var a=t.decompose();if(a){var h=[],u=a.rotation,l=a.scaling,p=a.skewing;s&&!s.isZero()&&h.push("translate("+T.point(s)+")"),u&&h.push("rotate("+T.number(u)+")"),c.isZero(l.x-1)&&c.isZero(l.y-1)||h.push("scale("+T.point(l)+")"),p.x&&h.push("skewX("+T.number(p.x)+")"),p.y&&h.push("skewY("+T.number(p.y)+")"),n.transform=h.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function e(e,i){for(var n=t(e._matrix),s=e._children,r=rt.create("g",n,T),o=0,a=s.length;o<a;o++){var h=s[o],u=b(h,i);if(u)if(h.isClipMask()){var l=rt.create("clipPath");l.appendChild(u),g(h,l,"clip"),rt.set(r,{"clip-path":"url(#"+l.id+")"})}else r.appendChild(u)}return r}function n(e,i){var n=t(e._matrix,!0),s=e.getSize(),r=e.getImage();return n.x-=s.width/2,n.y-=s.height/2,n.width=s.width,n.height=s.height,n.href=0==i.embedImages&&r&&r.src||e.toDataURL(),rt.create("image",n,T)}function s(e,i){var n=i.matchShapes;if(n){var s=e.toShape(!1);if(s)return r(s)}var o,a=e._segments,h=a.length,u=t(e._matrix);if(n&&h>=2&&!e.hasHandles())if(h>2){o=e._closed?"polygon":"polyline";for(var l=[],c=0;c<h;c++)l.push(T.point(a[c]._point));u.points=l.join(" ")}else{o="line";var p=a[0]._point,f=a[1]._point;u.set({x1:p.x,y1:p.y,x2:f.x,y2:f.y})}else o="path",u.d=e.getPathData(null,i.precision);return rt.create(o,u,T)}function r(e){var i=e._type,n=e._radius,s=t(e._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var r=e._size,o=r.width,a=r.height;s.x-=o/2,s.y-=a/2,s.width=o,s.height=a,n.isZero()&&(n=null)}return n&&("circle"===i?s.r=n:(s.rx=n.width,s.ry=n.height)),rt.create(i,s,T)}function a(e,i){var n=t(e._matrix),s=e.getPathData(null,i.precision);return s&&(n.d=s),rt.create("path",n,T)}function h(e,i){var n=t(e._matrix,!0),s=e._definition,r=_(s,"symbol"),o=s._item,a=o.getBounds();return r||(r=rt.create("symbol",{viewBox:T.rectangle(a)}),r.appendChild(b(o,i)),g(s,r,"symbol")),n.href="#"+r.id,n.x+=a.x,n.y+=a.y,n.width=a.width,n.height=a.height,n.overflow="visible",rt.create("use",n,T)}function u(t){var e=_(t,"color");if(!e){var i,n=t.getGradient(),s=n._radial,r=t.getOrigin(),o=t.getDestination();if(s){i={cx:r.x,cy:r.y,r:r.getDistance(o)};var a=t.getHighlight();a&&(i.fx=a.x,i.fy=a.y)}else i={x1:r.x,y1:r.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",e=rt.create((s?"radial":"linear")+"Gradient",i,T);for(var h=n._stops,u=0,l=h.length;u<l;u++){var c=h[u],p=c._color,f=p.getAlpha(),d=c._offset;i={offset:null==d?u/(l-1):d},p&&(i["stop-color"]=p.toCSS(!0)),f<1&&(i["stop-opacity"]=f),e.appendChild(rt.create("stop",i,T))}g(t,e,"color")}return"url(#"+e.id+")"}function f(e){var i=rt.create("text",t(e._matrix,!0),T);return i.textContent=e._content,i}function d(t,e,i){var n={},s=!i&&t.getParent(),r=[];return null!=t._name&&(n.id=t._name),o.each(ot,function(e){var i=e.get,a=e.type,h=t[i]();if(e.exportFilter?e.exportFilter(t,h):!s||!o.equals(s[i](),h)){if("color"===a&&null!=h){var l=h.getAlpha();l<1&&(n[e.attribute+"-opacity"]=l)}"style"===a?r.push(e.attribute+": "+h):n[e.attribute]=null==h?"none":"color"===a?h.gradient?u(h,t):h.toCSS(!0):"array"===a?h.join(","):"lookup"===a?e.toSVG[h]:h}}),r.length&&(n.style=r.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),rt.set(e,n,T)}function _(t,e){return k||(k={ids:{},svgs:{}}),t&&k.svgs[e+"-"+(t._id||t.__id||(t.__id=p.get("svg")))]}function g(t,e,i){k||_();var n=k.ids[i]=(k.ids[i]||0)+1;e.id=i+"-"+n,k.svgs[i+"-"+(t._id||t.__id)]=e}function v(t,e){var n=t,s=null;if(k){n="svg"===t.nodeName.toLowerCase()&&t;for(var r in k.svgs)s||(n||(n=rt.create("svg"),n.appendChild(t)),s=n.insertBefore(rt.create("defs"),n.firstChild)),s.appendChild(k.svgs[r]);k=null}return e.asString?(new i.XMLSerializer).serializeToString(n):n}function b(t,e,i){var n=C[t._class],s=n&&n(t,e);if(s){var r=e.onExport;r&&(s=r(t,s,e)||s);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&s.setAttribute("data-paper-data",o)}return s&&d(t,s,i)}function S(t){return t||(t={}),T=new l(t.precision),t}var T,k,C={Group:e,Layer:e,Raster:n,Path:s,Shape:r,CompoundPath:a,SymbolItem:h,PointText:f};w.inject({exportSVG:function(t){return t=S(t),v(b(this,t,!0),t)}}),x.inject({exportSVG:function(e){e=S(e);var i=this._children,n=this.getView(),s=o.pick(e.bounds,"view"),r=e.matrix||"view"===s&&n._matrix,a=r&&m.read([r]),h="view"===s?new y([0,0],n.getViewSize()):"content"===s?w._getBounds(i,a,{stroke:!0}).rect:y.read([s],0,{readNull:!0}),u={version:"1.1",xmlns:rt.svg,"xmlns:xlink":rt.xlink};h&&(u.width=h.width,u.height=h.height,(h.x||h.y)&&(u.viewBox=T.rectangle(h)));var l=rt.create("svg",u,T),c=l;a&&!a.isIdentity()&&(c=l.appendChild(rt.create("g",t(a),T)));for(var p=0,f=i.length;p<f;p++)c.appendChild(b(i[p],e,!0));return v(l,e)}})},new function(){function t(t,e,i,n,s){var r=rt.get(t,e),o=null==r?n?null:i?"":0:i?r:parseFloat(r);return/%\s*$/.test(r)?o/100*(s?1:E[/x|^width/.test(e)?"width":"height"]):o}function e(e,i,n,s,r){return i=t(e,i||"x",!1,s,r),n=t(e,n||"y",!1,s,r),!s||null!=i&&null!=n?new f(i,n):null}function a(e,i,n,s,r){return i=t(e,i||"width",!1,s,r),n=t(e,n||"height",!1,s,r),!s||null!=i&&null!=n?new _(i,n):null}function h(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?T(t)||t:"lookup"===e?i[t]:t}function u(t,e,i,n){var s=t.childNodes,r="clippath"===e,o="defs"===e,a=new S,h=a._project,u=h._currentStyle,l=[];if(r||o||(a=b(a,t,n),h._currentStyle=a._style.clone()),n)for(var c=t.querySelectorAll("defs"),p=0,f=c.length;p<f;p++)A(c[p],i,!1);for(var p=0,f=s.length;p<f;p++){var d,_=s[p];1!==_.nodeType||/^defs$/i.test(_.nodeName)||!(d=A(_,i,!1))||d instanceof P||l.push(d)}return a.addChildren(l),r&&(a=b(a.reduce(),t,n)),h._currentStyle=u,(r||o)&&(a.remove(),a=null),a}function l(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],s=0,r=i.length;s<r;s+=2)n.push(new f(parseFloat(i[s]),parseFloat(i[s+1])));var o=new R(n);return"polygon"===e&&o.closePath(),o}function c(t){return N.create(t.getAttribute("d"))}function p(i,n){var s,r=(t(i,"href",!0)||"").substring(1),o="radialgradient"===n;if(r)s=M[r].getGradient(),s._radial^o&&(s=s.clone(),s._radial=o);else{for(var a=i.childNodes,h=[],u=0,l=a.length;u<l;u++){var c=a[u];1===c.nodeType&&h.push(b(new U,c))}s=new z(h,o)}var p,f,d,_="userSpaceOnUse"!==t(i,"gradientUnits",!0);return o?(p=e(i,"cx","cy",!1,_),f=p.add(t(i,"r",!1,!1,_),0),d=e(i,"fx","fy",!0,_)):(p=e(i,"x1","y1",!1,_),f=e(i,"x2","y2",!1,_)),b(new D(s,p,f,d),i)._scaleToBounds=_,null}function d(t,e,i,n){if(t.transform){for(var s=(n.getAttribute(i)||"").split(/\)\s*/g),r=new m,o=0,a=s.length;o<a;o++){var h=s[o];if(!h)break;for(var u=h.split(/\(\s*/),l=u[0],c=u[1].split(/[\s,]+/g),p=0,f=c.length;p<f;p++)c[p]=parseFloat(c[p]);switch(l){case"matrix":r.append(new m(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":r.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":r.translate(c[0],c[1]||0);break;case"scale":r.scale(c);break;case"skewX":r.skew(c[0],0);break;case"skewY":r.skew(0,c[0])}}t.transform(r)}}function g(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",s=t[n]&&t[n]();s&&s.setAlpha(parseFloat(e))}function v(t,e,i){var s=t.attributes[e],r=s&&s.value;if(!r&&t.style){var a=o.camelize(e);r=t.style[a],r||i.node[a]===i.parent[a]||(r=i.node[a])}return r?"none"===r?null:r:n}function b(t,e,i){var s=e.parentNode,r={node:W.getStyles(e)||{},parent:!i&&!/^defs$/i.test(s.tagName)&&W.getStyles(s)||{}};return o.each(F,function(i,s){var o=v(e,s,r);t=o!==n&&i(t,o,s,e,r)||t}),t}function T(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],n=i&&M[s?i.replace(s.location.href.split("#")[0]+"#",""):i];return n&&n._scaleToBounds&&(n=n.clone(),n._scaleToBounds=!0),n}function A(t,e,i){var n,s,h,u=t.nodeName.toLowerCase(),l="#document"!==u,c=r.body;i&&l&&(E=at.getView().getSize(),E=a(t,null,null,!0)||E,n=rt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,h=t.nextSibling,n.appendChild(t),c.appendChild(n));var p=at.settings,f=p.applyMatrix,d=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var _=I[u],g=_&&_(t,u,e,i)||null;if(p.insertItems=d,p.applyMatrix=f,g){!l||g instanceof S||(g=b(g,t,i));var y=e.onImport,v=l&&t.getAttribute("data-paper-data");y&&(g=y(t,g,e)||g),e.expandShapes&&g instanceof k&&(g.remove(),g=g.toPath()),v&&(g._data=JSON.parse(v))}return n&&(c.removeChild(n),s&&(h?s.insertBefore(t,h):s.appendChild(t))),i&&(M={},g&&o.pick(e.applyMatrix,f)&&g.matrix.apply(!0,!0)),g}function O(t,e,s){function o(r){try{var o="object"==typeof r?r:(new i.DOMParser).parseFromString(r,"image/svg+xml");if(!o.nodeName)throw o=null,new Error("Unsupported SVG source: "+t);at=h,u=A(o,e,!0),e&&!1===e.insert||s._insertItem(n,u);var l=e.onLoad;l&&l(u,r)}catch(t){a(t)}}function a(t,i){var n=e.onError;if(!n)throw new Error(t);n(t,i)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var h=at,u=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var l=new FileReader;return l.onload=function(){o(l.result)},l.onerror=function(){a(l.error)},l.readAsText(t)}o(t)}else{var c=r.getElementById(t);c?o(c):it.request({url:t,async:!0,onLoad:o,onError:a})}return u}var E,M={},I={"#document":function(t,e,i,n){for(var s=t.childNodes,r=0,o=s.length;r<o;r++){var a=s[r];if(1===a.nodeType)return A(a,i,n)}},g:u,svg:u,clippath:u,polygon:l,polyline:l,path:c,lineargradient:p,radialgradient:p,image:function(i){var n=new C(t(i,"href",!0));return n.on("load",function(){var t=a(i);this.setSize(t);var n=e(i).add(t.divide(2));this._matrix.append((new m).translate(n))}),n},symbol:function(t,e,i,n){return new P(u(t,e,i,n),!0)},defs:u,use:function(i){var n=(t(i,"href",!0)||"").substring(1),s=M[n],r=e(i);return s?s instanceof P?s.place(r):s.clone().translate(r):null},circle:function(i){return new k.Circle(e(i,"cx","cy"),t(i,"r"))},ellipse:function(t){return new k.Ellipse({center:e(t,"cx","cy"),radius:a(t,"rx","ry")})},rect:function(t){return new k.Rectangle(new y(e(t),a(t)),a(t,"rx","ry"))},line:function(t){return new R.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var i=new V(e(t).add(e(t,"dx","dy")));return i.setContent(t.textContent.trim()||""),i}},F=o.set(o.each(ot,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](h(i,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var s=e.getBounds();n.transform((new m).translate(s.getPoint()).scale(s.getSize()))}}}},{}),{id:function(t,e){M[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=T(e);if(i){if(i=i.clone(),i.setClipMask(!0),!(t instanceof S))return new S(i,t);t.insertChild(0,i)}},gradientTransform:d,transform:d,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,n,s){var r,o,u=new y(h(e,"array")),l=a(n,null,null,!0);if(t instanceof S){var c=l?l.divide(u.getSize()):1,o=(new m).scale(c).translate(u.getPoint().negate());r=t}else t instanceof P&&(l&&u.setSize(l),r=t._item);if(r){if("visible"!==v(n,"overflow",s)){var p=new k.Rectangle(u);p.setClipMask(!0),r.addChild(p)}o&&r.transform(o)}}});w.inject({importSVG:function(t,e){return O(t,e,this)}}),x.inject({importSVG:function(t,e){return this.activate(),O(t,e,this)}})},o.exports.PaperScript=function(){function e(t,e){return(g.acorn||y).parse(t,e)}function n(t,e,i){var n=b[e];if(t&&t[n]){var s=t[n](i);return"!="===e?!s:s}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function a(t,e){var i=x[t];if(e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function u(t,n){function o(t){for(var e=0,i=p.length;e<i;e++){var n=p[e];if(n[0]>=t)break;t+=n[1]}return t}function a(e){return t.substring(o(e.range[0]),o(e.range[1]))}function h(e,i){return t.substring(o(e.range[1]),o(i.range[0]))}function u(e,i){for(var n=o(e.range[0]),s=o(e.range[1]),r=0,a=p.length-1;a>=0;a--)if(n>p[a][0]){r=a+1;break}p.splice(r,0,[n,i.length-s+n]),t=t.substring(0,n)+i+t.substring(s)}function l(t,e){if(t){for(var i in t)if("range"!==i&&"loc"!==i){var n=t[i];if(Array.isArray(n))for(var s=0,r=n.length;s<r;s++)l(n[s],t);else n&&"object"==typeof n&&l(n,t)}switch(t.type){case"UnaryExpression":if(t.operator in x&&"Literal"!==t.argument.type){var o=a(t.argument);u(t,'$__("'+t.operator+'", '+o+")")}break;case"BinaryExpression":if(t.operator in b&&"Literal"!==t.left.type){var c=a(t.left),p=a(t.right),f=h(t.left,t.right),d=t.operator;u(t,"__$__("+c+","+f.replace(new RegExp("\\"+d),'"'+d+'"')+", "+p+")")}break;case"UpdateExpression":case"AssignmentExpression":var _=e&&e.type;if(!("ForStatement"===_||"BinaryExpression"===_&&/^[=!<>]/.test(e.operator)||"MemberExpression"===_&&e.computed))if("UpdateExpression"===t.type){var o=a(t.argument),g="__$__("+o+', "'+t.operator[0]+'", 1)',y=o+" = "+g;t.prefix||"AssignmentExpression"!==_&&"VariableDeclarator"!==_||(a(e.left||e.id)===o&&(y=g),y=o+"; "+y),u(t,y)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var c=a(t.left),p=a(t.right),g=c+" = __$__("+c+', "'+t.operator[0]+'", '+p+")";u(t,/^\(.*\)$/.test(a(t))?"("+g+")":g)}break;case"ExportDefaultDeclaration":u({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var v=t.declaration,m=t.specifiers;if(v){var w=v.declarations;w&&(w.forEach(function(t){u(t,"module.exports."+a(t))}),u({range:[t.start,v.start+v.kind.length]},""))}else if(m){var S=m.map(function(t){var e=a(t);return"module.exports."+e+" = "+e+"; "}).join("");S&&u(t,S)}}}}if(!t)return"";n=n||{};var c,p=[],f=n.url||"",d=at.agent,_=d.versionNumber,g=!1,y=n.sourceMaps,v=n.source||t,m=/\r\n|\n|\r/gm,w=n.offset||0;if(y&&(d.chrome&&_>=30||d.webkit&&_>=537.76||d.firefox&&_>=23||d.node)){if(d.node)w-=2;else if(s&&f&&!s.location.href.indexOf(f)){var S=r.getElementsByTagName("html")[0].innerHTML;w=S.substr(0,S.indexOf(t)+1).match(m).length+1}g=w>0&&!(d.chrome&&_>=36||d.safari&&_>=600||d.firefox&&_>=40||d.node);var T=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var i=31&t;t>>=5,t&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[i]}return e}(g?0:w)+"A"];T.length=(t.match(m)||[]).length+1+(g?w:0),c={version:3,file:f,names:[],mappings:T.join(";AACA"),sourceRoot:"",sources:[f],sourcesContent:[v]}}return l(e(t,{ranges:!0,preserveParens:!0,sourceType:"module"})),c&&(g&&(t=new Array(w+1).join("\n")+t),/^(inline|both)$/.test(y)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+i.btoa(unescape(encodeURIComponent(JSON.stringify(c))))),t+="\n//# sourceURL="+(f||"paperscript")),{url:f,source:v,code:t,map:c}}function l(t,e,i){function s(e,i){for(var n in e)!i&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(t)||(_.push(n),g.push(e[n]))}at=e;var h,l=e.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new tt:null,p=c?c._events:[],d=["onFrame","onResize"].concat(p),_=[],g=[],y="object"==typeof t?t:u(t,i);t=y.code,s({__$__:n,$__:a,paper:e,view:l,tool:c},!0),s(e),t="var module = { exports: {} }; "+t;var v=o.each(d,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(_.push(e),this.push("module.exports."+e+" = "+e+";"))},[]).join("\n");v&&(t+="\n"+v),t+="\nreturn module.exports;";var m=at.agent;if(r&&(m.chrome||m.firefox&&m.versionNumber<40)){var b=r.createElement("script"),x=r.head||r.getElementsByTagName("head")[0];m.firefox&&(t="\n"+t),b.appendChild(r.createTextNode("document.__paperscript__ = function("+_+") {"+t+"\n}")),x.appendChild(b),h=r.__paperscript__,delete r.__paperscript__,x.removeChild(b)}else h=Function(_,t);var v=h&&h.apply(e,g),w=v||{};return o.each(p,function(t){var e=w[t];e&&(c[t]=e)}),l&&(w.onResize&&l.setOnResize(w.onResize),l.emit("resize",{size:l.size,delta:new f}),w.onFrame&&l.setOnFrame(w.onFrame),l.requestUpdate()),v}function c(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==h.getAttribute(t,"ignore")){var e=h.getAttribute(t,"canvas"),i=r.getElementById(e),n=t.src||t.getAttribute("data-src"),s=h.hasAttribute(t,"async");if(!i)throw new Error('Unable to find canvas with id "'+e+'"');var o=h.get(i.getAttribute("data-paper-scope"))||(new h).setup(i);return i.setAttribute("data-paper-scope",o._id),n?it.request({url:n,async:s,mimeType:"text/plain",onLoad:function(t){l(t,o,n)}}):l(t.innerHTML,o,t.baseURI),t.setAttribute("data-paper-ignore","true"),o}}function p(){o.each(r&&r.getElementsByTagName("script"),c)}function d(t){return t?c(t):p()}var g=this,y=g.acorn;if(!y&&void 0!==t)try{y=t("acorn")}catch(t){}if(!y){var v,m;y=v=m={},function(t,e){"object"==typeof v&&"object"==typeof m?e(v):"function"==typeof define&&define.amd?define(["exports"],e):e(t.acorn||(t.acorn={}))}(this,function(t){"use strict";function e(t){ct=t||{};for(var e in _t)Object.prototype.hasOwnProperty.call(ct,e)||(ct[e]=_t[e]);dt=ct.sourceFile||null}function i(t,e){var i=gt(pt,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=yt,n}function n(t){function e(t){if(1==t.length)return i+="return str === "+JSON.stringify(t[0])+";";i+="switch(str){";for(var e=0;e<t.length;++e)i+="case "+JSON.stringify(t[e])+":";i+="return true}return false;"}t=t.split(" ");var i="",n=[];t:for(var s=0;s<t.length;++s){for(var r=0;r<n.length;++r)if(n[r][0].length==t[s].length){n[r].push(t[s]);continue t}n.push([t[s]])}if(n.length>3){n.sort(function(t,e){return e.length-t.length}),i+="switch(str.length){";for(var s=0;s<n.length;++s){var o=n[s];i+="case "+o[0].length+":",e(o)}i+="}"}else e(t);return new Function("str",i)}function s(){this.line=kt,this.column=yt-Ct}function r(){kt=1,yt=Ct=0,Tt=!0,u()}function o(t,e){mt=yt,ct.locations&&(xt=new s),wt=t,u(),St=e,Tt=t.beforeExpr}function a(){var t=ct.onComment&&ct.locations&&new s,e=yt,n=pt.indexOf("*/",yt+=2);if(-1===n&&i(yt-2,"Unterminated comment"),yt=n+2,ct.locations){Xe.lastIndex=e;for(var r;(r=Xe.exec(pt))&&r.index<yt;)++kt,Ct=r.index+r[0].length}ct.onComment&&ct.onComment(!0,pt.slice(e+2,n),e,yt,t,ct.locations&&new s)}function h(){for(var t=yt,e=ct.onComment&&ct.locations&&new s,i=pt.charCodeAt(yt+=2);yt<ft&&10!==i&&13!==i&&8232!==i&&8233!==i;)++yt,i=pt.charCodeAt(yt);ct.onComment&&ct.onComment(!1,pt.slice(t+2,yt),t,yt,e,ct.locations&&new s)}function u(){for(;yt<ft;){var t=pt.charCodeAt(yt);if(32===t)++yt;else if(13===t){++yt;var e=pt.charCodeAt(yt);10===e&&++yt,ct.locations&&(++kt,Ct=yt)}else if(10===t||8232===t||8233===t)++yt,ct.locations&&(++kt,Ct=yt);else if(t>8&&t<14)++yt;else if(47===t){var e=pt.charCodeAt(yt+1);if(42===e)a();else{if(47!==e)break;h()}}else if(160===t)++yt;else{if(!(t>=5760&&Ge.test(String.fromCharCode(t))))break;++yt}}}function l(){var t=pt.charCodeAt(yt+1);return t>=48&&t<=57?T(!0):(++yt,o(be))}function c(){var t=pt.charCodeAt(yt+1);return Tt?(++yt,x()):61===t?b(Te,2):b(we,1)}function p(){return 61===pt.charCodeAt(yt+1)?b(Te,2):b(Le,1)}function f(t){var e=pt.charCodeAt(yt+1);return e===t?b(124===t?Ae:Pe,2):61===e?b(Te,2):b(124===t?Oe:Me,1)}function d(){return 61===pt.charCodeAt(yt+1)?b(Te,2):b(Ee,1)}function _(t){var e=pt.charCodeAt(yt+1);return e===t?45==e&&62==pt.charCodeAt(yt+2)&&Ze.test(pt.slice(Pt,yt))?(yt+=3,h(),u(),m()):b(ke,2):61===e?b(Te,2):b(Re,1)}function g(t){var e=pt.charCodeAt(yt+1),i=1;return e===t?(i=62===t&&62===pt.charCodeAt(yt+2)?3:2,61===pt.charCodeAt(yt+i)?b(Te,i+1):b(Ne,i)):33==e&&60==t&&45==pt.charCodeAt(yt+2)&&45==pt.charCodeAt(yt+3)?(yt+=4,h(),u(),m()):(61===e&&(i=61===pt.charCodeAt(yt+2)?3:2),b(Fe,i))}function y(t){return 61===pt.charCodeAt(yt+1)?b(Ie,61===pt.charCodeAt(yt+2)?3:2):b(61===t?Se:Ce,1)}function v(t){switch(t){case 46:return l();case 40:return++yt,o(_e);case 41:return++yt,o(ge);case 59:return++yt,o(ve);case 44:return++yt,o(ye);case 91:return++yt,o(ce);case 93:return++yt,o(pe);case 123:return++yt,o(fe);case 125:return++yt,o(de);case 58:return++yt,o(me);case 63:return++yt,o(xe);case 48:var e=pt.charCodeAt(yt+1);if(120===e||88===e)return S();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return T(!1);case 34:case 39:return k(t);case 47:return c(t);case 37:case 42:return p();case 124:case 38:return f(t);case 94:return d();case 43:case 45:return _(t);case 60:case 62:return g(t);case 61:case 33:return y(t);case 126:return b(Ce,1)}return!1}function m(t){if(t?yt=vt+1:vt=yt,ct.locations&&(bt=new s),t)return x();if(yt>=ft)return o(Bt);var e=pt.charCodeAt(yt);if($e(e)||92===e)return P();var n=v(e);if(!1===n){var r=String.fromCharCode(e);if("\\"===r||He.test(r))return P();i(yt,"Unexpected character '"+r+"'")}return n}function b(t,e){var i=pt.slice(yt,yt+e);yt+=e,o(t,i)}function x(){for(var t,e,n="",s=yt;;){yt>=ft&&i(s,"Unterminated regular expression");var r=pt.charAt(yt);if(Ze.test(r)&&i(s,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++yt}var n=pt.slice(s,yt);++yt;var a=A();a&&!/^[gmsiy]*$/.test(a)&&i(s,"Invalid regexp flag");try{var h=new RegExp(n,a)}catch(t){t instanceof SyntaxError&&i(s,t.message),i(t)}return o(Rt,h)}function w(t,e){for(var i=yt,n=0,s=0,r=null==e?1/0:e;s<r;++s){var o,a=pt.charCodeAt(yt);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++yt,n=n*t+o}return yt===i||null!=e&&yt-i!==e?null:n}function S(){yt+=2;var t=w(16);return null==t&&i(vt+2,"Expected hexadecimal number"),$e(pt.charCodeAt(yt))&&i(yt,"Identifier directly after number"),o(Nt,t)}function T(t){var e=yt,n=!1,s=48===pt.charCodeAt(yt);t||null!==w(10)||i(e,"Invalid number"),46===pt.charCodeAt(yt)&&(++yt,w(10),n=!0);var r=pt.charCodeAt(yt);69!==r&&101!==r||(r=pt.charCodeAt(++yt),43!==r&&45!==r||++yt,null===w(10)&&i(e,"Invalid number"),n=!0),$e(pt.charCodeAt(yt))&&i(yt,"Identifier directly after number");var a,h=pt.slice(e,yt);return n?a=parseFloat(h):s&&1!==h.length?/[89]/.test(h)||It?i(e,"Invalid number"):a=parseInt(h,8):a=parseInt(h,10),o(Nt,a)}function k(t){yt++;for(var e="";;){yt>=ft&&i(vt,"Unterminated string constant");var n=pt.charCodeAt(yt);if(n===t)return++yt,o(Lt,e);if(92===n){n=pt.charCodeAt(++yt);var s=/^[0-7]+/.exec(pt.slice(yt,yt+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++yt,s)It&&i(yt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(s,8)),yt+=s.length-1;else switch(n){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(C(2));break;case 117:e+=String.fromCharCode(C(4));break;case 85:e+=String.fromCharCode(C(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===pt.charCodeAt(yt)&&++yt;case 10:ct.locations&&(Ct=yt,++kt);break;default:e+=String.fromCharCode(n)}}else 13!==n&&10!==n&&8232!==n&&8233!==n||i(vt,"Unterminated string constant"),e+=String.fromCharCode(n),++yt}}function C(t){var e=w(16,t);return null===e&&i(vt,"Bad character escape sequence"),e}function A(){Be=!1;for(var t,e=!0,n=yt;;){var s=pt.charCodeAt(yt);if(Ye(s))Be&&(t+=pt.charAt(yt)),++yt;else{if(92!==s)break;Be||(t=pt.slice(n,yt)),Be=!0,117!=pt.charCodeAt(++yt)&&i(yt,"Expecting Unicode escape sequence \\uXXXX"),++yt;var r=C(4),o=String.fromCharCode(r);o||i(yt-1,"Invalid Unicode escape"),(e?$e(r):Ye(r))||i(yt-4,"Invalid Unicode escape"),t+=o}e=!1}return Be?t:pt.slice(n,yt)}function P(){var t=A(),e=qt;return!Be&&Ue(t)&&(e=le[t]),o(e,t)}function O(){At=vt,Pt=mt,Ot=xt,m()}function E(t){if(It=t,yt=vt,ct.locations)for(;yt<Ct;)Ct=pt.lastIndexOf("\n",Ct-2)+1,--kt;u(),m()}function M(){this.type=null,this.start=vt,this.end=null}function I(){this.start=bt,this.end=null,null!==dt&&(this.source=dt)}function F(){var t=new M;return ct.locations&&(t.loc=new I),ct.directSourceFile&&(t.sourceFile=ct.directSourceFile),ct.ranges&&(t.range=[vt,0]),t}function N(t){var e=new M;return e.start=t.start,ct.locations&&(e.loc=new I,e.loc.start=t.loc.start),ct.ranges&&(e.range=[t.range[0],0]),e}function R(t,e){return t.type=e,t.end=Pt,ct.locations&&(t.loc.end=Ot),ct.ranges&&(t.range[1]=Pt),t}function L(t){return ct.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function q(t){if(wt===t)return O(),!0}function B(){return!ct.strictSemicolons&&(wt===Bt||wt===de||Ze.test(pt.slice(Pt,vt)))}function j(){q(ve)||B()||D()}function V(t){wt===t?O():D()}function D(){i(vt,"Unexpected token")}function z(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&i(t.start,"Assigning to rvalue"),It&&"Identifier"===t.type&&ze(t.name)&&i(t.start,"Assigning to "+t.name+" in strict mode")}function U(t){At=Pt=yt,ct.locations&&(Ot=new s),Et=It=null,Mt=[],m();var e=t||F(),i=!0;for(t||(e.body=[]);wt!==Bt;){var n=G();e.body.push(n),i&&L(n)&&E(!0),i=!1}return R(e,"Program")}function G(){(wt===we||wt===Te&&"/="==St)&&m(!0);var t=wt,e=F();switch(t){case jt:case zt:O();var n=t===jt;q(ve)||B()?e.label=null:wt!==qt?D():(e.label=lt(),j());for(var s=0;s<Mt.length;++s){var r=Mt[s];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return s===Mt.length&&i(e.start,"Unsyntactic "+t.keyword),R(e,n?"BreakStatement":"ContinueStatement");case Ut:return O(),j(),R(e,"DebuggerStatement");case Wt:return O(),Mt.push(Je),e.body=G(),Mt.pop(),V(ie),e.test=W(),j(),R(e,"DoWhileStatement");case Zt:if(O(),Mt.push(Je),V(_e),wt===ve)return Q(e,null);if(wt===ee){var o=F();return O(),X(o,!0),R(o,"VariableDeclaration"),1===o.declarations.length&&q(ue)?Z(e,o):Q(e,o)}var o=$(!1,!0);return q(ue)?(z(o),Z(e,o)):Q(e,o);case Xt:return O(),ht(e,!0);case $t:return O(),e.test=W(),e.consequent=G(),e.alternate=q(Ht)?G():null,R(e,"IfStatement");case Yt:return Et||ct.allowReturnOutsideFunction||i(vt,"'return' outside of function"),O(),q(ve)||B()?e.argument=null:(e.argument=$(),j()),R(e,"ReturnStatement");case Jt:O(),e.discriminant=W(),e.cases=[],V(fe),Mt.push(Ke);for(var a,h;wt!=de;)if(wt===Vt||wt===Gt){var u=wt===Vt;a&&R(a,"SwitchCase"),e.cases.push(a=F()),a.consequent=[],O(),u?a.test=$():(h&&i(At,"Multiple default clauses"),h=!0,a.test=null),V(me)}else a||D(),a.consequent.push(G());return a&&R(a,"SwitchCase"),O(),Mt.pop(),R(e,"SwitchStatement");case Kt:return O(),Ze.test(pt.slice(Pt,vt))&&i(Pt,"Illegal newline after throw"),e.argument=$(),j(),R(e,"ThrowStatement");case te:if(O(),e.block=H(),e.handler=null,wt===Dt){var l=F();O(),V(_e),l.param=lt(),It&&ze(l.param.name)&&i(l.param.start,"Binding "+l.param.name+" in strict mode"),V(ge),l.guard=null,l.body=H(),e.handler=R(l,"CatchClause")}return e.guardedHandlers=Ft,e.finalizer=q(Qt)?H():null,e.handler||e.finalizer||i(e.start,"Missing catch or finally clause"),R(e,"TryStatement");case ee:return O(),X(e),j(),R(e,"VariableDeclaration");case ie:return O(),e.test=W(),Mt.push(Je),e.body=G(),Mt.pop(),R(e,"WhileStatement");case ne:return It&&i(vt,"'with' in strict mode"),O(),e.object=W(),e.body=G(),R(e,"WithStatement");case fe:return H();case ve:return O(),R(e,"EmptyStatement");default:var c=St,p=$();if(t===qt&&"Identifier"===p.type&&q(me)){for(var s=0;s<Mt.length;++s)Mt[s].name===c&&i(p.start,"Label '"+c+"' is already declared");var f=wt.isLoop?"loop":wt===Jt?"switch":null;return Mt.push({name:c,kind:f}),e.body=G(),Mt.pop(),e.label=p,R(e,"LabeledStatement")}return e.expression=p,j(),R(e,"ExpressionStatement")}}function W(){V(_e);var t=$();return V(ge),t}function H(t){var e,i=F(),n=!0,s=!1;for(i.body=[],V(fe);!q(de);){var r=G();i.body.push(r),n&&t&&L(r)&&(e=s,E(s=!0)),n=!1}return s&&!e&&E(!1),R(i,"BlockStatement")}function Q(t,e){return t.init=e,V(ve),t.test=wt===ve?null:$(),V(ve),t.update=wt===ge?null:$(),V(ge),t.body=G(),Mt.pop(),R(t,"ForStatement")}function Z(t,e){return t.left=e,t.right=$(),V(ge),t.body=G(),
Mt.pop(),R(t,"ForInStatement")}function X(t,e){for(t.declarations=[],t.kind="var";;){var n=F();if(n.id=lt(),It&&ze(n.id.name)&&i(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=q(Se)?$(!0,e):null,t.declarations.push(R(n,"VariableDeclarator")),!q(ye))break}return t}function $(t,e){var i=Y(e);if(!t&&wt===ye){var n=N(i);for(n.expressions=[i];q(ye);)n.expressions.push(Y(e));return R(n,"SequenceExpression")}return i}function Y(t){var e=J(t);if(wt.isAssign){var i=N(e);return i.operator=St,i.left=e,O(),i.right=Y(t),z(e),R(i,"AssignmentExpression")}return e}function J(t){var e=K(t);if(q(xe)){var i=N(e);return i.test=e,i.consequent=$(!0),V(me),i.alternate=$(!0,t),R(i,"ConditionalExpression")}return e}function K(t){return tt(et(),-1,t)}function tt(t,e,i){var n=wt.binop;if(null!=n&&(!i||wt!==ue)&&n>e){var s=N(t);s.left=t,s.operator=St;var r=wt;O(),s.right=tt(et(),n,i);return tt(R(s,r===Ae||r===Pe?"LogicalExpression":"BinaryExpression"),e,i)}return t}function et(){if(wt.prefix){var t=F(),e=wt.isUpdate;return t.operator=St,t.prefix=!0,Tt=!0,O(),t.argument=et(),e?z(t.argument):It&&"delete"===t.operator&&"Identifier"===t.argument.type&&i(t.start,"Deleting local variable in strict mode"),R(t,e?"UpdateExpression":"UnaryExpression")}for(var n=it();wt.postfix&&!B();){var t=N(n);t.operator=St,t.prefix=!1,t.argument=n,z(n),O(),n=R(t,"UpdateExpression")}return n}function it(){return nt(st())}function nt(t,e){if(q(be)){var i=N(t);return i.object=t,i.property=lt(!0),i.computed=!1,nt(R(i,"MemberExpression"),e)}if(q(ce)){var i=N(t);return i.object=t,i.property=$(),i.computed=!0,V(pe),nt(R(i,"MemberExpression"),e)}if(!e&&q(_e)){var i=N(t);return i.callee=t,i.arguments=ut(ge,!1),nt(R(i,"CallExpression"),e)}return t}function st(){switch(wt){case re:var t=F();return O(),R(t,"ThisExpression");case qt:return lt();case Nt:case Lt:case Rt:var t=F();return t.value=St,t.raw=pt.slice(vt,mt),O(),R(t,"Literal");case oe:case ae:case he:var t=F();return t.value=wt.atomValue,t.raw=wt.keyword,O(),R(t,"Literal");case _e:var e=bt,i=vt;O();var n=$();return n.start=i,n.end=mt,ct.locations&&(n.loc.start=e,n.loc.end=xt),ct.ranges&&(n.range=[i,mt]),V(ge),n;case ce:var t=F();return O(),t.elements=ut(pe,!0,!0),R(t,"ArrayExpression");case fe:return ot();case Xt:var t=F();return O(),ht(t,!1);case se:return rt();default:D()}}function rt(){var t=F();return O(),t.callee=nt(st(),!0),q(_e)?t.arguments=ut(ge,!1):t.arguments=Ft,R(t,"NewExpression")}function ot(){var t=F(),e=!0,n=!1;for(t.properties=[],O();!q(de);){if(e)e=!1;else if(V(ye),ct.allowTrailingCommas&&q(de))break;var s,r={key:at()},o=!1;if(q(me)?(r.value=$(!0),s=r.kind="init"):ct.ecmaVersion>=5&&"Identifier"===r.key.type&&("get"===r.key.name||"set"===r.key.name)?(o=n=!0,s=r.kind=r.key.name,r.key=at(),wt!==_e&&D(),r.value=ht(F(),!1)):D(),"Identifier"===r.key.type&&(It||n))for(var a=0;a<t.properties.length;++a){var h=t.properties[a];if(h.key.name===r.key.name){var u=s==h.kind||o&&"init"===h.kind||"init"===s&&("get"===h.kind||"set"===h.kind);u&&!It&&"init"===s&&"init"===h.kind&&(u=!1),u&&i(r.key.start,"Redefinition of property")}}t.properties.push(r)}return R(t,"ObjectExpression")}function at(){return wt===Nt||wt===Lt?st():lt(!0)}function ht(t,e){wt===qt?t.id=lt():e?D():t.id=null,t.params=[];var n=!0;for(V(_e);!q(ge);)n?n=!1:V(ye),t.params.push(lt());var s=Et,r=Mt;if(Et=!0,Mt=[],t.body=H(!0),Et=s,Mt=r,It||t.body.body.length&&L(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=o<0?t.id:t.params[o];if((De(a.name)||ze(a.name))&&i(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var h=0;h<o;++h)a.name===t.params[h].name&&i(a.start,"Argument name clash in strict mode")}return R(t,e?"FunctionDeclaration":"FunctionExpression")}function ut(t,e,i){for(var n=[],s=!0;!q(t);){if(s)s=!1;else if(V(ye),e&&ct.allowTrailingCommas&&q(t))break;i&&wt===ye?n.push(null):n.push($(!0))}return n}function lt(t){var e=F();return t&&"everywhere"==ct.forbidReserved&&(t=!1),wt===qt?(!t&&(ct.forbidReserved&&(3===ct.ecmaVersion?je:Ve)(St)||It&&De(St))&&-1==pt.slice(vt,mt).indexOf("\\")&&i(vt,"The keyword '"+St+"' is reserved"),e.name=St):t&&wt.keyword?e.name=wt.keyword:D(),Tt=!1,O(),R(e,"Identifier")}t.version="0.5.0";var ct,pt,ft,dt;t.parse=function(t,i){return pt=String(t),ft=pt.length,e(i),r(),U(ct.program)};var _t=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},gt=t.getLineInfo=function(t,e){for(var i=1,n=0;;){Xe.lastIndex=n;var s=Xe.exec(t);if(!(s&&s.index<e))break;++i,n=s.index+s[0].length}return{line:i,column:e-n}};t.tokenize=function(t,i){function n(t){return Pt=mt,m(t),s.start=vt,s.end=mt,s.startLoc=bt,s.endLoc=xt,s.type=wt,s.value=St,s}pt=String(t),ft=pt.length,e(i),r();var s={};return n.jumpTo=function(t,e){if(yt=t,ct.locations){kt=1,Ct=Xe.lastIndex=0;for(var i;(i=Xe.exec(pt))&&i.index<t;)++kt,Ct=i.index+i[0].length}Tt=e,u()},n};var yt,vt,mt,bt,xt,wt,St,Tt,kt,Ct,At,Pt,Ot,Et,Mt,It,Ft=[],Nt={type:"num"},Rt={type:"regexp"},Lt={type:"string"},qt={type:"name"},Bt={type:"eof"},jt={keyword:"break"},Vt={keyword:"case",beforeExpr:!0},Dt={keyword:"catch"},zt={keyword:"continue"},Ut={keyword:"debugger"},Gt={keyword:"default"},Wt={keyword:"do",isLoop:!0},Ht={keyword:"else",beforeExpr:!0},Qt={keyword:"finally"},Zt={keyword:"for",isLoop:!0},Xt={keyword:"function"},$t={keyword:"if"},Yt={keyword:"return",beforeExpr:!0},Jt={keyword:"switch"},Kt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ie={keyword:"while",isLoop:!0},ne={keyword:"with"},se={keyword:"new",beforeExpr:!0},re={keyword:"this"},oe={keyword:"null",atomValue:null},ae={keyword:"true",atomValue:!0},he={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},le={break:jt,case:Vt,catch:Dt,continue:zt,debugger:Ut,default:Gt,do:Wt,else:Ht,finally:Qt,for:Zt,function:Xt,if:$t,return:Yt,switch:Jt,throw:Kt,try:te,var:ee,while:ie,with:ne,null:oe,true:ae,false:he,new:se,in:ue,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:re,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ce={type:"[",beforeExpr:!0},pe={type:"]"},fe={type:"{",beforeExpr:!0},de={type:"}"},_e={type:"(",beforeExpr:!0},ge={type:")"},ye={type:",",beforeExpr:!0},ve={type:";",beforeExpr:!0},me={type:":",beforeExpr:!0},be={type:"."},xe={type:"?",beforeExpr:!0},we={binop:10,beforeExpr:!0},Se={isAssign:!0,beforeExpr:!0},Te={isAssign:!0,beforeExpr:!0},ke={postfix:!0,prefix:!0,isUpdate:!0},Ce={prefix:!0,beforeExpr:!0},Ae={binop:1,beforeExpr:!0},Pe={binop:2,beforeExpr:!0},Oe={binop:3,beforeExpr:!0},Ee={binop:4,beforeExpr:!0},Me={binop:5,beforeExpr:!0},Ie={binop:6,beforeExpr:!0},Fe={binop:7,beforeExpr:!0},Ne={binop:8,beforeExpr:!0},Re={binop:9,prefix:!0,beforeExpr:!0},Le={binop:10,beforeExpr:!0};t.tokTypes={bracketL:ce,bracketR:pe,braceL:fe,braceR:de,parenL:_e,parenR:ge,comma:ye,semi:ve,colon:me,dot:be,question:xe,slash:we,eq:Se,name:qt,eof:Bt,num:Nt,regexp:Rt,string:Lt};for(var qe in le)t.tokTypes["_"+qe]=le[qe];var Be,je=n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ve=n("class enum extends super const export import"),De=n("implements interface let package private protected public static yield"),ze=n("eval arguments"),Ue=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ge=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,We="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",He=new RegExp("["+We+"]"),Qe=new RegExp("["+We+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ze=/[\n\r\u2028\u2029]/,Xe=/\r\n|[\n\r\u2028\u2029]/g,$e=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&He.test(String.fromCharCode(t)))},Ye=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Qe.test(String.fromCharCode(t))))},Je={kind:"loop"},Ke={kind:"switch"}}),y.version||(y=null)}var b={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},x={"-":"__negate","+":"__self"},w=o.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});return f.inject(w),_.inject(w),D.inject(w),s&&("complete"===r.readyState?setTimeout(p):H.add(s,{load:p})),{compile:u,execute:l,load:d,parse:e,calculateBinary:n,calculateUnary:a}}.call(this);var at=new(h.inject(o.exports,{Base:o,Numerical:c,Key:Y,DomEvent:H,DomElement:W,document:r,window:s,Symbol:P,PlacedSymbol:A}));return at.agent.node&&t("./node/extend.js")(at),"function"==typeof define&&define.amd?define("paper",at):"object"==typeof e&&e&&(e.exports=at),at}).call(this,"object"==typeof self?self:null)},{"./node/extend.js":2,"./node/self.js":2,acorn:1}],7:[function(t,e,i){"use strict";function n(t){switch(t.arrayFormat){case"index":return function(e,i,n){return null===i?[r(e,t),"[",n,"]"].join(""):[r(e,t),"[",r(n,t),"]=",r(i,t)].join("")};case"bracket":return function(e,i){return null===i?r(e,t):[r(e,t),"[]=",r(i,t)].join("")};default:return function(e,i){return null===i?r(e,t):[r(e,t),"=",r(i,t)].join("")}}}function s(t){var e;switch(t.arrayFormat){case"index":return function(t,i,n){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(n[t]=i);void 0===n[t]&&(n[t]={}),n[t][e[1]]=i};case"bracket":return function(t,i,n){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===n[t]?void(n[t]=[i]):void(n[t]=[].concat(n[t],i)):void(n[t]=i)};default:return function(t,e,i){if(void 0===i[t])return void(i[t]=e);i[t]=[].concat(i[t],e)}}}function r(t,e){return e.encode?e.strict?u(t):encodeURIComponent(t):t}function o(t){return Array.isArray(t)?t.sort():"object"==typeof t?o(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}function a(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function h(t,e){e=l({arrayFormat:"none"},e);var i=s(e),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),s=e.shift(),r=e.length>0?e.join("="):void 0;r=void 0===r?null:c(r),i(c(s),r,n)}),Object.keys(n).sort().reduce(function(t,e){var i=n[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=o(i):t[e]=i,t},Object.create(null))):n}var u=t("strict-uri-encode"),l=t("object-assign"),c=t("decode-uri-component");i.extract=a,i.parse=h,i.stringify=function(t,e){e=l({encode:!0,strict:!0,arrayFormat:"none"},e),!1===e.sort&&(e.sort=function(){});var i=n(e);return t?Object.keys(t).sort(e.sort).map(function(n){var s=t[n];if(void 0===s)return"";if(null===s)return r(n,e);if(Array.isArray(s)){var o=[];return s.slice().forEach(function(t){void 0!==t&&o.push(i(n,t,o.length))}),o.join("&")}return r(n,e)+"="+r(s,e)}).filter(function(t){return t.length>0}).join("&"):""},i.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:h(a(t),e)}}},{"decode-uri-component":3,"object-assign":5,"strict-uri-encode":8}],8:[function(t,e,i){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},{}],9:[function(t,e,i){!function(t,n){"object"==typeof i&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof i?i.Tone=n():t.Tone=n()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=155)}([function(t,e,i){(function(n){var s,r;s=[i(153)],void 0===(r=function(t){"use strict";var e=function(){if(!(this instanceof e))throw new Error("constructor needs to be called with the 'new' keyword")};return e.prototype.toString=function(){for(var t in e){var i=t[0].match(/^[A-Z]$/),n=e[t]===this.constructor;if(e.isFunction(e[t])&&i&&n)return t}return"Tone"},e.prototype.dispose=function(){return this},e.prototype.set=function(t,i,n){if(e.isObject(t))n=i;else if(e.isString(t)){var s={};s[t]=i,t=s}t:for(var r in t){i=t[r];var o=this;if(-1!==r.indexOf(".")){for(var a=r.split("."),h=0;h<a.length-1;h++)if((o=o[a[h]])instanceof e){a.splice(0,h+1);var u=a.join(".");o.set(u,i);continue t}r=a[a.length-1]}var l=o[r];e.isUndef(l)||(e.Signal&&l instanceof e.Signal||e.Param&&l instanceof e.Param?l.value!==i&&(e.isUndef(n)?l.value=i:l.rampTo(i,n)):l instanceof AudioParam?l.value!==i&&(l.value=i):e.TimeBase&&l instanceof e.TimeBase?o[r]=i:l instanceof e?l.set(i):l!==i&&(o[r]=i))}return this},e.prototype.get=function(t){e.isUndef(t)?t=this._collectDefaults(this.constructor):e.isString(t)&&(t=[t]);for(var i={},n=0;n<t.length;n++){var s=t[n],r=this,o=i;if(-1!==s.indexOf(".")){for(var a=s.split("."),h=0;h<a.length-1;h++){var u=a[h];o[u]=o[u]||{},o=o[u],r=r[u]}s=a[a.length-1]}var l=r[s];e.isObject(t[s])?o[s]=l.get():e.Signal&&l instanceof e.Signal?o[s]=l.value:e.Param&&l instanceof e.Param?o[s]=l.value:l instanceof AudioParam?o[s]=l.value:l instanceof e?o[s]=l.get():!e.isFunction(l)&&e.isDefined(l)&&(o[s]=l)}return i},e.prototype._collectDefaults=function(t){var i=[];if(e.isDefined(t.defaults)&&(i=Object.keys(t.defaults)),e.isDefined(t._super))for(var n=this._collectDefaults(t._super),s=0;s<n.length;s++)-1===i.indexOf(n[s])&&i.push(n[s]);return i},e.defaults=function(t,i,n){var s={};if(1===t.length&&e.isObject(t[0]))s=t[0];else for(var r=0;r<i.length;r++)s[i[r]]=t[r];return e.isDefined(n.defaults)?e.defaultArg(s,n.defaults):e.isObject(n)?e.defaultArg(s,n):s},e.defaultArg=function(t,i){if(e.isObject(t)&&e.isObject(i)){var n={};for(var s in t)n[s]=e.defaultArg(i[s],t[s]);for(var r in i)n[r]=e.defaultArg(t[r],i[r]);return n}return e.isUndef(t)?i:t},e.prototype.log=function(){if(this.debug||this.toString()===e.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+":"),console.log.apply(void 0,t)}},e.prototype.assert=function(t,e){if(!t)throw new Error(e)},e.connectSeries=function(){for(var t=arguments[0],i=1;i<arguments.length;i++){var n=arguments[i];t.connect(n),t=n}return e},e.isUndef=function(t){return void 0===t},e.isDefined=function(t){return!e.isUndef(t)},e.isFunction=function(t){return"function"==typeof t},e.isNumber=function(t){return"number"==typeof t},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},e.isBoolean=function(t){return"boolean"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isString=function(t){return"string"==typeof t},e.isNote=function(t){return e.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},e.noOp=function(){},e.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},e.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},e.State={Started:"started",Stopped:"stopped",Paused:"paused"},e.global=e.isUndef(n)?window:n,e.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.dbToGain=function(t){return Math.pow(10,t/20)},e.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.prototype.immediate=function(){return e.context.currentTime},e.immediate=function(){return e.context.currentTime},e.extend=function(t,i){function n(){}e.isUndef(i)&&(i=e),n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=i},e._audioContext=null,e.start=function(){return e.context.resume()},Object.defineProperty(e,"context",{get:function(){return e._audioContext},set:function(t){t.isContext?e._audioContext=t:e._audioContext=new e.Context(t),e.Context.emit("init",e._audioContext)}}),Object.defineProperty(e.prototype,"context",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,"supported",{get:function(){var t=e.global.hasOwnProperty("AudioContext")||e.global.hasOwnProperty("webkitAudioContext"),i=e.global.hasOwnProperty("Promise");return t&&i}}),Object.defineProperty(e,"initialized",{get:function(){return Boolean(e.context)}}),e.getContext=function(t){if(e.initialized)t(e.context);else{var i=function(){t(e.context),e.Context.off("init",i)};e.Context.on("init",i)}return e},e.version=t,e}.apply(e,s))||(t.exports=r)}).call(this,i(154))},function(t,e,i){var n,s;n=[i(0),i(7),i(4),i(14),i(97),i(3)],void 0===(s=function(t){"use strict";return t.Signal=function(){var e=t.defaults(arguments,["value","units"],t.Signal);t.Param.call(this,e),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=e.value,this.output=this._constantSource,this.input=this._param=this.output.offset},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.disconnect=t.SignalBase.prototype.disconnect,t.Signal.prototype.getValueAtTime=function(e){return this._param.getValueAtTime?this._param.getValueAtTime(e):t.Param.prototype.getValueAtTime.call(this,e)},t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._constantSource.disconnect(),this._constantSource=null,this},t.Signal}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(20)],void 0===(s=function(t){return t.AudioNode=function(){t.call(this);var e=t.defaults(arguments,["context"],{context:t.context});this._context=e.context},t.extend(t.AudioNode),Object.defineProperty(t.AudioNode.prototype,"context",{get:function(){return this._context}}),t.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(t.AudioNode.prototype,"channelCount",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(t.AudioNode.prototype,"channelCountMode",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(t.AudioNode.prototype,"channelInterpretation",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(t.AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),t.AudioNode.prototype.connect=function(e,i,n){return t.isArray(this.output)?(i=t.defaultArg(i,0),this.output[i].connect(e,0,n)):this.output.connect(e,i,n),this},t.AudioNode.prototype.disconnect=function(e,i,n){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(i=t.defaultArg(i,0),this.output[i].disconnect(e,0,n)):this.output.disconnect.apply(this.output,arguments)},t.AudioNode.prototype.chain=function(){for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},t.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},t.global.AudioNode&&(AudioNode.prototype.chain=t.AudioNode.prototype.chain,AudioNode.prototype.fan=t.AudioNode.prototype.fan),t.AudioNode.prototype.dispose=function(){return t.isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this},t.AudioNode}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(14),i(4),i(2)],void 0===(s=function(t){"use strict";return t.Gain=function(){var e=t.defaults(arguments,["gain","units"],t.Gain);t.AudioNode.call(this,e),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain,t.AudioNode),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(65),i(46),i(45),i(20)],void 0===(s=function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)||t.isObject(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)||t.isObject(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)||t.isObject(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(14),i(3),i(36)],void 0===(s=function(t){"use strict";return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this.value=t.defaultArg(e,0),this.proxy=!1},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(16),i(27),i(40),i(4),i(33),i(1),i(2)],void 0===(s=function(t){"use strict";return t.Source=function(e){e=t.defaultArg(e,t.Source.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source,t.AudioNode),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype.restart=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,i,n){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started)this._state.cancel(e),this._state.setStateAtTime(t.State.Started,e),this.restart(e,i,n);else if(this._state.setStateAtTime(t.State.Started,e),this._synced){var s=this._state.get(e);s.offset=t.defaultArg(i,0),s.duration=n;var r=t.Transport.schedule(function(t){this._start(t,i,n)}.bind(this),e);this._scheduled.push(r),t.Transport.state===t.State.Started&&this._syncedStart(this.now(),t.Transport.seconds)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._synced){var i=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop.apply(this,arguments);return this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,i){if(i>0){var n=this._state.get(i);if(n&&n.state===t.State.Started&&n.time!==i){var s,r=i-this.toSeconds(n.time);n.duration&&(s=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,s)}}}.bind(this),this._syncedStop=function(e){var i=t.Transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(i)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on("start loopStart",this._syncedStart),t.Transport.on("stop pause loopEnd",this._syncedStop),this},t.Source.prototype.unsync=function(){this._synced&&(t.Transport.off("stop pause loopEnd",this._syncedStop),t.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var e=0;e<this._scheduled.length;e++){var i=this._scheduled[e];t.Transport.clear(i)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(36),i(98)],void 0===(s=function(t){"use strict";return t.WaveShaper=function(e,i){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(i,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=new Array(this._curve.length),i=0,n=this._curve.length;i<n;i++){var s=i/(n-1)*2-1;e[i]=t(s,i)}return this.curve=e,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(!["none","2x","4x"].includes(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(23),i(2)],void 0===(s=function(t){"use strict";return t.Effect=function(){var e=t.defaults(arguments,["wet"],t.Effect);t.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect,t.AudioNode),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(2)],void 0===(s=function(t){"use strict";return t.Filter=function(){var e=t.defaults(arguments,["frequency","type","rolloff"],t.Filter);t.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!0,type:t.Type.Decibels}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter,t.AudioNode),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(e){e=parseInt(e,10);var i=[-12,-24,-48,-96].indexOf(e);if(-1===i)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");i+=1,this._rolloff=e,this.input.disconnect();for(var n=0;n<this._filters.length;n++)this._filters[n].disconnect(),this._filters[n]=null;this._filters=new Array(i);for(var s=0;s<i;s++){var r=this.context.createBiquadFilter();r.type=this._type,this.frequency.connect(r.frequency),this.detune.connect(r.detune),this.Q.connect(r.Q),this.gain.connect(r.gain),this._filters[s]=r}var o=[this.input].concat(this._filters).concat([this.output]);t.connectSeries.apply(t,o)}}),t.Filter.prototype.getFrequencyResponse=function(e){e=t.defaultArg(e,128);for(var i=new Float32Array(e).map(function(){return 1}),n=new Float32Array(e),s=0;s<e;s++){var r=19980*Math.pow(s/e,2)+20;n[s]=r}var o=new Float32Array(e),a=new Float32Array(e);return this._filters.forEach(function(){var t=this.context.createBiquadFilter();t.type=this._type,t.Q.value=this.Q.value,t.frequency.value=this.frequency.value,t.gain.value=this.gain.value,t.getFrequencyResponse(n,o,a),o.forEach(function(t,e){i[e]*=t})}.bind(this)),i},
t.Filter.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(2)],void 0===(s=function(t){"use strict";return t.Merge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge,t.AudioNode),t.Merge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(35),i(4),i(81)],void 0===(s=function(t){"use strict";return t.Buffer=function(){var e=t.defaults(arguments,["url","onload","onerror"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,this.onload=t.noOp,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),this.loaded||(this.onload=e.onload)):t.isString(e.url)&&this.load(e.url).then(e.onload).catch(e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1,onload:t.noOp,onerror:t.noOp},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?e.loaded?this._buffer=e.get():e.onload=function(){this.set(e),this.onload(this)}.bind(this):this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i,n){return new Promise(function(s,r){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),s(this),this.onload(this),i&&i(this)}.bind(this),function(t){this._xhr=null,r(t),n&&n(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,n=e?t[0].length:t.length,s=this.context.createBuffer(i,n,this.context.sampleRate);e||1!==i||(t=[t]);for(var r=0;r<i;r++)s.copyToChannel(t[r],r);return this._buffer=s,this},t.Buffer.prototype.toMono=function(e){if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(var i=new Float32Array(this.length),n=this.numberOfChannels,s=0;s<n;s++)for(var r=this.toArray(s),o=0;o<r.length;o++)i[o]+=r[o];i=i.map(function(t){return t/n}),this.fromArray(i)}return this},t.Buffer.prototype.toArray=function(e){if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var i=[],n=0;n<this.numberOfChannels;n++)i[n]=this.getChannelData(n);return i},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,i){i=t.defaultArg(i,this.duration);for(var n=Math.floor(this.context.sampleRate*this.toSeconds(e)),s=Math.floor(this.context.sampleRate*this.toSeconds(i)),r=[],o=0;o<this.numberOfChannels;o++)r[o]=this.toArray(o).slice(n,s);return(new t.Buffer).fromArray(r)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl="",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer.fromUrl=function(e){var i=new t.Buffer;return i.load(e).then(function(){return i})},t.Buffer._removeFromDownloadQueue=function(e){var i=t.Buffer._downloadQueue.indexOf(e);-1!==i&&t.Buffer._downloadQueue.splice(i,1)},t.Buffer.load=function(e,i,n){function s(e){if(t.Buffer._removeFromDownloadQueue(l),t.Buffer.emit("error",e),!n)throw e;n(e)}function r(){for(var e=0,i=0;i<t.Buffer._downloadQueue.length;i++)e+=t.Buffer._downloadQueue[i].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}i=t.defaultArg(i,t.noOp);var o=e.match(/\[(.+\|?)+\]$/);if(o){for(var a=o[1].split("|"),h=a[0],u=0;u<a.length;u++)if(t.Buffer.supportsType(a[u])){h=a[u];break}e=e.replace(o[0],h)}var l=new XMLHttpRequest;return l.open("GET",t.Buffer.baseUrl+e,!0),l.responseType="arraybuffer",l.progress=0,t.Buffer._downloadQueue.push(l),l.addEventListener("load",function(){200===l.status?t.context.decodeAudioData(l.response).then(function(e){l.progress=1,r(),i(e),t.Buffer._removeFromDownloadQueue(l),0===t.Buffer._downloadQueue.length&&t.Buffer.emit("load")}).catch(function(){t.Buffer._removeFromDownloadQueue(l),s("Tone.Buffer: could not decode audio data: "+e)}):s("Tone.Buffer: could not locate file: "+e)}),l.addEventListener("error",s),l.addEventListener("progress",function(t){t.lengthComputable&&(l.progress=t.loaded/t.total*.95,r())}),l.send(),l},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},t.loaded=function(){function e(){t.Buffer.off("load",i),t.Buffer.off("error",n)}var i,n;return new Promise(function(e,s){i=function(){e()},n=function(){s()},t.Buffer.on("load",i),t.Buffer.on("error",n)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(17),i(26),i(2),i(1),i(22),i(4),i(28)],void 0===(s=function(t){"use strict";return t.LFO=function(){var e=t.defaults(arguments,["frequency","min","max"],t.LFO);t.AudioNode.call(this),this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.AudioNode),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param||(this.convert=e.convert,this.units=e.units),t.SignalBase.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(29),i(94),i(1),i(3)],void 0===(s=function(t){"use strict";return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum),this.proxy=!1},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(4),i(2),i(24)],void 0===(s=function(t){"use strict";return t.Param=function(){var e=t.defaults(arguments,["param","units","convert"],t.Param);t.AudioNode.call(this,e),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._events=new t.Timeline(1e3),t.isDefined(e.value)&&this._param&&this.setValueAtTime(e.value,0)},t.extend(t.Param,t.AudioNode),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(t.Param.prototype,"minValue",{get:function(){return this.units===t.Type.Time||this.units===t.Type.Frequency||this.units===t.Type.NormalRange||this.units===t.Type.Positive||this.units===t.Type.BPM?0:this.units===t.Type.AudioRange?-1:this.units===t.Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(t.Param.prototype,"maxValue",{get:function(){return this.units===t.Type.NormalRange||this.units===t.Type.AudioRange?1:this._param.maxValue}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert)||this.overridden)return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.AutomationType={Linear:"linearRampToValueAtTime",Exponential:"exponentialRampToValueAtTime",Target:"setTargetAtTime",SetValue:"setValueAtTime",Cancel:"cancelScheduledValues"},t.Param.prototype.setValueAtTime=function(e,i){return i=this.toSeconds(i),e=this._fromUnits(e),this._events.add({type:t.Param.AutomationType.SetValue,value:e,time:i}),this.log(t.Param.AutomationType.SetValue,e,i),this._param.setValueAtTime(e,i),this},t.Param.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var i=this._events.getAfter(e),n=this._events.get(e),s=t.defaultArg(this._initialValue,this._param.defaultValue),r=s;if(null===n)r=s;else if(n.type===t.Param.AutomationType.Target){var o,a=this._events.getBefore(n.time);o=null===a?s:a.value,r=this._exponentialApproach(n.time,o,n.value,n.constant,e)}else r=null===i?n.value:i.type===t.Param.AutomationType.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.Param.AutomationType.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return r},t.Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},t.Param.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Linear,value:e,time:i}),this.log(t.Param.AutomationType.Linear,e,i),this._param.linearRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Exponential,time:i,value:e}),this.log(t.Param.AutomationType.Exponential,e,i),this._param.exponentialRampToValueAtTime(e,i),this},t.Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},t.Param.prototype.exponentialApproachValueAtTime=function(t,e,i){var n=Math.log(this.toSeconds(i)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,n)},t.Param.prototype.setTargetAtTime=function(e,i,n){if(e=this._fromUnits(e),n<=0)throw new Error("timeConstant must be greater than 0");return i=this.toSeconds(i),this._events.add({type:t.Param.AutomationType.Target,value:e,time:i,constant:n}),this.log(t.Param.AutomationType.Target,e,i,n),this._param.setTargetAtTime(e,i,n),this},t.Param.prototype.setValueCurveAtTime=function(e,i,n,s){s=t.defaultArg(s,1),n=this.toSeconds(n),i=this.toSeconds(i),this.setValueAtTime(e[0]*s,i);for(var r=n/(e.length-1),o=1;o<e.length;o++)this.linearRampToValueAtTime(e[o]*s,i+o*r);return this},t.Param.prototype.cancelScheduledValues=function(e){return e=this.toSeconds(e),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(t.Param.AutomationType.Cancel,e),this},t.Param.prototype.cancelAndHoldAtTime=function(e){var i=this.getValueAtTime(e);this.log("cancelAndHoldAtTime",e,"value="+i),this._param.cancelScheduledValues(e);var n=this._events.get(e),s=this._events.getAfter(e);return n&&n.time===e?s?this._events.cancel(s.time):this._events.cancel(e+this.sampleTime):s&&(this._events.cancel(s.time),s.type===t.Param.AutomationType.Linear?this.linearRampToValueAtTime(i,e):s.type===t.Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(i,e)),this._events.add({type:t.Param.AutomationType.SetValue,value:i,time:e}),this._param.setValueAtTime(i,e),this},t.Param.prototype.rampTo=function(e,i,n){return i=t.defaultArg(i,.1),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampTo(e,i,n):this.linearRampTo(e,i,n),this},t.Param.prototype._exponentialApproach=function(t,e,i,n,s){return i+(e-i)*Math.exp(-(s-t)/n)},t.Param.prototype._linearInterpolate=function(t,e,i,n,s){return e+(s-t)/(i-t)*(n-e)},t.Param.prototype._exponentialInterpolate=function(t,e,i,n,s){return e*Math.pow(n/e,(s-t)/(i-t))},t.Param.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this},t.Param}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(19),i(10),i(23)],void 0===(s=function(t){"use strict";return t.StereoEffect=function(){t.AudioNode.call(this);var e=t.defaults(arguments,["wet"],t.Effect);this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(86),i(4),i(24),i(35),i(3),i(84),i(83),i(55)],void 0===(s=function(t){"use strict";t.Transport=function(){t.Emitter.call(this),t.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype.isTransport=!0,t.Transport.prototype._processTick=function(e,i){if(this._swingAmount>0&&i%this._ppq!=0&&i%(2*this._swingTicks)!=0){var n=i%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;e+=t.Ticks(2*this._swingTicks/3).toSeconds()*s}this.loop&&i>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),i=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._timeline.forEachAtTime(i,function(t){t.invoke(e)})},t.Transport.prototype.schedule=function(e,i){var n=new t.TransportEvent(this,{time:t.TransportTime(i),callback:e});return this._addEvent(n,this._timeline)},t.Transport.prototype.scheduleRepeat=function(e,i,n,s){var r=new t.TransportRepeatEvent(this,{callback:e,interval:t.Time(i),time:t.TransportTime(n),duration:t.Time(t.defaultArg(s,1/0))});return this._addEvent(r,this._repeatedEvents)},t.Transport.prototype.scheduleOnce=function(e,i){var n=new t.TransportEvent(this,{time:t.TransportTime(i),callback:e,once:!0});return this._addEvent(n,this._timeline)},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.forEachFrom(e,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(e,function(t){this.clear(t.id)}.bind(this)),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,i){i=t.Ticks(i).toSeconds(),this.emit("start",e,i)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,i){return t.isDefined(i)&&(i=this.toTicks(i)),this._clock.start(e,i),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){var e=this.now(),i=this._clock.getTicksAtTime(e);return t.Ticks(i).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this.bpm.timeToTicks(t,e);this.ticks=i}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var i=this.now();this.state===t.State.Started?(this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this.seconds)):this._clock.setTicksAtTime(e,i)}}}),t.Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},t.Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){if(e=this.toTicks(e),this.state!==t.State.Started)return 0;var i=this.now(),n=e-this.getTicksAtTime(i)%e;return this._clock.nextTickTime(n,i)},t.Transport.prototype.syncSignal=function(e,i){if(!i){var n=this.now();i=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/this.bpm.getValueAtTime(n):0}var s=new t.Gain(i);return this.bpm.chain(s,e._param),this._syncedSignals.push({ratio:s,signal:e,initial:e.value}),e.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on("init",function(i){i.transport&&i.transport.isTransport?t.Transport=i.transport:t.Transport=new e}),t.Context.on("close",function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()}),t.Transport}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(6),i(16),i(82)],void 0===(s=function(t){"use strict";return t.Oscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.Oscillator);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=e.partials,this._partialCount=e.partialCount,this._phase=e.phase,this._type=e.type,e.partialCount&&e.type!==t.Oscillator.Type.Custom&&(this._type=this.baseType+e.partialCount.toString()),this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[],partialCount:0},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(e){this.log("start",e),this._oscillator=new t.OscillatorNode,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),e=this.toSeconds(e),this._oscillator.start(e)},t.Oscillator.prototype._stop=function(t){return this.log("stop",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t)),this},t.Oscillator.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),Object.defineProperty(t.Oscillator.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount,"")},set:function(e){this.partialCount&&this._type!==t.Oscillator.Type.Custom&&e!==t.Oscillator.Type.Custom?this.type=e+this.partialCount:this.type=e}}),Object.defineProperty(t.Oscillator.prototype,"partialCount",{get:function(){return this._partialCount},set:function(e){var i=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);n&&(i=n[1]),this._type!==t.Oscillator.Type.Custom&&(this.type=0===e?i:i+e.toString())}}),t.Oscillator.prototype.get=function(){const e=t.prototype.get.apply(this,arguments);return e.type!==t.Oscillator.Type.Custom&&delete e.partials,e},t.Oscillator.prototype._getRealImaginary=function(e,i){var n=2048,s=new Float32Array(n),r=new Float32Array(n),o=1;if(e===t.Oscillator.Type.Custom)o=this._partials.length+1,this._partialCount=this._partials.length,n=o;else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);a?(o=parseInt(a[2])+1,this._partialCount=parseInt(a[2]),e=a[1],n=o=Math.max(o,2)):this._partialCount=0,this._partials=[]}for(var h=1;h<n;++h){var u,l=2/(h*Math.PI);switch(e){case t.Oscillator.Type.Sine:u=h<=o?1:0,this._partials[h-1]=u;break;case t.Oscillator.Type.Square:u=1&h?2*l:0,this._partials[h-1]=u;break;case t.Oscillator.Type.Sawtooth:u=l*(1&h?1:-1),this._partials[h-1]=u;break;case t.Oscillator.Type.Triangle:u=1&h?l*l*2*(h-1>>1&1?-1:1):0,this._partials[h-1]=u;break;case t.Oscillator.Type.Custom:u=this._partials[h-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==u?(s[h]=-u*Math.sin(i*h),r[h]=u*Math.cos(i*h)):(s[h]=0,r[h]=0)}return[s,r]},t.Oscillator.prototype._inverseFFT=function(t,e,i){for(var n=0,s=t.length,r=0;r<s;r++)n+=t[r]*Math.cos(r*i)+e[r]*Math.sin(r*i);return n},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],n=0,s=2*Math.PI,r=0;r<8;r++)n=Math.max(this._inverseFFT(e,i,r/8*s),n);return-this._inverseFFT(e,i,this._phase)/n},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.dispose(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(14),i(2)],void 0===(s=function(t){"use strict";return t.Delay=function(){var e=t.defaults(arguments,["delayTime","maxDelay"],t.Delay);t.AudioNode.call(this,e),this._maxDelay=Math.max(this.toSeconds(e.maxDelay),this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(this._maxDelay),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay,t.AudioNode),t.Delay.defaults={maxDelay:1,delayTime:0},Object.defineProperty(t.Delay.prototype,"maxDelay",{get:function(){return this._maxDelay}}),t.Delay.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(3),i(2)],void 0===(s=function(t){"use strict";return t.Split=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split,t.AudioNode),t.Split.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(35),i(24),i(34)],void 0===(s=function(t){t.Context=function(){t.Emitter.call(this);var i=t.defaults(arguments,["context"],t.Context);if(!i.context&&(i.context=new t.global.AudioContext,!i.context))throw new Error("could not create AudioContext. Possibly too many AudioContexts running already.");for(this._context=i.context;this._context.rawContext;)this._context=this._context.rawContext;for(var n in this._context)this._defineProperty(this._context,n);this._latencyHint=i.latencyHint,this._constants={},this.lookAhead=i.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit("statechange",t)}.bind(this)},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},
t.Context.prototype.isContext=!0,t.Context.prototype._defineProperty=function(e,i){t.isUndef(this[i])&&Object.defineProperty(this,i,{get:function(){return"function"==typeof e[i]?e[i].bind(e):e[i]},set:function(t){e[i]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(t.Context.prototype,"destination",{get:function(){return this.master?this.master:this._context.destination}}),t.Context.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},t.Context.prototype.close=function(){var e=Promise.resolve();return this!==t.global.TONE_AUDIO_CONTEXT&&(e=this.rawContext.close()),e.then(function(){t.Context.emit("close",this)}.bind(this))},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants[t]=s,s},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,"rawContext",{get:function(){return this._context}}),Object.defineProperty(t.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var i=e;if(this._latencyHint=e,t.isString(e))switch(e){case"interactive":i=.1,this._context.latencyHint=e;break;case"playback":i=.8,this._context.latencyHint=e;break;case"balanced":i=.25,this._context.latencyHint=e;break;case"fastest":this._context.latencyHint="interactive",i=.01}this.lookAhead=i,this.updateInterval=i/3}}),t.Context.prototype.dispose=function(){return this.close().then(function(){for(var e in t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[e].disconnect();this._constants=null}.bind(this))};var e=function(e,i,n){this._type=i,this._updateInterval=n,this._callback=t.defaultArg(e,t.noOp),this._createClock()};if(e.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},e.prototype._createWorker=function(){t.global.URL=t.global.URL||t.global.webkitURL;var e=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),i=URL.createObjectURL(e),n=new Worker(i);n.onmessage=this._callback.bind(this),this._worker=n},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.getContext(function(){function e(e,n,s){if(e.input)return s=t.defaultArg(s,0),t.isArray(e.input)?this.connect(e.input[s]):this.connect(e.input,n,s);try{return e instanceof AudioNode?(i.call(this,e,n,s),e):(i.call(this,e,n),e)}catch(t){throw new Error("error connecting to node: "+e+"\n"+t)}}var i=AudioNode.prototype.connect,n=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=function(e,i,s){if(e&&e.input&&t.isArray(e.input))s=t.defaultArg(s,0),this.disconnect(e.input[s],i,0);else if(e&&e.input)this.disconnect(e.input,i,s);else try{e instanceof AudioParam?n.call(this,e,i):n.apply(this,arguments)}catch(t){throw new Error("error disconnecting node: "+e+"\n"+t)}})}),t.supported&&!t.initialized){if(t.global.TONE_AUDIO_CONTEXT||(t.global.TONE_AUDIO_CONTEXT=new t.Context),t.context=t.global.TONE_AUDIO_CONTEXT,!t.global.TONE_SILENCE_VERSION_LOGGING){var i="v";"dev"===t.version&&(i="");var n=" * Tone.js "+i+t.version+" * ";console.log("%c"+n,"background: #000; color: #fff")}}else t.supported||console.warn("This browser does not support Tone.js");return t.Context}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(4),i(40)],void 0===(s=function(t){"use strict";return t.Instrument=function(e){e=t.defaultArg(e,t.Instrument.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._scheduledEvents=[]},t.extend(t.Instrument,t.AudioNode),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this},t.Instrument.prototype._syncMethod=function(e,i){var n=this["_original_"+e]=this[e];this[e]=function(){var e=Array.prototype.slice.call(arguments),s=e[i],r=t.Transport.schedule(function(t){e[i]=t,n.apply(this,e)}.bind(this),s);this._scheduledEvents.push(r)}.bind(this)},t.Instrument.prototype.unsync=function(){return this._scheduledEvents.forEach(function(e){t.Transport.clear(e)}),this._scheduledEvents=[],this._original_triggerAttack&&(this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},t.Instrument.prototype.triggerAttackRelease=function(t,e,i,n){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,n),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this.unsync(),this._scheduledEvents=null,this},t.Instrument}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7),i(1)],void 0===(s=function(t){"use strict";return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(13),i(93),i(3),i(2)],void 0===(s=function(t){"use strict";return t.CrossFade=function(e){t.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._one=this.context.getConstant(1),this._invert=new t.Subtract,this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this._one.connect(this._invert,0,0),this.fade.connect(this._invert,0,1),this._invert.chain(this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade,t.AudioNode),t.CrossFade.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this._one=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){"use strict";return t.Timeline=function(){var e=t.defaults(arguments,["memory"],t.Timeline);t.call(this),this._timeline=[],this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){if(t.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");e.time=e.time.valueOf();var i=this._search(e.time);if(this._timeline.splice(i+1,0,e),this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},t.Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},t.Timeline.prototype.get=function(e,i){i=t.defaultArg(i,"time");var n=this._search(e,i);return-1!==n?this._timeline[n]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,i){i=t.defaultArg(i,"time");var n=this._search(e,i);return n+1<this._timeline.length?this._timeline[n+1]:null},t.Timeline.prototype.getBefore=function(e,i){i=t.defaultArg(i,"time");var n=this._timeline.length;if(n>0&&this._timeline[n-1][i]<e)return this._timeline[n-1];var s=this._search(e,i);return s-1>=0?this._timeline[s-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,i){if(0===this._timeline.length)return-1;i=t.defaultArg(i,"time");var n=0,s=this._timeline.length,r=s;if(s>0&&this._timeline[s-1][i]<=e)return s-1;for(;n<r;){var o=Math.floor(n+(r-n)/2),a=this._timeline[o],h=this._timeline[o+1];if(a[i]===e){for(var u=o;u<this._timeline.length;u++)this._timeline[u][i]===e&&(o=u);return o}if(a[i]<e&&h[i]>e)return o;a[i]>e?r=o:n=o+1}return-1},t.Timeline.prototype._iterate=function(e,i,n){i=t.defaultArg(i,0),n=t.defaultArg(n,this._timeline.length-1),this._timeline.slice(i,n+1).forEach(function(t){e.call(this,t)}.bind(this))},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachBetween=function(t,e,i){var n=this._search(t),s=this._search(e);return-1!==n&&-1!==s?(this._timeline[n].time!==t&&(n+=1),this._timeline[s].time===e&&(s-=1),this._iterate(i,n,s)):-1===n&&this._iterate(i,0,s),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e.call(this,i)},0,i),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this},t.Timeline}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(21),i(1)],void 0===(s=function(t){"use strict";return t.Monophonic=function(e){e=t.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return this.log("triggerAttack",t,e,i),e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return this.log("triggerRelease",t),t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0&&this.getLevelAtTime(e)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(t,i,e)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(29),i(5),i(1)],void 0===(s=function(t){"use strict";return t.Scale=function(e,i){t.SignalBase.call(this),this._outputMin=t.defaultArg(e,0),this._outputMax=t.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(3),i(2)],void 0===(s=function(t){"use strict";return t.Volume=function(){var e=t.defaults(arguments,["volume"],t.Volume);t.AudioNode.call(this,e),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume,t.AudioNode),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(3),i(36)],void 0===(s=function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(3)],void 0===(s=function(t){"use strict";return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum),this.proxy=!1},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(47),i(3)],void 0===(s=function(t){"use strict";return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(11),i(6),i(3),i(2),i(63)],void 0===(s=function(t){return t.BufferSource=function(){var e=t.defaults(arguments,["buffer","onload"],t.BufferSource);t.AudioNode.call(this,e),this.onended=e.onended,this._startTime=-1,this._sourceStarted=!1,this._sourceStopped=!1,this._stopTime=-1,this._gainNode=this.output=new t.Gain(0),this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._source.onended=this._onended.bind(this),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param({param:this._source.playbackRate,units:t.Type.Positive,value:e.playbackRate}),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this.curve=e.curve,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd},t.extend(t.BufferSource,t.AudioNode),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),t.BufferSource.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),-1!==this._startTime&&this._startTime<=e&&(-1===this._stopTime||e<this._stopTime)&&!this._sourceStopped?t.State.Started:t.State.Stopped},t.BufferSource.prototype.start=function(e,i,n,s){this.log("start",e,i,n,s),this.assert(-1===this._startTime,"can only be started once"),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),e=this.toSeconds(e),i=this.loop?t.defaultArg(i,this.loopStart):t.defaultArg(i,0),i=this.toSeconds(i),i=Math.max(i,0),s=t.defaultArg(s,1);var r=this.toSeconds(this.fadeIn);if(r>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(s,e+r):this._gainNode.gain.exponentialApproachValueAtTime(s,e,r)):this._gainNode.gain.setValueAtTime(s,e),this._startTime=e,t.isDefined(n)){var o=this.toSeconds(n);o=Math.max(o,0),this.stop(e+o)}if(this.loop){var a=this.loopEnd||this.buffer.duration,h=this.loopStart;i>=a&&(i=(i-h)%(a-h)+h)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,i<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(e,i)),this},t.BufferSource.prototype.stop=function(e){this.log("stop",e),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),e=this.toSeconds(e),-1!==this._stopTime&&this.cancelStop();var i=this.toSeconds(this.fadeOut);return this._stopTime=e+i,i>0?"linear"===this.curve?this._gainNode.gain.linearRampTo(0,i,e):this._gainNode.gain.targetRampTo(0,i,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now()),this},t.BufferSource.prototype.cancelStop=function(){if(-1!==this._startTime&&!this._sourceStopped){var t=this.toSeconds(this.fadeIn);this._gainNode.gain.cancelScheduledValues(this._startTime+t+this.sampleTime),this.context.clearTimeout(this._onendedTimeout),this._stopTime=-1}return this},t.BufferSource.prototype._onended=function(){if(!this._sourceStopped){this._sourceStopped=!0;var t="exponential"===this.curve?2*this.fadeOut:0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+t),this.onended(this)}},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this.cancelStop()}}),t.BufferSource.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(1),i(5),i(3)],void 0===(s=function(t){"use strict";return t.FeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(24),i(4)],void 0===(s=function(t){"use strict";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var i=this._search(e);i>=0;i--){var n=this._timeline[i];if(n.state===t)return n}},t.TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var i=this._search(e);if(-1!==i)for(var n=i;n<this._timeline.length;n++){var s=this._timeline[n];if(s.state===t)return s}},t.TimelineState}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(66)],void 0===(s=function(t){if(t.supported){!t.global.hasOwnProperty("AudioContext")&&t.global.hasOwnProperty("webkitAudioContext")&&(t.global.AudioContext=t.global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return t.isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var e=!1,i=new OfflineAudioContext(1,1,44100),n=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var s=i.decodeAudioData(n);s&&t.isFunction(s.then)&&(e=!0)}catch(t){e=!1}e||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,i){this._native_decodeAudioData(t,e,i)}.bind(this))})}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){"use strict";return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var s=i[n];this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(e)}return this},t.Emitter.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);return this.on(t,i),this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\W+/),s=0;s<n.length;s++)if(e=n[s],this._events.hasOwnProperty(e))if(t.isUndef(i))this._events[e]=[];else for(var r=this._events[e],o=0;o<r.length;o++)r[o]===i&&r.splice(o,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),n=0,s=i.length;n<s;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","once","off","emit"];e._events={};for(var n=0;n<i.length;n++){var s=i[n],r=t.Emitter.prototype[s];e[s]=r}return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(2)],void 0===(s=function(t){"use strict";return t.SignalBase=function(){t.AudioNode.call(this)},t.extend(t.SignalBase,t.AudioNode),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor?(e._param.cancelScheduledValues(0),e._param.setValueAtTime(0,0),e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0)),t.AudioNode.prototype.connect.call(this,e,i,n),this},t.SignalBase}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(17),i(49),i(71),i(48),i(70),i(69)],void 0===(s=function(t){"use strict";t.OmniOscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.OmniOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Source),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e="PulseOscillator",i="PWMOscillator",n="FMOscillator",s="AMOscillator",r="FatOscillator";t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},t.OmniOscillator.prototype.restart=function(t){this._oscillator.restart(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===n?t="fm":this._sourceType===s?t="am":this._sourceType===r&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(n),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(s),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(r),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(i):"pulse"===t?this._createNewOscillator(e):(this._createNewOscillator("Oscillator"),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),Object.defineProperty(t.OmniOscillator.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._oscillator.partialCount=t}}),t.OmniOscillator.prototype.set=function(e,i){return"type"===e?this.type=i:t.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype.get=function(t){var e=this._oscillator.get(t);return e.type=this.type,e},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var i=t[e],n=this.now();if(null!==this._oscillator){var s=this._oscillator;s.stop(n),this.context.setTimeout(function(){s.dispose(),s=null},this.blockTime)}this._oscillator=new i,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}});var o={PulseOscillator:"pulse",PWMOscillator:"pwm",Oscillator:"oscillator",FMOscillator:"fm",AMOscillator:"am",FatOscillator:"fat"};return Object.defineProperty(t.OmniOscillator.prototype,"sourceType",{get:function(){return o[this._sourceType]},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),t===o.FMOscillator?this.type="fm"+e:t===o.AMOscillator?this.type="am"+e:t===o.FatOscillator?this.type="fat"+e:t===o.Oscillator?this.type=e:t===o.PulseOscillator?this.type="pulse":t===o.PWMOscillator&&(this.type="pwm")}}),Object.defineProperty(t.OmniOscillator.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this.sourceType!==o.PulseOscillator&&this.sourceType!==o.PWMOscillator&&(this._oscillator.baseType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===r)return this._oscillator.count},set:function(t){this._sourceType===r&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===r)return this._oscillator.spread},set:function(t){this._sourceType===r&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===n||this._sourceType===s)return this._oscillator.modulationType},set:function(t){this._sourceType!==n&&this._sourceType!==s||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===n)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===n||this._sourceType===s)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===i)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(30),i(37),i(1),i(25)],void 0===(s=function(t){"use strict";return t.Synth=function(e){e=t.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.envelope.attack+this.envelope.decay),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,
this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(11),i(31)],void 0===(s=function(t){"use strict";t.Noise=function(){var e=t.defaults(arguments,["type"],t.Noise);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._type},set:function(i){if(this._type!==i){if(!(i in e))throw new TypeError("Tone.Noise: invalid type: "+i);if(this._type=i,this.state===t.State.Started){var n=this.now();this._stop(n),this._start(n)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(i){var n=e[this._type];this._source=new t.BufferSource(n).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(i),Math.random()*(n.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.restart=function(t){return this._stop(t),this._start(t),this},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e={},i={};return Object.defineProperty(e,"pink",{get:function(){if(!i.pink){for(var e=[],n=0;n<2;n++){var s,r,o,a,h,u,l,c=new Float32Array(220500);e[n]=c,s=r=o=a=h=u=l=0;for(var p=0;p<220500;p++){var f=2*Math.random()-1;s=.99886*s+.0555179*f,r=.99332*r+.0750759*f,o=.969*o+.153852*f,a=.8665*a+.3104856*f,h=.55*h+.5329522*f,u=-.7616*u-.016898*f,c[p]=s+r+o+a+h+u+l+.5362*f,c[p]*=.11,l=.115926*f}}i.pink=(new t.Buffer).fromArray(e)}return i.pink}}),Object.defineProperty(e,"brown",{get:function(){if(!i.brown){for(var e=[],n=0;n<2;n++){var s=new Float32Array(220500);e[n]=s;for(var r=0,o=0;o<220500;o++){var a=2*Math.random()-1;s[o]=(r+.02*a)/1.02,r=s[o],s[o]*=3.5}}i.brown=(new t.Buffer).fromArray(e)}return i.brown}}),Object.defineProperty(e,"white",{get:function(){if(!i.white){for(var e=[],n=0;n<2;n++){var s=new Float32Array(220500);e[n]=s;for(var r=0;r<220500;r++)s[r]=2*Math.random()-1}i.white=(new t.Buffer).fromArray(e)}return i.white}}),t.Noise}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(27),i(20),i(2)],void 0===(s=function(t){"use strict";t.Master=function(){t.AudioNode.call(this),t.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination),this.context.master=this}.bind(this))},t.extend(t.Master,t.AudioNode),t.Master.defaults={volume:0,mute:!1},t.Master.prototype.isMaster=!0,Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var e=t.Master;return t.Master=new e,t.Context.on("init",function(i){i.master&&i.master.isMaster?t.Master=i.master:t.Master=new e}),t.Context.on("close",function(t){t.master&&t.master.isMaster&&t.master.dispose()}),t.Master}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(89),i(47)],void 0===(s=function(t){"use strict";return t.FrequencyEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);e=t.defaultArg(e,t.FrequencyEnvelope.defaults),t.ScaledEnvelope.call(this,e),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this.exponent=e.exponent},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:1},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(26),i(61)],void 0===(s=function(t){return t.ScaleExp=function(e,i,n){t.SignalBase.call(this),this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(t.defaultArg(n,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(14),i(2)],void 0===(s=function(t){"use strict";return t.Compressor=function(){var e=t.defaults(arguments,["threshold","ratio"],t.Compressor);t.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor,t.AudioNode),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(2),i(96)],void 0===(s=function(t){"use strict";return t.Analyser=function(){var e=t.defaults(arguments,["type","size"],t.Analyser);t.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser,t.AudioNode),t.Analyser.defaults={size:1024,type:"fft",smoothing:.8},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.prototype.getValue=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(65)],void 0===(s=function(t){return t.TransportTime=function(e,i){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,i);t.Time.call(this,e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._now=function(){return t.Transport.seconds},t.TransportTime}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(64)],void 0===(s=function(t){t.Frequency=function(e,i){if(!(this instanceof t.Frequency))return new t.Frequency(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._expressions=Object.assign({},t.TimeBase.prototype._expressions,{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(e){return"midi"===this._defaultUnits?e:t.Frequency.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(i,n){var s=e[i.toLowerCase()]+12*(parseInt(n)+1);return"midi"===this._defaultUnits?s:t.Frequency.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}}}),t.Frequency.prototype.transpose=function(e){return new this.constructor(this.valueOf()*t.intervalToFrequencyRatio(e))},t.Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},t.Frequency.prototype.toMidi=function(){return t.Frequency.ftom(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.toFrequency(),n=Math.log2(e/t.Frequency.A4),s=Math.round(12*n)+57,r=Math.floor(s/12);return r<0&&(s+=-12*r),i[s%12]+r.toString()},t.Frequency.prototype.toSeconds=function(){return 1/t.TimeBase.prototype.toSeconds.call(this)},t.Frequency.prototype.toFrequency=function(){return t.TimeBase.prototype.toFrequency.call(this)},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._noArg=function(){return 0},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.mtof=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.ftom=function(e){return 69+Math.round(12*Math.log2(e/t.Frequency.A4))},t.Frequency}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(61),i(4),i(2)],void 0===(s=function(t){"use strict";return t.Envelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.AudioNode.call(this),this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.Signal(0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve},t.extend(t.Envelope,t.AudioNode),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),t.Envelope.prototype._getCurve=function(e,i){if(t.isString(e))return e;if(t.isArray(e)){for(var n in t.Envelope.Type)if(t.Envelope.Type[n][i]===e)return n;return e}},t.Envelope.prototype._setCurve=function(e,i,n){if(t.Envelope.Type.hasOwnProperty(n)){var s=t.Envelope.Type[n];t.isObject(s)?this[e]=s[i]:this[e]=s}else{if(!t.isArray(n))throw new Error("Tone.Envelope: invalid curve: "+n);this[e]=n}},Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}}),Object.defineProperty(t.Envelope.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){if(!["linear","exponential"].includes(t))throw new Error("Tone.Envelope: invalid curve: "+t);this._decayCurve=t}}),t.Envelope.prototype.triggerAttack=function(e,i){this.log("triggerAttack",e,i),e=this.toSeconds(e);var n=this.toSeconds(this.attack),s=this.toSeconds(this.decay);i=t.defaultArg(i,1);var r=this.getValueAtTime(e);if(r>0&&(n=(1-r)/(1/n)),"linear"===this._attackCurve)this._sig.linearRampTo(i,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(i,n,e);else if(n>0){this._sig.cancelAndHoldAtTime(e);for(var o=this._attackCurve,a=1;a<o.length;a++)if(o[a-1]<=r&&r<=o[a]){(o=this._attackCurve.slice(a))[0]=r;break}this._sig.setValueCurveAtTime(o,e,n,i)}if(s){var h=i*this.sustain,u=e+n;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampTo(h,s,u+this.sampleTime):"exponential"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(h,u,s)}return this},t.Envelope.prototype.triggerRelease=function(e){this.log("triggerRelease",e),e=this.toSeconds(e);var i=this.getValueAtTime(e);if(i>0){var n=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,n,e);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,n,e);else{var s=this._releaseCurve;t.isArray(s)&&(this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(s,e,n,i))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.SignalBase.prototype.connect,function(){function e(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}var i,n,s=[];for(i=0;i<128;i++)s[i]=Math.sin(i/127*(Math.PI/2));var r=[];for(i=0;i<127;i++){n=i/127;var o=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;r[i]=o/10+.83*n}r[127]=1;var a=[];for(i=0;i<128;i++)a[i]=Math.ceil(i/127*5)/5;var h=[];for(i=0;i<128;i++)n=i/127,h[i]=.5*(1-Math.cos(Math.PI*n));var u,l=[];for(i=0;i<128;i++){n=i/127;var c=4*Math.pow(n,3)+.2,p=Math.cos(c*Math.PI*2*n);l[i]=Math.abs(p*(1-n))}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:e(l),Out:l},cosine:{In:s,Out:(u=s,u.slice(0).reverse())},step:{In:a,Out:e(a)},ripple:{In:r,Out:e(r)},sine:{In:h,Out:e(h)}}}(),t.Envelope.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(17),i(5),i(3)],void 0===(s=function(t){"use strict";return t.FMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.FMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Source),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},t.FMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(t.FMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(17),i(1),i(7),i(3)],void 0===(s=function(t){"use strict";return t.PulseOscillator=function(){var e=t.defaults(arguments,["frequency","width"],t.Oscillator);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain(0),this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Source),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},t.PulseOscillator.prototype.restart=function(t){this._sawtooth.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"baseType",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(16),i(4),i(33)],void 0===(s=function(t){"use strict";return t.Event=function(){var e=t.defaults(arguments,["callback","value"],t.Event);t.call(this),this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=t.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){t.isDefined(e.id)&&t.Transport.clear(e.id);var n=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,t.isNumber(this._loop)&&(i=this._loop*this._getLoopDuration());var s=this._state.getAfter(n);null!==s&&(i=Math.min(i,s.time-n)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,n+i+1),i=t.Ticks(i));var r=t.Ticks(this._getLoopDuration());e.id=t.Transport.scheduleRepeat(this._tick.bind(this),r,t.Ticks(n),i)}else e.id=t.Transport.schedule(this._tick.bind(this),t.Ticks(n))}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(t.Event.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(t.Event.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getBefore(e),n=e;null!==i&&(n=i.time),this._rescheduleEvents(n)}return this},t.Event.prototype.cancel=function(e){return e=t.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){var i=t.Transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(i)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;t.isBoolean(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.get(e);if(null!==i&&i.state===t.State.Started){var n=this._getLoopDuration();return(e-i.time)%n/n}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(13),i(29),i(10),i(3),i(2)],void 0===(s=function(t){"use strict";return t.MidSideMerge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Add,this._timesTwoLeft=new t.Multiply(Math.SQRT1_2),this.side=this.input[1]=new t.Gain,this._right=new t.Subtract,this._timesTwoRight=new t.Multiply(Math.SQRT1_2),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._timesTwoLeft),this._right.connect(this._timesTwoRight),this._timesTwoLeft.connect(this._merge,0,0),this._timesTwoRight.connect(this._merge,0,1)},t.extend(t.MidSideMerge,t.AudioNode),t.MidSideMerge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._timesTwoLeft.dispose(),this._timesTwoLeft=null,this._right.dispose(),this._right=null,this._timesTwoRight.dispose(),this._timesTwoRight=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(29),i(13),i(1),i(19),i(2)],void 0===(s=function(t){"use strict";return t.MidSideSplit=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new t.Split,this._midAdd=new t.Add,this.mid=this.output[0]=new t.Multiply(Math.SQRT1_2),this._sideSubtract=new t.Subtract,this.side=this.output[1]=new t.Multiply(Math.SQRT1_2),this._split.connect(this._midAdd,0,0),this._split.connect(this._midAdd,1,1),this._split.connect(this._sideSubtract,0,0),this._split.connect(this._sideSubtract,1,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)},t.extend(t.MidSideSplit,t.AudioNode),t.MidSideSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midAdd.dispose(),this._midAdd=null,this._sideSubtract.dispose(),this._sideSubtract=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(9),i(2),i(58)],void 0===(s=function(t){"use strict";return t.LowpassCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter);t.AudioNode.call(this),this._combFilter=this.output=new t.FeedbackCombFilter(e.delayTime,e.resonance),this.delayTime=this._combFilter.delayTime,this._lowpass=this.input=new t.Filter({frequency:e.dampening,type:"lowpass",Q:0,rolloff:-12}),this.dampening=this._lowpass.frequency,this.resonance=this._combFilter.resonance,this._lowpass.connect(this._combFilter),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter,t.AudioNode),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this._combFilter.dispose(),this._combFilter=null,this.resonance=null,this.delayTime=null,this._lowpass.dispose(),this._lowpass=null,this.dampening=null,this},t.LowpassCombFilter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(45)],void 0===(s=function(t){return t.Ticks=function(e,i){if(!(this instanceof t.Ticks))return new t.Ticks(e,i);t.TransportTime.call(this,e,i)},t.extend(t.Ticks,t.TransportTime),t.Ticks.prototype._defaultUnits="i",t.Ticks.prototype._now=function(){return t.Transport.ticks},t.Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},t.Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},t.Ticks.prototype._ticksToUnits=function(t){return t},t.Ticks.prototype.toTicks=function(){return this.valueOf()},t.Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},t.Ticks}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(54)],void 0===(s=function(t){return t.TransportEvent=function(e,i){i=t.defaultArg(i,t.TransportEvent.defaults),t.call(this),this.Transport=e,this.id=t.TransportEvent._eventId++,this.time=t.Ticks(i.time),this.callback=i.callback,this._once=i.once},t.extend(t.TransportEvent),t.TransportEvent.defaults={once:!1,callback:t.noOp},t.TransportEvent._eventId=0,t.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},t.TransportEvent.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this},t.TransportEvent}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(85),i(33),i(24),i(14)],void 0===(s=function(t){"use strict";return t.TickSource=function(){var e=t.defaults(arguments,["frequency"],t.TickSource);this.frequency=new t.TickSignal(e.frequency),this._readOnly("frequency"),this._state=new t.TimelineState(t.State.Stopped),this._state.setStateAtTime(t.State.Stopped,0),this._tickOffset=new t.Timeline,this.setTicksAtTime(0,0)},t.extend(t.TickSource),t.TickSource.defaults={frequency:1},Object.defineProperty(t.TickSource.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.TickSource.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),t.isDefined(i)&&this.setTicksAtTime(i,e)),this},t.TickSource.prototype.stop=function(e){if(e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Stopped){var i=this._state.get(e);i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this.setTicksAtTime(0,e),this},t.TickSource.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},t.TickSource.prototype.getTicksAtTime=function(e){e=this.toSeconds(e);var i=this._state.getLastState(t.State.Stopped,e),n={state:t.State.Paused,time:e};this._state.add(n);var s=i,r=0;return this._state.forEachBetween(i.time,e+this.sampleTime,function(e){var i=s.time,n=this._tickOffset.get(e.time);n.time>=s.time&&(r=n.ticks,i=n.time),s.state===t.State.Started&&e.state!==t.State.Started&&(r+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(i)),s=e}.bind(this)),this._state.remove(n),r},Object.defineProperty(t.TickSource.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(t.TickSource.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}}),t.TickSource.prototype.getSecondsAtTime=function(e){e=this.toSeconds(e)
;var i=this._state.getLastState(t.State.Stopped,e),n={state:t.State.Paused,time:e};this._state.add(n);var s=i,r=0;return this._state.forEachBetween(i.time,e+this.sampleTime,function(e){var i=s.time,n=this._tickOffset.get(e.time);n.time>=s.time&&(r=n.seconds,i=n.time),s.state===t.State.Started&&e.state!==t.State.Started&&(r+=e.time-i),s=e}.bind(this)),this._state.remove(n),r},t.TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},t.TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.TickSource.prototype.getTimeOfTick=function(e,i){i=t.defaultArg(i,this.now());var n=this._tickOffset.get(i),s=this._state.get(i),r=Math.max(n.time,s.time),o=this.frequency.getTicksAtTime(r)+e-n.ticks;return this.frequency.getTimeOfTick(o)},t.TickSource.prototype.forEachTickBetween=function(e,i,n){var s=this._state.get(e);if(this._state.forEachBetween(e,i,function(i){s.state===t.State.Started&&i.state!==t.State.Started&&this.forEachTickBetween(Math.max(s.time,e),i.time-this.sampleTime,n),s=i}.bind(this)),e=Math.max(s.time,e),s.state===t.State.Started&&this._state){var r=this.frequency.getTicksAtTime(e),o=(r-this.frequency.getTicksAtTime(s.time))%1;0!==o&&(o=1-o);for(var a=this.frequency.getTimeOfTick(r+o),h=null;a<i&&this._state;){try{n(a,Math.round(this.getTicksAtTime(a)))}catch(t){h=t;break}this._state&&(a+=this.frequency.getDurationOfTicks(1,a))}}if(h)throw h;return this},t.TickSource.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this},t.TickSource}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(90),i(13),i(1),i(4),i(18),i(2)],void 0===(s=function(t){"use strict";return t.Follower=function(){var e=t.defaults(arguments,["smoothing"],t.Follower);t.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=0,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._smoothing=e.smoothing,this.input.connect(this._delay,this._sub),this.input.connect(this._sub,0,1),this._sub.chain(this._abs,this._filter,this.output),this.smoothing=e.smoothing},t.extend(t.Follower,t.AudioNode),t.Follower.defaults={smoothing:.05},Object.defineProperty(t.Follower.prototype,"smoothing",{get:function(){return this._smoothing},set:function(e){this._smoothing=e,this._filter.frequency.value=.5*t.Time(e).toFrequency()}}),t.Follower.prototype.connect=t.SignalBase.prototype.connect,t.Follower.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this},t.Follower}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(42),i(1),i(14),i(18),i(3),i(2)],void 0===(s=function(t){"use strict";return t.FeedbackCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance"],t.FeedbackCombFilter);t.AudioNode.call(this),this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter,t.AudioNode),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(9),i(1),i(3),i(2)],void 0===(s=function(t){"use strict";return t.MultibandSplit=function(){var e=t.defaults(arguments,["lowFrequency","highFrequency"],t.MultibandSplit);t.AudioNode.call(this),this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit,t.AudioNode),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(23),i(10),i(19),i(92),i(1),i(22),i(28),i(2)],void 0===(s=function(t){"use strict";return t.Panner=function(e){t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan,this.pan.value=t.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner,t.AudioNode),t.Panner.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("pan"),this._panner.disconnect(),this._panner=null,this.pan=null,this},t.Panner}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7)],void 0===(s=function(t){"use strict";return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(20),i(66)],void 0===(s=function(t){return t.OfflineContext=function(e,i,n){var s=new OfflineAudioContext(e,i*n,n);t.Context.call(this,{context:s,clockSource:"offline",lookAhead:0,updateInterval:128/n}),this._duration=i,this._currentTime=0},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype.resume=function(){return Promise.resolve()},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=this.blockTime;return this._context.startRendering()},t.OfflineContext.prototype.close=function(){return this._context=null,Promise.resolve()},t.OfflineContext}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(62)],void 0===(s=function(t){if(t.supported){var e=navigator.userAgent.toLowerCase();e.includes("safari")&&!e.includes("chrome")&&e.includes("mobile")&&(t.OfflineContext.prototype.createBufferSource=function(){var t=this._context.createBufferSource(),e=t.start;return t.start=function(i){this.setTimeout(function(){e.call(t,i)}.bind(this),0)}.bind(this),t})}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){return t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._val=e,this._units=i,t.isUndef(this._units)&&t.isString(this._val)&&parseFloat(this._val)==this._val&&"+"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(e&&e.constructor===this.constructor)this._val=e._val,this._units=e._units;else if(e instanceof t.TimeBase)switch(this._defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break;default:throw new Error("Unrecognized default units "+this._defaultUnits)}},t.extend(t.TimeBase),t.TimeBase.prototype._expressions={n:{regexp:/^(\d+)n(\.?)$/i,method:function(t,e){t=parseInt(t);var i="."===e?1.5:1;return 1===t?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/t)*i}},t:{regexp:/^(\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._getBpm=function(){return t.Transport?t.Transport.bpm.value:120},t.TimeBase.prototype._getTimeSignature=function(){return t.Transport?t.Transport.timeSignature:4},t.TimeBase.prototype._getPPQ=function(){return t.Transport?t.Transport.PPQ:192},t.TimeBase.prototype._now=function(){return this.now()},t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},t.TimeBase.prototype._noArg=function(){return this._now()},t.TimeBase.prototype.valueOf=function(){if(t.isUndef(this._val))return this._noArg();if(t.isString(this._val)&&t.isUndef(this._units)){for(var e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(t.isObject(this._val)){var i=0;for(var n in this._val){var s=this._val[n];i+=new this.constructor(n).valueOf()*s}return i}if(t.isDefined(this._units)){var r=this._expressions[this._units],o=this._val.toString().trim().match(r.regexp);return o?r.method.apply(this,o.slice(1)):r.method.call(this,parseFloat(this._val))}return this._val},t.TimeBase.prototype.toSeconds=function(){return this.valueOf()},t.TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.TimeBase.prototype.dispose=function(){this._val=null,this._units=null},t.TimeBase}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(64),i(46)],void 0===(s=function(t){return t.Time=function(e,i){if(!(this instanceof t.Time))return new t.Time(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._expressions=Object.assign({},t.TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(e){if(t.Transport){var i=new this.constructor(e);return this._secondsToUnits(t.Transport.nextSubdivision(i))}return 0}},now:{regexp:/^\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),t.Time.prototype.quantize=function(e,i){i=t.defaultArg(i,1);var n=new this.constructor(e),s=this.valueOf();return s+(Math.round(s/n)*n-s)*i},t.Time.prototype.toNotation=function(){for(var e=this.toSeconds(),i=["1m"],n=1;n<8;n++){var s=Math.pow(2,n);i.push(s+"n."),i.push(s+"n"),i.push(s+"t")}i.push("0");var r=i[0],o=t.Time(i[0]).toSeconds();return i.forEach(function(i){var n=t.Time(i).toSeconds();Math.abs(n-e)<Math.abs(o-e)&&(r=i,o=n)}),r},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var i=Math.floor(e/this._getTimeSignature()),n=e%1*4;return e=Math.floor(e)%this._getTimeSignature(),(n=n.toString()).length>3&&(n=parseFloat(parseFloat(n).toFixed(3))),[i,e,n].join(":")},t.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMidi=function(){return t.Frequency.ftom(this.toFrequency())},t.Time}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){if(t.supported){!t.global.hasOwnProperty("OfflineAudioContext")&&t.global.hasOwnProperty("webkitOfflineAudioContext")&&(t.global.OfflineAudioContext=t.global.webkitOfflineAudioContext);var e=new OfflineAudioContext(1,1,44100).startRendering();e&&t.isFunction(e.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(11),i(6),i(56),i(31)],void 0===(s=function(t){"use strict";return t.Player=function(e){var i;e instanceof t.Buffer&&e.loaded?(e=e.get(),i=t.Player.defaults):i=t.defaults(arguments,["url","onload"],t.Player),t.Source.call(this,i),this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this._activeSources=[],this.fadeIn=i.fadeIn,this.fadeOut=i.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){(e=t.defaultArg(e,t.noOp))(this),this.autostart&&this.start()},t.Player.prototype._onSourceEnd=function(e){var i=this._activeSources.indexOf(e);this._activeSources.splice(i,1),0!==this._activeSources.length||this._synced||this._state.setStateAtTime(t.State.Stopped,t.now())},t.Player.prototype._start=function(e,i,n){i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toSeconds(i);var s=t.defaultArg(n,Math.max(this._buffer.duration-i,0));s=this.toSeconds(s),s/=this._playbackRate,e=this.toSeconds(e);var r=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output);return this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+s),this._activeSources.push(r),this._loop&&t.isUndef(n)?r.start(e,i):r.start(e,i,s-this.toSeconds(this.fadeOut)),this},t.Player.prototype._stop=function(t){return t=this.toSeconds(t),this._activeSources.forEach(function(e){e.stop(t)}),this},t.Player.prototype.restart=function(t,e,i){return this._stop(t),this._start(t,e,i),this},t.Player.prototype.seek=function(e,i){return i=this.toSeconds(i),this._state.getValueAtTime(i)===t.State.Started&&(e=this.toSeconds(e),this._stop(i),this._start(i,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(function(t){t.loop=e}),e)){var i=this._state.getNextState(t.State.Stopped,this.now());i&&this._state.cancel(i.time)}}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e;var i=this.now(),n=this._state.getNextState(t.State.Stopped,i);n&&this._state.cancel(n.time),this._activeSources.forEach(function(t){t.cancelStop(),t.playbackRate.setValueAtTime(e,i)})}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,t.Source.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this},t.Player}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(30),i(41),i(37),i(1),i(9),i(25)],void 0===(s=function(t){"use strict";return t.MonoSynth=function(e){e=t.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filter.frequency.value=5e3,this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.envelope.attack+this.envelope.decay),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(17),i(5),i(3)],void 0===(s=function(t){"use strict";return t.FatOscillator=function(){var e=t.defaults(arguments,["frequency","type","spread"],t.FatOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Source),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth",partials:[],partialCount:0},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype.restart=function(t){t=this.toSeconds(t),this._forEach(function(e){e.restart(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach(function(t,n){t.detune.value=e+i*n})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var i=0;i<e;i++){var n=new t.Oscillator;this.type===t.Oscillator.Type.Custom?n.partials=this._partials:n.type=this._type,n.partialCount=this._partialCount,n.phase=this._phase+i/e*360,n.volume.value=-6-1.1*e,this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.connect(this.output),this._oscillators[i]=n}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){e.baseType=t}),this._type=this._oscillators[0].type}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),Object.defineProperty(t.FatOscillator.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){e.partialCount=t}),this._type=this._oscillators[0].type}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(17),i(5),i(3),i(22)],void 0===(s=function(t){"use strict";return t.AMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.AMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},t.AMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(t.AMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(49),i(17),i(5)],void 0===(s=function(t){"use strict";return t.PWMOscillator=function(){var e=t.defaults(arguments,["frequency","modulationFrequency"],t.PWMOscillator);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Source),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},t.PWMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._pulse.restart(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"baseType",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(50),i(4),i(16)],void 0===(s=function(t){"use strict";return t.Part=function(){var e=t.defaults(arguments,["callback","events"],t.Part);t.Event.call(this,e),this._events=[];for(var i=0;i<e.events.length;i++)Array.isArray(e.events[i])?this.add(e.events[i][0],e.events[i][1]):this.add(e.events[i])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},t.Part.prototype.start=function(e,i){var n=this.toTicks(e);return this._state.getValueAtTime(n)!==t.State.Started&&(i=this._loop?t.defaultArg(i,this._loopStart):t.defaultArg(i,0),i=this.toTicks(i),this._state.add({state:t.State.Started,time:n,offset:i}),this._forEach(function(t){this._startNote(t,n,i)})),this},t.Part.prototype._startNote=function(e,i,n){i-=n,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<n&&(i+=this._getLoopDuration()),e.start(t.Ticks(i))):e.startOffset<this._loopStart&&e.startOffset>=n&&(e.loop=!1,e.start(t.Ticks(i))):e.startOffset>=n&&e.start(t.Ticks(i))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.cancel(i),this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,i){e=t.TransportTime(e);for(var n=t.Ticks(1).toSeconds(),s=0;s<this._events.length;s++){var r=this._events[s];if(Math.abs(e.toTicks()-r.startOffset)<n)return t.isDefined(i)&&(r.value=i),r}return t.isDefined(i)?(this.add(e,i),this._events[this._events.length-1]):null},t.Part.prototype.add=function(e,i){var n;return e.hasOwnProperty("time")&&(e=(i=e).time),e=this.toTicks(e),i instanceof t.Event?(n=i).callback=this._tick.bind(this):n=new t.Event({callback:this._tick.bind(this),value:i}),n.startOffset=e,n.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(n),this._restartEvent(n),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(i){i.state===t.State.Started?this._startNote(e,i.time,i.offset):e.stop(t.Ticks(i.time))}.bind(this))},t.Part.prototype.remove=function(e,i){e.hasOwnProperty("time")&&(e=(i=e).time),e=this.toTicks(e);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s.startOffset===e&&(t.isUndef(i)||t.isDefined(i)&&s.value===i)&&(this._events.splice(n,1),s.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},t.Part.prototype._forEach=function(e,i){if(this._events){i=t.defaultArg(i,this);for(var n=this._events.length-1;n>=0;n--){var s=this._events[n];s instanceof t.Part?s._forEach(e,i):e.call(i,s)}}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.Ticks(this._loopEnd).toSeconds()},
set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return t.Event.prototype.dispose.call(this),this.removeAll(),this.callback=null,this._events=null,this},t.Part}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(50)],void 0===(s=function(t){return t.Loop=function(){var e=t.defaults(arguments,["callback","interval"],t.Loop);t.call(this),this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(15),i(32)],void 0===(s=function(t){"use strict";return t.StereoXFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.StereoEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(52),i(51)],void 0===(s=function(t){"use strict";return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(11),i(8)],void 0===(s=function(t){"use strict";return t.Convolver=function(){var e=t.defaults(arguments,["url","onload"],t.Convolver);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer(e.url,function(t){this.buffer=t.get(),e.onload()}.bind(this)),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp,normalize:!0},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){this._buffer.set(t),this._convolver.buffer&&(this.effectSend.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.connectEffect(this._convolver)),this._convolver.buffer=this._buffer.get()}}),Object.defineProperty(t.Convolver.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this._convolver.disconnect(),this._convolver=null,this},t.Convolver}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7),i(5),i(13)],void 0===(s=function(t){"use strict";return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(16),i(11),i(62),i(40)],void 0===(s=function(t){return t.Offline=function(e,i){var n=t.context.sampleRate,s=t.context,r=new t.OfflineContext(2,i,n);t.context=r;var o=e(t.Transport),a=null;return a=o&&t.isFunction(o.then)?o.then(function(){return r.render()}):r.render(),t.context=s,a.then(function(e){return new t.Buffer(e)})},t.Offline}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(11)],void 0===(s=function(t){return t.Buffers=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,["onload","baseUrl"],t.Buffers);for(var s in t.call(this),this._buffers={},this.baseUrl=n.baseUrl,this._loadingCount=0,e)this._loadingCount++,this.add(s,e[s],this._bufferLoaded.bind(this,n.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:""},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),t.Buffers.prototype.add=function(e,i,n){return n=t.defaultArg(n,t.noOp),i instanceof t.Buffer?(this._buffers[e]=i,n(this)):i instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(i),n(this)):t.isString(i)&&(this._buffers[e]=new t.Buffer(this.baseUrl+i,n)),this},t.Buffers.prototype.dispose=function(){for(var e in t.prototype.dispose.call(this),this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){"use strict";return t.CtrlPattern=function(){var e=t.defaults(arguments,["values","type"],t.CtrlPattern);t.call(this),this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?++this.index>=this.values.length&&(this.index=0):e===t.CtrlPattern.Type.Down?--this.index<0&&(this.index=this.values.length-1):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?++this.index>=this.values.length&&(this.index=0,this._shuffleValues()):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){t.supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var s=0;s<n.length;s++)n[s+i]=t[s]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var n=this.getChannelData(e);i=i||0;for(var s=0;s<t.length;s++)t[s]=n[s+i]}))}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(11),i(6),i(3),i(2)],void 0===(s=function(t){return t.OscillatorNode=function(){var e=t.defaults(arguments,["frequency","type"],t.OscillatorNode);t.AudioNode.call(this,e),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain(0),this._oscillator=this.context.createOscillator(),this._oscillator.connect(this._gainNode),this.type=e.type,this.frequency=new t.Param({param:this._oscillator.frequency,units:t.Type.Frequency,value:e.frequency}),this.detune=new t.Param({param:this._oscillator.detune,units:t.Type.Cents,value:e.detune}),this._gain=1},t.extend(t.OscillatorNode,t.AudioNode),t.OscillatorNode.defaults={frequency:440,detune:0,type:"sine",onended:t.noOp},Object.defineProperty(t.OscillatorNode.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),t.OscillatorNode.prototype.getStateAtTime=function(e){return e=this.toSeconds(e),-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?t.State.Started:t.State.Stopped},t.OscillatorNode.prototype.start=function(t){if(this.log("start",t),-1!==this._startTime)throw new Error("cannot call OscillatorNode.start more than once");return this._startTime=this.toSeconds(t),this._oscillator.start(this._startTime),this._gainNode.gain.setValueAtTime(1,this._startTime),this},t.OscillatorNode.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},t.OscillatorNode.prototype.stop=function(t){return this.log("stop",t),this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop(),this._stopTime=this.toSeconds(t),this._stopTime>this._startTime?(this._gainNode.gain.setValueAtTime(0,this._stopTime),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){this._oscillator.stop(this.now()),this.onended()}.bind(this),this._stopTime-this.context.currentTime)):this._gainNode.gain.cancelScheduledValues(this._startTime),this},t.OscillatorNode.prototype.cancelStop=function(){return-1!==this._startTime&&(this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1),this},Object.defineProperty(t.OscillatorNode.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}}),t.OscillatorNode.prototype.dispose=function(){return this.context.clearTimeout(this._timeout),t.AudioNode.prototype.dispose.call(this),this.onended=null,this._oscillator.disconnect(),this._oscillator=null,this._gainNode.dispose(),this._gainNode=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this},t.OscillatorNode}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(55),i(54)],void 0===(s=function(t){return t.TransportRepeatEvent=function(e,i){t.TransportEvent.call(this,e,i),i=t.defaultArg(i,t.TransportRepeatEvent.defaults),this.duration=t.Ticks(i.duration),this._interval=t.Ticks(i.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},t.extend(t.TransportRepeatEvent,t.TransportEvent),t.TransportRepeatEvent.defaults={duration:1/0,interval:1},t.TransportRepeatEvent.prototype.invoke=function(e){this._createEvents(e),t.TransportEvent.prototype.invoke.call(this,e)},t.TransportRepeatEvent.prototype._createEvents=function(e){var i=this.Transport.getTicksAtTime(e);i>=this.time&&i>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick)))},t.TransportRepeatEvent.prototype._restart=function(e){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var i=this.Transport.getTicksAtTime(e);i>this.time&&(this._nextTick=this.time+Math.ceil((i-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.Ticks(this._nextTick))},t.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,t.TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this},t.TransportRepeatEvent}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(4)],void 0===(s=function(t){"use strict";t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(i){if(t.isUndef(i.time)||t.isUndef(i.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");i.time=i.time.valueOf();var n=new e(i.time,i.time+i.duration,i);for(null===this._root?this._root=n:this._root.insert(n),this._length++;null!==n;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var n=e[i];if(n.event===t){this._removeNode(n),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),n=t.right;t.right=n.left,n.left=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),n=t.left;t.left=n.right,n.right=t,null!==e?i?e.left=n:e.right=n:this._setRoot(n)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],n=1;n<e.length;n++)e[n].low>i.low&&(i=e[n]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var n=e[i].event;n&&t(n)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var n=i.length-1;n>=0;n--){var s=i[n].event;s&&e(s)}}return this},t.IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var n=i.length-1;n>=0;n--)e(i[n].event)}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1)],void 0===(s=function(t){function e(t){return function(e,i){i=this.toSeconds(i),t.apply(this,arguments);var n=this._events.get(i),s=this._events.previousEvent(n),r=this._getTicksUntilEvent(s,i);return n.ticks=Math.max(r,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.Signal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:t.Param.AutomationType.SetValue,time:0,value:e})},t.extend(t.TickSignal,t.Signal),t.TickSignal.prototype.setValueAtTime=e(t.Signal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.Signal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var n=this._events.get(e),s=Math.round(Math.max(1/i,1)),r=0;r<=s;r++){var o=i*r+e,a=this._exponentialApproach(n.time,n.value,t,i,o);this.linearRampToValueAtTime(this._toUnits(a),o)}return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);var i=this._events.get(e);null===i&&(i={value:this._initialValue,time:0});for(var n=Math.round(Math.max(10*(e-i.time),1)),s=(e-i.time)/n,r=0;r<=n;r++){var o=s*r+i.time,a=this._exponentialInterpolate(i.time,i.value,e,t,o);this.linearRampToValueAtTime(this._toUnits(a),o)}return this},t.TickSignal.prototype._getTicksUntilEvent=function(e,i){if(null===e)e={ticks:0,time:0};else if(t.isUndef(e.ticks)){var n=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(n,e.time)}var s=this.getValueAtTime(e.time),r=this.getValueAtTime(i);return this._events.get(i).time===i&&this._events.get(i).type===t.Param.AutomationType.SetValue&&(r=this.getValueAtTime(i-this.sampleTime)),.5*(i-e.time)*(s+r)+e.ticks},t.TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var i=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(i&&i.ticks===e)return i.time;if(i&&n&&n.type===t.Param.AutomationType.Linear&&i.value!==n.value){var s=this.getValueAtTime(i.time),r=(this.getValueAtTime(n.time)-s)/(n.time-i.time),o=Math.sqrt(Math.pow(s,2)-2*r*(i.ticks-e)),a=(-s+o)/r;return(a>0?a:(-s-o)/r)+i.time}return i?0===i.value?1/0:i.time+(e-i.ticks)/i.value:e/this._initialValue},t.TickSignal.prototype.ticksToTime=function(e,i){return i=this.toSeconds(i),new t.Time(this.getDurationOfTicks(e,i))},t.TickSignal.prototype.timeToTicks=function(e,i){i=this.toSeconds(i),e=this.toSeconds(e);var n=this.getTicksAtTime(i),s=this.getTicksAtTime(i+e);return new t.Ticks(s-n)},t.TickSignal}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(56),i(33),i(35),i(20)],void 0===(s=function(t){"use strict";return t.Clock=function(){var e=t.defaults(arguments,["callback","frequency"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._tickSource=new t.TickSource(e.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly("frequency"),this._state=new t.TimelineState(t.State.Stopped),this._state.setStateAtTime(t.State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,i){return this.context.resume(),e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._tickSource.start(e,i),e<this._lastUpdate&&this.emit("start",e,i)),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Paused,e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(t.Clock.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(t.Clock.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),t.Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},t.Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},t.Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},t.Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(i+t,e)},t.Clock.prototype._loop=function(){var e=this._lastUpdate,i=this.now();this._lastUpdate=i,e!==i&&(this._state.forEachBetween(e,i,function(e){switch(e.state){case t.State.Started:var i=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,i);break;case t.State.Stopped:0!==e.time&&this.emit("stop",e.time);break;case t.State.Paused:this.emit("pause",e.time)}}.bind(this)),this._tickSource.forEachTickBetween(e,i,function(t,e){this.callback(t,e)}.bind(this)))},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(1),i(5),i(7)],void 0===(s=function(t){"use strict";return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(87),i(13),i(1)],void 0===(s=function(t){"use strict";return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz),this.proxy=!1},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(47),i(26)],void 0===(s=function(t){"use strict";return t.ScaledEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.Envelope.call(this,e),e=t.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7),i(36)],void 0===(s=function(t){"use strict";return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:Math.abs(t)},1024)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(3),i(2)],void 0===(s=function(t){return t.Solo=function(){var e=t.defaults(arguments,["solo"],t.Solo);t.AudioNode.call(this),this.input=this.output=new t.Gain,this._soloBind=this._soloed.bind(this),this.context.on("solo",this._soloBind),this.solo=e.solo},t.extend(t.Solo,t.AudioNode),t.Solo.defaults={solo:!1},Object.defineProperty(t.Solo.prototype,"solo",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit("solo",this)}}),
Object.defineProperty(t.Solo.prototype,"muted",{get:function(){return 0===this.input.gain.value}}),t.Solo.prototype._addSolo=function(){t.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},t.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},t.Solo.prototype._isSoloed=function(){return!!t.isArray(this.context._currentSolo)&&0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this)},t.Solo.prototype._noSolos=function(){return!t.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},t.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},t.Solo.prototype.dispose=function(){return this.context.off("solo",this._soloBind),this._removeSolo(),this._soloBind=null,t.AudioNode.prototype.dispose.call(this),this},t.Solo}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7),i(10),i(28),i(19),i(3),i(1),i(20)],void 0===(s=function(t){if(t.supported&&!t.global.AudioContext.prototype.createStereoPanner){var e=function(e){this.context=e,this.pan=new t.Signal(0,t.Type.AudioRange);var i=new t.WaveShaper(function(e){return t.equalPowerScale((e+1)/2)},4096),n=new t.WaveShaper(function(e){return t.equalPowerScale(1-(e+1)/2)},4096),s=new t.Gain,r=new t.Gain,o=this.input=new t.Split;o._splitter.channelCountMode="explicit",(new t.Zero).fan(i,n);var a=this.output=new t.Merge;o.left.chain(s,a.left),o.right.chain(r,a.right),this.pan.chain(n,s.gain),this.pan.chain(i,r.gain)};e.prototype.disconnect=function(){this.output.disconnect.apply(this.output,arguments)},e.prototype.connect=function(){this.output.connect.apply(this.output,arguments)},AudioContext.prototype.createStereoPanner=function(){return new e(this)},t.Context.prototype.createStereoPanner=function(){return new e(this)}}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7)],void 0===(s=function(t){"use strict";return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(5),i(1)],void 0===(s=function(t){"use strict";return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(60),i(27),i(2)],void 0===(s=function(t){"use strict";return t.PanVol=function(){var e=t.defaults(arguments,["pan","volume"],t.PanVol);t.AudioNode.call(this),this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,this._readOnly(["pan","volume"])},t.extend(t.PanVol,t.AudioNode),t.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(t.PanVol.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.PanVol.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(34)],void 0===(s=function(t){t.supported&&(AnalyserNode.prototype.getFloatTimeDomainData||(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var i=0;i<e.length;i++)t[i]=(e[i]-128)/128}))}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(34),i(63),i(20),i(3)],void 0===(s=function(t){if(t.supported&&!t.global.AudioContext.prototype.createConstantSource){var e=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode="explicit",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var s=this._output=t.createGain();this.offset=s.gain,this._bufferSource.connect(s)};e.prototype.start=function(t){return this._bufferSource.start(t),this},e.prototype.stop=function(t){return this._bufferSource.stop(t),this},e.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},e.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new e(this)},t.Context.prototype.createConstantSource=function(){return new e(this)}}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(34)],void 0===(s=function(t){if(t.supported&&!t.global.AudioContext.prototype._native_createWaveShaper){var e=navigator.userAgent.toLowerCase();if(e.includes("safari")&&!e.includes("chrome")){var i=function(t){for(var e in this._internalNode=this.input=this.output=t._native_createWaveShaper(),this._curve=null,this._internalNode)this._defineProperty(this._internalNode,e)};Object.defineProperty(i.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t;var e=new Float32Array(t.length+1);e.set(t,1),e[0]=t[0],this._internalNode.curve=e}}),i.prototype._defineProperty=function(e,i){t.isUndef(this[i])&&Object.defineProperty(this,i,{get:function(){return"function"==typeof e[i]?e[i].bind(e):e[i]},set:function(t){e[i]=t}})},t.global.AudioContext.prototype._native_createWaveShaper=t.global.AudioContext.prototype.createWaveShaper,t.global.AudioContext.prototype.createWaveShaper=function(){return new i(this)}}}}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(46)],void 0===(s=function(t){return t.Midi=function(e,i){if(!(this instanceof t.Midi))return new t.Midi(e,i);t.Frequency.call(this,e,i)},t.extend(t.Midi,t.Frequency),t.Midi.prototype._defaultUnits="midi",t.Midi.prototype._frequencyToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._frequencyToUnits.call(this,e))},t.Midi.prototype._ticksToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._ticksToUnits.call(this,e))},t.Midi.prototype._beatsToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._beatsToUnits.call(this,e))},t.Midi.prototype._secondsToUnits=function(e){return t.Frequency.ftom(t.Frequency.prototype._secondsToUnits.call(this,e))},t.Midi.prototype.toMidi=function(){return this.valueOf()},t.Midi.prototype.toFrequency=function(){return t.Frequency.mtof(this.toMidi())},t.Midi.prototype.transpose=function(t){return new this.constructor(this.toMidi()+t)},t.Midi}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(27),i(2)],void 0===(s=function(t){"use strict";return t.UserMedia=function(){var e=t.defaults(arguments,["volume"],t.UserMedia);t.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this.mute=e.mute},t.extend(t.UserMedia,t.AudioNode),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(e){return this.state===t.State.Started&&this.close(),t.UserMedia.enumerateDevices().then(function(i){var n;if(t.isNumber(e))n=i[e];else if(!(n=i.find(function(t){return t.label===e||t.deviceId===e}))&&i.length>0)n=i[0];else if(!n&&t.isDefined(e))throw new Error("Tone.UserMedia: no matching device: "+e);this._device=n;var s={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};return n&&(s.audio.deviceId=n.deviceId),navigator.mediaDevices.getUserMedia(s).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return"audioinput"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,"state",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,"deviceId",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,"groupId",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,"label",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.close(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,"supported",{get:function(){return t.isDefined(navigator.mediaDevices)&&t.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(67),i(27),i(2)],void 0===(s=function(t){"use strict";return t.Players=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,["onload"],t.Players);for(var s in t.AudioNode.call(this,n),this._volume=this.output=new t.Volume(n.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=n.mute,this._players={},this._loadingCount=0,this._fadeIn=n.fadeIn,this._fadeOut=n.fadeOut,e)this._loadingCount++,this.add(s,e[s],this._bufferLoaded.bind(this,n.onload))},t.extend(t.Players,t.AudioNode),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,"state",{get:function(){var e=!1;return this._forEach(function(i){e=e||i.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,i,n){return this._players[e]=new t.Player(i,n).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(6),i(11),i(31)],void 0===(s=function(t){return t.GrainPlayer=function(){var e=t.defaults(arguments,["url","onload"],t.GrainPlayer);t.Source.call(this,e),this.buffer=new t.Buffer(e.url,e.onload),this._clock=new t.Clock(this._tick.bind(this),e.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(e,i,n){i=t.defaultArg(i,0),i=this.toSeconds(i),e=this.toSeconds(e),this._offset=i,this._clock.start(e),n&&this.stop(e+this.toSeconds(n))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},t.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t)})},t.GrainPlayer.prototype._tick=function(e){if(!this.loop&&this._offset>this.buffer.duration)this.stop(e);else{var i=this._offset<this._overlap?0:this._overlap,n=new t.BufferSource({buffer:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:t.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);n.start(e,this._offset),this._offset+=this.grainSize,n.stop(e+this.grainSize/this.playbackRate),this._activeSources.push(n),n.onended=function(){var t=this._activeSources.indexOf(n);-1!==t&&this._activeSources.splice(t,1)}.bind(this)}},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loaded",{get:function(){return this.buffer.loaded}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},t.GrainPlayer}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(16),i(1),i(45)],void 0===(s=function(t){return t.TransportTimelineSignal=function(){t.Signal.apply(this,arguments),this.output=this._outputSig=new t.Signal(this._initialValue),this._lastVal=this.value,this._synced=t.Transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._bindAnchorValue=this._anchorValue.bind(this),t.Transport.on("start stop pause",this._bindAnchorValue),this._events.memory=1/0},t.extend(t.TransportTimelineSignal,t.Signal),t.TransportTimelineSignal.prototype._onTick=function(e){var i=this.getValueAtTime(t.Transport.seconds);this._lastVal!==i&&(this._lastVal=i,this._outputSig.linearRampToValueAtTime(i,e))},t.TransportTimelineSignal.prototype._anchorValue=function(e){var i=this.getValueAtTime(t.Transport.seconds);return this._lastVal=i,this._outputSig.cancelScheduledValues(e),this._outputSig.setValueAtTime(i,e),this},t.TransportTimelineSignal.prototype.getValueAtTime=function(e){return e=t.TransportTime(e),t.Signal.prototype.getValueAtTime.call(this,e)},t.TransportTimelineSignal.prototype.setValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.setValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.linearRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return i=t.TransportTime(i),t.Signal.prototype.exponentialRampToValueAtTime.call(this,e,i),this},t.TransportTimelineSignal.prototype.setTargetAtTime=function(e,i,n){return i=t.TransportTime(i),t.Signal.prototype.setTargetAtTime.call(this,e,i,n),this},t.TransportTimelineSignal.prototype.cancelScheduledValues=function(e){return e=t.TransportTime(e),t.Signal.prototype.cancelScheduledValues.call(this,e),this},t.TransportTimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,s){return i=t.TransportTime(i),n=t.TransportTime(n),t.Signal.prototype.setValueCurveAtTime.call(this,e,i,n,s),this},t.TransportTimelineSignal.prototype.cancelAndHoldAtTime=function(e){return t.Signal.prototype.cancelAndHoldAtTime.call(this,t.TransportTime(e))},t.TransportTimelineSignal.prototype.dispose=function(){t.Transport.clear(this._synced),t.Transport.off("start stop pause",this._syncedCallback),this._events.cancel(0),t.Signal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},t.TransportTimelineSignal}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(29),i(5)],void 0===(s=function(t){"use strict";return t.Normalize=function(e,i){t.SignalBase.call(this),this._inputMin=t.defaultArg(e,0),this._inputMax=t.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(7),i(1)],void 0===(s=function(t){"use strict";return t.GainToAudio=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){t.supported&&(OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable))}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(21),i(79),i(31)],void 0===(s=function(t){return t.Sampler=function(e){var i=Array.prototype.slice.call(arguments);i.shift();var n=t.defaults(i,["onload","baseUrl"],t.Sampler);t.Instrument.call(this,n);var s={};for(var r in e)if(t.isNote(r))s[t.Frequency(r).toMidi()]=e[r];else{if(isNaN(parseFloat(r)))throw new Error("Tone.Sampler: url keys must be the note's pitch");s[r]=e[r]}this._buffers=new t.Buffers(s,n.onload,n.baseUrl),this._activeSources={},this.attack=n.attack,this.release=n.release,this.curve=n.curve},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={attack:0,release:.1,onload:t.noOp,baseUrl:"",curve:"exponential"},t.Sampler.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}return null},t.Sampler.prototype.triggerAttack=function(e,i,n){this.log("triggerAttack",e,i,n),Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){var r=t.Frequency(e[s]).toMidi(),o=this._findClosest(r);if(null!==o){var a=r-o,h=this._buffers.get(a),u=t.intervalToFrequencyRatio(o),l=new t.BufferSource({buffer:h,playbackRate:u,fadeIn:this.attack,fadeOut:this.release,curve:this.curve}).connect(this.output);l.start(i,0,h.duration/u,n),t.isArray(this._activeSources[r])||(this._activeSources[r]=[]),this._activeSources[r].push(l),l.onended=function(){if(this._activeSources&&this._activeSources[r]){var t=this._activeSources[r].indexOf(l);-1!==t&&this._activeSources[r].splice(t,1)}}.bind(this)}}return this},t.Sampler.prototype.triggerRelease=function(e,i){this.log("triggerRelease",e,i),Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var s=t.Frequency(e[n]).toMidi();if(this._activeSources[s]&&this._activeSources[s].length){var r=this._activeSources[s].shift();i=this.toSeconds(i),r.stop(i)}}return this},t.Sampler.prototype.releaseAll=function(t){for(var e in t=this.toSeconds(t),this._activeSources)for(var i=this._activeSources[e];i.length;)i.shift().stop(t);return this},t.Sampler.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},t.Sampler.prototype.triggerAttackRelease=function(e,i,n,s){if(n=this.toSeconds(n),this.triggerAttack(e,n,s),t.isArray(i)&&t.isArray(e))for(var r=0;r<e.length;r++){var o=i[Math.min(r,i.length-1)];this.triggerRelease(e[r],n+this.toSeconds(o))}else this.triggerRelease(e,n+this.toSeconds(i));return this},t.Sampler.prototype.add=function(e,i,n){if(t.isNote(e)){var s=t.Frequency(e).toMidi();this._buffers.add(s,i,n)}else{if(isNaN(parseFloat(e)))throw new Error("Tone.Sampler: note must be the note's pitch. Instead got "+e);this._buffers.add(e,i,n)}},Object.defineProperty(t.Sampler.prototype,"loaded",{get:function(){return this._buffers.loaded}}),t.Sampler.prototype.dispose=function(){for(var e in t.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null,this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this._activeSources=null,this},t.Sampler}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(38),i(6)],void 0===(s=function(t){"use strict";return t.PolySynth=function(){var e=t.defaults(arguments,["polyphony","voice"],t.PolySynth);t.Instrument.call(this,e),(e=t.defaultArg(e,t.Instrument.defaults)).polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this.assert(e.polyphony>0,"polyphony must be greater than 0"),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var i=0;i<e.polyphony;i++){var n=new e.voice(arguments[2],arguments[3]);if(!(n instanceof t.Monophonic))throw new Error("Synth constructor must be instance of Tone.Monophonic");this.voices[i]=n,n.index=i,n.connect(this.output),n.hasOwnProperty("detune")&&this.detune.connect(n.detune)}},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype._getClosestVoice=function(e,i){return this.voices.find(function(n){if(Math.abs(n.frequency.getValueAtTime(e)-t.Frequency(i))<1e-4&&n.getLevelAtTime(e)>1e-5)return n})||this.voices.slice().sort(function(t,i){var n=t.getLevelAtTime(e+this.blockTime),s=i.getLevelAtTime(e+this.blockTime);return n<1e-5&&(n=0),s<1e-5&&(s=0),n-s}.bind(this))[0]},t.PolySynth.prototype.triggerAttack=function(t,e,i){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var n=this._getClosestVoice(e,t);n.triggerAttack(t,e,i),this.log("triggerAttack",n.index,t)}.bind(this)),this},t.PolySynth.prototype.triggerRelease=function(t,e){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var i=this._getClosestVoice(e,t);this.log("triggerRelease",i.index,t),i.triggerRelease(e)}.bind(this)),this},t.PolySynth.prototype.triggerAttackRelease=function(e,i,n,s){if(n=this.toSeconds(n),this.triggerAttack(e,n,s),t.isArray(i)&&t.isArray(e))for(var r=0;r<e.length;r++){var o=i[Math.min(r,i.length-1)];this.triggerRelease(e[r],n+this.toSeconds(o))}else this.triggerRelease(e,n+this.toSeconds(i));return this},t.PolySynth.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},t.PolySynth.prototype.set=function(t,e,i){for(var n=0;n<this.voices.length;n++)this.voices[n].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){return t=this.toSeconds(t),this.voices.forEach(function(e){e.triggerRelease(t)}),this},t.PolySynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this.voices.forEach(function(t){t.dispose()}),this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(21),i(39),i(53)],void 0===(s=function(t){"use strict";return t.PluckSynth=function(e){e=t.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.7},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(30),i(41),i(39),i(1),i(9),i(21)],void 0===(s=function(t){"use strict";return t.NoiseSynth=function(e){e=t.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise(e.noise),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.envelope.attack+this.envelope.decay),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this.noise.stop(t+this.envelope.release),this},t.NoiseSynth.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(21),i(48),i(9),i(41),i(30),i(3),i(26),i(5)],void 0===(s=function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(i){i=t.defaultArg(i,t.MetalSynth.defaults),t.Instrument.call(this,i),this.frequency=new t.Signal(i.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=i.octaves,this._filterFreqScaler=new t.Scale(i.resonance,7e3),this.envelope=new t.Envelope({attack:i.envelope.attack,attackCurve:"linear",decay:i.envelope.decay,sustain:0,release:i.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var n=0;n<e.length;n++){var s=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:i.harmonicity,modulationIndex:i.modulationIndex});s.connect(this._highpass),this._oscillators[n]=s;var r=new t.Multiply(e[n]);this._freqMultipliers[n]=r,this.frequency.chain(r,s.frequency)}this.octaves=i.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(e,i){return e=this.toSeconds(e),i=t.defaultArg(i,1),this.envelope.triggerAttack(e,i),this._oscillators.forEach(function(t){t.start(e)}),0===this.envelope.sustain&&this._oscillators.forEach(function(t){t.stop(e+this.envelope.attack+this.envelope.decay)}.bind(this)),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this._oscillators.forEach(function(e){e.stop(t+this.envelope.release)}.bind(this)),this},t.MetalSynth.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(37),i(21),i(30)],void 0===(s=function(t){"use strict";return t.MembraneSynth=function(e){e=t.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},
t.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e);var n=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(n,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this.oscillator.start(e),0===this.envelope.sustain&&this.oscillator.stop(e+this.envelope.attack+this.envelope.decay),this},t.MembraneSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(38),i(1),i(5),i(25)],void 0===(s=function(t){"use strict";return t.FMSynth=function(e){e=t.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(68),i(12),i(1),i(5),i(25),i(14)],void 0===(s=function(t){"use strict";return t.DuoSynth=function(e){e=t.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this},t.DuoSynth.prototype.getLevelAtTime=function(t){return(this.voice0.getLevelAtTime(t)+this.voice1.getLevelAtTime(t))/2},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(38),i(1),i(5),i(25),i(22),i(3)],void 0===(s=function(t){"use strict";return t.AMSynth=function(e){e=t.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator.set(e.oscillator),this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(72),i(16)],void 0===(s=function(t){"use strict";return t.Sequence=function(){var e=t.defaults(arguments,["callback","events","subdivision"],t.Sequence),i=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),t.isUndef(e.loopEnd)&&t.isDefined(i)&&(this._loopEnd=i.length*this._subdivision),this._loop=!0,t.isDefined(i))for(var n=0;n<i.length;n++)this.add(n,i[n])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Ticks(this._subdivision).toSeconds()}}),t.Sequence.prototype.at=function(e,i){return t.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(t.isArray(i)){var n=Math.round(this._subdivision/i.length);i=new t.Sequence(this._tick.bind(this),i,t.Ticks(n))}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.Ticks(e*this._subdivision+this.startOffset).toSeconds()},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(73),i(80)],void 0===(s=function(t){return t.Pattern=function(){var e=t.defaults(arguments,["callback","values","pattern"],t.Pattern);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,callback:t.noOp,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(18),i(12)],void 0===(s=function(t){"use strict";return t.Vibrato=function(){var e=t.defaults(arguments,["frequency","depth"],t.Vibrato);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(12),i(15)],void 0===(s=function(t){"use strict";return t.Tremolo=function(){var e=t.defaults(arguments,["frequency","depth"],t.Tremolo);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(e){return this._lfoL.sync(e),this._lfoR.sync(e),t.Transport.syncSignal(this.frequency),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(75),i(1),i(5),i(13)],void 0===(s=function(t){"use strict";return t.StereoWidener=function(){var e=t.defaults(arguments,["width"],t.StereoWidener);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._readOnly(["width"]),this._twoTimesWidthMid=new t.Multiply(2),this._twoTimesWidthSide=new t.Multiply(2),this._midMult=new t.Multiply,this._twoTimesWidthMid.connect(this._midMult,0,1),this.midSend.chain(this._midMult,this.midReturn),this._oneMinusWidth=new t.Subtract,this._oneMinusWidth.connect(this._twoTimesWidthMid),this.context.getConstant(1).connect(this._oneMinusWidth,0,0),this.width.connect(this._oneMinusWidth,0,1),this._sideMult=new t.Multiply,this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult,0,1),this.sideSend.chain(this._sideMult,this.sideReturn)},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._twoTimesWidthMid.dispose(),this._twoTimesWidthMid=null,this._twoTimesWidthSide.dispose(),this._twoTimesWidthSide=null,this._oneMinusWidth.dispose(),this._oneMinusWidth=null,this},t.StereoWidener}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(15),i(32),i(3)],void 0===(s=function(t){"use strict";return t.StereoFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.StereoEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(78),i(9),i(10),i(39),i(3),i(76)],void 0===(s=function(t){"use strict";return t.Reverb=function(){var e=t.defaults(arguments,["decay"],t.Reverb);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this.decay=e.decay,this.preDelay=e.preDelay,this.connectEffect(this._convolver)},t.extend(t.Reverb,t.Effect),t.Reverb.defaults={decay:1.5,preDelay:.01},t.Reverb.prototype.generate=function(){return t.Offline(function(){var e=new t.Noise,i=new t.Noise,n=new t.Merge;e.connect(n.left),i.connect(n.right);var s=(new t.Gain).toMaster();n.connect(s),e.start(0),i.start(0),s.gain.setValueAtTime(0,0),s.gain.linearRampToValueAtTime(1,this.preDelay),s.gain.exponentialApproachValueAtTime(0,this.preDelay,this.decay-this.preDelay)}.bind(this),this.decay).then(function(t){return this._convolver.buffer=t.get(),this}.bind(this))},t.Reverb.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this},t.Reverb}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(12),i(23),i(1),i(32),i(18)],void 0===(s=function(t){"use strict";return t.PitchShift=function(){var e=t.defaults(arguments,["pitch"],t.PitchShift);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e;var i=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,i=t.intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,i=t.intervalToFrequencyRatio(e)-1),this._frequency.value=i*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(74),i(1),i(18)],void 0===(s=function(t){"use strict";return t.PingPongDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.PingPongDelay);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(12),i(9),i(15)],void 0===(s=function(t){"use strict";return t.Phaser=function(){var e=t.defaults(arguments,["frequency","octaves","baseFrequency"],t.Phaser);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(e,i,n){for(var s=new Array(e),r=0;r<e;r++){var o=this.context.createBiquadFilter();o.type="allpass",n.connect(o.Q),i.connect(o.frequency),s[r]=o}return t.connectSeries.apply(t,s),s},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(58),i(15),i(26)],void 0===(s=function(t){"use strict";var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],n=[347,113,37];return t.JCReverb=function(){var s=t.defaults(arguments,["roomSize"],t.JCReverb);t.StereoEffect.call(this,s),this.roomSize=new t.Signal(s.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var r=0;r<n.length;r++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=n[r],this._allpassFilters.push(o)}for(var a=0;a<e.length;a++){var h=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(h.resonance),h.resonance.value=i[a],this._allpassFilters[this._allpassFilters.length-1].connect(h),a<e.length/2?h.connect(this.effectReturnL):h.connect(this.effectReturnR),this._feedbackCombFilters.push(h)}this.roomSize.connect(this._scaleRoomSize),t.connectSeries.apply(t,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(53),i(15),i(1),i(19),i(10),i(42)],void 0===(s=function(t){"use strict";var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var n=t.defaults(arguments,["roomSize","dampening"],t.Freeverb);t.StereoEffect.call(this,n),this.roomSize=new t.Signal(n.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(n.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var s=0;s<i.length;s++){var r=this.context.createBiquadFilter();r.type="allpass",r.frequency.value=i[s],this._allpassFiltersL.push(r)}for(var o=0;o<i.length;o++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=i[o],this._allpassFiltersR.push(a)}for(var h=0;h<e.length;h++){var u=new t.LowpassCombFilter(e[h]);h<e.length/2?this.effectSendL.chain(u,this._allpassFiltersL[0]):this.effectSendR.chain(u,this._allpassFiltersR[0]),this.roomSize.connect(u.resonance),this.dampening.connect(u.dampening),this._combFilters.push(u)}t.connectSeries.apply(t,this._allpassFiltersL),t.connectSeries.apply(t,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;this._allpassFiltersR=null;for(var n=0;n<this._combFilters.length;n++)this._combFilters[n].dispose(),this._combFilters[n]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(32),i(1),i(18)],void 0===(s=function(t){"use strict";return t.FeedbackDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.FeedbackDelay);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime,e.maxDelay),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25,maxDelay:1},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(7)],void 0===(s=function(t){"use strict";return t.Distortion=function(){var e=t.defaults(arguments,["distortion"],t.Distortion);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(12),i(15),i(18)],void 0===(s=function(t){"use strict";return t.Chorus=function(){var e=t.defaults(arguments,["frequency","delayTime","depth"],t.Chorus);t.StereoEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(7)],void 0===(s=function(t){"use strict";return t.Chebyshev=function(){var e=t.defaults(arguments,["order"],t.Chebyshev);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t
;for(var e=new Array(4096),i=e.length,n=0;n<i;++n){var s=2*n/i-1;e[n]=0===s?0:this._getCoefficient(s,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(13),i(77)],void 0===(s=function(t){"use strict";return t.BitCrusher=function(){var e=t.defaults(arguments,["bits"],t.BitCrusher);t.Effect.call(this,e);var i=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(i),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(57),i(42),i(8),i(9)],void 0===(s=function(t){"use strict";return t.AutoWah=function(){var e=t.defaults(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return t.gainToDb(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/t.dbToGain(e)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(12),i(60)],void 0===(s=function(t){"use strict";return t.AutoPanner=function(){var e=t.defaults(arguments,["frequency"],t.AutoPanner);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(8),i(12),i(9)],void 0===(s=function(t){"use strict";return t.AutoFilter=function(){var e=t.defaults(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(23),i(10),i(19),i(1),i(22),i(28)],void 0===(s=function(t){"use strict";t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],t.getContext(function(){this.set(e.defaults),this.context.listener=this}.bind(this))},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype.isListener=!0,t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,i){if(this.context.rawContext.listener.positionX){var n=this.now();this.context.rawContext.listener.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this.context.rawContext.listener.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this.context.rawContext.listener.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this.context.rawContext.listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,i,n,s,r){if(this.context.rawContext.listener.forwardX){var o=this.now();this.context.rawContext.listener.forwardX.setTargetAtTime(t,o,this._rampTimeConstant),this.context.rawContext.listener.forwardY.setTargetAtTime(e,o,this._rampTimeConstant),this.context.rawContext.listener.forwardZ.setTargetAtTime(i,o,this._rampTimeConstant),this.context.rawContext.listener.upX.setTargetAtTime(n,o,this._rampTimeConstant),this.context.rawContext.listener.upY.setTargetAtTime(s,o,this._rampTimeConstant),this.context.rawContext.listener.upZ.setTargetAtTime(r,o,this._rampTimeConstant)}else this.context.rawContext.listener.setOrientation(t,e,i,n,s,r);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on("init",function(i){i.listener&&i.listener.isListener?t.Listener=i.listener:t.Listener=new e}),t.Listener}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(24)],void 0===(s=function(t){"use strict";return t.Draw=function(){t.call(this),this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e=t.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=e;){var i=this._events.shift();e-i.time<=this.expiration&&i.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(3)],void 0===(s=function(t){"use strict";var e={};return t.prototype.send=function(i,n){e.hasOwnProperty(i)||(e[i]=this.context.createGain()),n=t.defaultArg(n,0);var s=new t.Gain(n,t.Type.Decibels);return this.connect(s),s.connect(e[i]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this,0,i),this},t.Context.on("init",function(t){t.buses?e=t.buses:(e={},t.buses=e)}),t}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(4)],void 0===(s=function(t){"use strict";return t.CtrlRandom=function(){var e=t.defaults(arguments,["min","max"],t.CtrlRandom);t.call(this),this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),n=i*t+(1-i)*e;return this.integer&&(n=Math.floor(n)),n}}),t.CtrlRandom}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0)],void 0===(s=function(t){"use strict";return t.CtrlMarkov=function(e,i){t.call(this),this.values=t.defaultArg(e,{}),this.value=t.defaultArg(i,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var e=this.values[this.value];if(t.isArray(e))for(var i=this._getProbDistribution(e),n=Math.random(),s=0,r=0;r<i.length;r++){var o=i[r];if(n>s&&n<s+o){var a=e[r];t.isObject(a)?this.value=a.value:this.value=a}s+=o}else this.value=e}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(e){for(var i=[],n=0,s=!1,r=0;r<e.length;r++){var o=e[r];t.isObject(o)?(s=!0,i[r]=o.probability):i[r]=1/e.length,n+=i[r]}if(s)for(var a=0;a<i.length;a++)i[a]=i[a]/n;return i},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(4)],void 0===(s=function(t){"use strict";return t.CtrlInterpolate=function(){var e=t.defaults(arguments,["values","index"],t.CtrlInterpolate);t.call(this),this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],n=this.values[Math.ceil(t)];return this._interpolate(t-e,i,n)}}),t.CtrlInterpolate.prototype._interpolate=function(e,i,n){if(t.isArray(i)){for(var s=[],r=0;r<i.length;r++)s[r]=this._interpolate(e,i[r],n[r]);return s}if(t.isObject(i)){var o={};for(var a in i)o[a]=this._interpolate(e,i[a],n[a]);return o}return(1-e)*(i=this._toNumber(i))+e*(n=this._toNumber(n))},t.CtrlInterpolate.prototype._toNumber=function(e){return t.isNumber(e)?e:this.toSeconds(e)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(44),i(2)],void 0===(s=function(t){return t.Waveform=function(){var e=t.defaults(arguments,["size"],t.Waveform);e.type=t.Analyser.Type.Waveform,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.Waveform,t.AudioNode),t.Waveform.defaults={size:1024},t.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.Waveform.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.Waveform.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.Waveform}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(23),i(10),i(19),i(1),i(22),i(28),i(2)],void 0===(s=function(t){"use strict";return t.Panner3D=function(){var e=t.defaults(arguments,["positionX","positionY","positionZ"],t.Panner3D);t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D,t.AudioNode),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var n=this.now();this._panner.positionX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var n=this.now();this._panner.orientationX.setTargetAtTime(t,n,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,n,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,n,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(59),i(43),i(2)],void 0===(s=function(t){"use strict";return t.MultibandCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor,t.AudioNode),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(10),i(2)],void 0===(s=function(t){"use strict";return t.Mono=function(){t.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)},t.extend(t.Mono,t.AudioNode),t.Mono.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(52),i(51),i(43),i(2)],void 0===(s=function(t){"use strict";return t.MidSideCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor,t.AudioNode),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(44),i(2)],void 0===(s=function(t){"use strict";return t.Meter=function(){var e=t.defaults(arguments,["smoothing"],t.Meter);t.AudioNode.call(this),this.smoothing=e.smoothing,this._rms=0,this.input=this.output=this._analyser=new t.Analyser("waveform",256)},t.extend(t.Meter,t.AudioNode),t.Meter.defaults={smoothing:.8},t.Meter.prototype.getLevel=function(){for(var e=this._analyser.getValue(),i=0,n=0;n<e.length;n++){var s=e[n];i+=s*s}var r=Math.sqrt(i/e.length);return this._rms=Math.max(r,this._rms*this.smoothing),t.gainToDb(this._rms)},t.Meter.prototype.getValue=function(){return this._analyser.getValue()[0]},t.Meter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(43),i(2)],void 0===(s=function(t){"use strict";return t.Limiter=function(){var e=t.defaults(arguments,["threshold"],t.Limiter);t.AudioNode.call(this),this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter,t.AudioNode),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(57),i(88),i(2)],void 0===(s=function(t){"use strict";return t.Gate=function(){var e=t.defaults(arguments,["threshold","smoothing"],t.Gate);t.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new t.Follower(e.smoothing),this._gt=new t.GreaterThan(t.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._follower,this._gt,this.output.gain)},t.extend(t.Gate,t.AudioNode),t.Gate.defaults={smoothing:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return t.gainToDb(this._gt.value)},set:function(e){this._gt.value=t.dbToGain(e)}}),Object.defineProperty(t.Gate.prototype,"smoothing",{get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t}}),t.Gate.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(44),i(2)],void 0===(s=function(t){return t.FFT=function(){var e=t.defaults(arguments,["size"],t.FFT);e.type=t.Analyser.Type.FFT,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.FFT,t.AudioNode),t.FFT.defaults={size:1024},t.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.FFT.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.FFT.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.FFT}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(59),i(3),i(2)],void 0===(s=function(t){"use strict";return t.EQ3=function(){var e=t.defaults(arguments,["low","mid","high"],t.EQ3);t.AudioNode.call(this),this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3,t.AudioNode),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}.apply(e,n))||(t.exports=s)},function(t,e,i){var n,s;n=[i(0),i(95),i(91),i(2)],void 0===(s=function(t){return t.Channel=function(){var e=t.defaults(arguments,["volume","pan"],t.PanVol);t.AudioNode.call(this,e),this._solo=this.input=new t.Solo(e.solo),this._panVol=this.output=new t.PanVol({pan:e.pan,volume:e.volume,mute:e.mute}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),this._readOnly(["pan","volume"])},t.extend(t.Channel,t.AudioNode),t.Channel.defaults={pan:0,volume:0,mute:!1,solo:!1},Object.defineProperty(t.Channel.prototype,"solo",{get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}}),Object.defineProperty(t.Channel.prototype,"muted",{get:function(){return this._solo.muted||this.mute}}),Object.defineProperty(t.Channel.prototype,"mute",{get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}}),t.Channel.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panVol.dispose(),this._panVol=null,this.pan=null,this.volume=null,this._solo.dispose(),this._solo=null,this},t.Channel}.apply(e,n))||(t.exports=s)},function(t,e){t.exports="13.4.9"},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){i(30),i(44),i(152),i(43),i(23),i(47),i(151),i(58),i(150),i(9),i(57),i(41),i(149),i(12),i(148),i(53),i(10),i(147),i(146),i(51),i(52),i(145),i(144),i(59),i(60),i(143),i(95),i(89),i(91),i(19),i(27),i(142),i(141),i(140),i(80),i(139),i(2),i(11),i(79),i(138),i(86),i(20),i(18),i(137),i(35),i(3),i(84),i(136),i(40),i(78),i(62),i(14),i(24),i(33),i(16),i(55),i(83),i(135),i(134),i(133),i(132),i(131),i(130),i(76),i(129),i(8),i(128),i(32),i(127),i(126),i(75),i(125),i(124),i(123),i(122),i(15),i(121),i(120),i(74),i(119),i(118),i(50),i(73),i(72),i(117),i(116),i(115),i(114),i(113),i(21),i(112),i(111),i(25),i(68),i(110),i(109),i(108),i(107),i(38),i(96),i(81),i(34),i(63),i(97),i(66),i(106),i(92),i(98),i(90),i(29),i(22),i(93),i(105),i(88),i(87),i(77),i(5),i(94),i(104),i(61),i(26),i(42),i(1),i(36),i(13),i(85),i(103),i(7),i(28),i(70),i(31),i(69),i(48),i(102),i(39),i(37),i(17),i(82),i(67),i(101),i(49),i(71),i(6),i(56),i(100),i(46),i(99),i(54),i(65),i(64),i(45),i(4),t.exports=i(0)}])})},{}],10:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("paper"),a=n(o),h=t("events"),u=n(h),l=function(){function t(e,i,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];s(this,t),this.showTracks=!1,this.showBackground=!1,this.showLines=a,this.center=e,this.radius=i,this.TineClass=n,this.speed=0,this.path=this.showBackground?t.createPath(e,i):null,this.lines=this.showLines?t.createLines(r):null,this.zero=t.createZero(e,i),this.tines=this.createTines(r,o),this.events=new u.default}return r(t,[{key:"createTines",value:function(t,e){for(var i=[],n=this.radius/t*2,s=.5*n/2,r=this.radius-4*n/2,o=0;o<t;o+=1){var h=.5+3.5/(t-1)*o,u=s+(r-s)/(t-1)*o,l=o+1,c=e[o%e.length];this.showTracks&&(this.tracks=[],this.tracks.push(new a.default.Path.Circle(this.center,u).strokeColor="white")),i.push(new this.TineClass(o+1,this,u,n*h,c,l))}return i}},{key:"onFrame",value:function(t){this.tines.forEach(function(e){return e.onFrame(t)}),this.showLines&&this.moveLines()}},{key:"onZero",value:function(t){this.events.emit("zero",t.id)}},{key:"setSpeed",value:function(t){this.speed=1*t/(2*this.tines.length)}},{key:"moveLines",value:function(){var t=this;this.tines.forEach(function(e,i){0!==i&&(t.lines[i-1].segments[1].point=e.path.position),i!==t.tines.length-1&&(t.lines[i].segments[0].point=e.path.position)})}}],[{key:"createPath",value:function(t,e){var i=new a.default.Path.Circle(t,e);return i.fillColor="white",i.opacity=.05,i}},{key:"createZero",value:function(t,e){var i=new a.default.Path.Line(t,t.add(new a.default.Point(e,0)));return i.strokeColor="#fff",i}},{key:"createLines",value:function(t){for(var e=[],i=0;i!==t;i+=1)e.push(new a.default.Path.Line({from:[0,0],to:[1,1],strokeColor:"#fff",strokeWidth:1}));return e}}]),t}();i.default=l},{events:4,paper:6}],11:[function(t,e,i){"use strict";function n(t){for(var e=[],i=0;i<t;i+=1)e.push(new r.default.Color({hue:0+330*(1-i/(t-1)),saturation:1,brightness:1,alpha:1}));return e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=n;var s=t("paper"),r=function(t){return t&&t.__esModule?t:{default:t}}(s)},{paper:6}],12:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("events"),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(e){var i=this;n(this,t),this.down=!1,this.value=0,this.min=-1,this.max=1,this.snapMargin=.25,this.snapPoints=[{snapTo:0,from:-1*this.snapMargin,to:this.snapMargin}],this.element=e,this.snapElements=this.snapPoints.map(function(t){return i.createSnapElement(t)}),this.snapElements.forEach(function(t){return i.element.appendChild(t)}),this.handle=document.createElement("div"),this.element.appendChild(this.handle),
this.handle.setAttribute("class","handle"),this.events=new o.default,this.element.addEventListener("mousedown",this.onMouseDown.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this)),this.setValue(this.value)}return s(t,[{key:"createSnapElement",value:function(t){var e=document.createElement("div");e.setAttribute("class","snap");var i=this.valueToRatio(t.snapTo);return e.style.left=100*i+"%",e}},{key:"onMouseDown",value:function(t){0===t.button&&(this.down=!0),this.onSlideTo(t.clientX)}},{key:"onMouseMove",value:function(t){this.down&&this.onSlideTo(t.clientX)}},{key:"onMouseUp",value:function(t){0===t.button&&(this.setValue(this.snapValue(this.value)),this.down=!1)}},{key:"onSlideTo",value:function(t){var e=this.element.getBoundingClientRect(),i=Math.min(Math.max(0,t-e.left),e.width),n=i/e.width;this.setValue(this.ratioToValue(n))}},{key:"moveHandle",value:function(t){var e=this.valueToRatio(t);this.handle.style.left=100*e+"%"}},{key:"ratioToValue",value:function(t){return this.min+t*(this.max-this.min)}},{key:"valueToRatio",value:function(t){return(t-this.min)/(this.max-this.min)}},{key:"snapValue",value:function(t){var e=t;return this.snapPoints.forEach(function(t){e>=t.from&&e<=t.to&&(e=t.snapTo)}),e}},{key:"setValue",value:function(t){this.value=t,this.moveHandle(t),this.events.emit("changed",this.value)}}]),t}();i.default=a},{events:4}],13:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(n)},u=t("paper"),l=n(u),c=t("./tine"),p=n(c),f=function(t){function e(){return s(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"buildPath",value:function(){var t=Math.sqrt(Math.pow(this.size,2)/2),e=new l.default.Path.Rectangle(new l.default.Point(0,0),new l.default.Size(t,t));return e.fillColor=this.fillColor,e.applyMatrix=!1,e}},{key:"onFrame",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onFrame",this).call(this,t),this.path.rotation=(-4*this.parent.tines[0].angle+45)%360}}]),e}(p.default);i.default=f},{"./tine":14,paper:6}],14:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("paper"),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(e,i,s,r,o,a){n(this,t),this.id=e,this.parent=i,this.radius=s,this.size=r,this.fillColor=o,this.speedFactor=a,this.path=this.buildPath(),this.setAngle(0)}return s(t,[{key:"setAngle",value:function(t){(t>=360||t<0)&&this.onZero(),this.angle=t>=0?t%360:360+t,this.path.position=new o.default.Point(this.radius,0).rotate(this.angle).add(this.parent.center)}},{key:"onFrame",value:function(t){0!==this.parent.speed&&this.setAngle(this.angle+360*t.delta*this.parent.speed*this.speedFactor)}},{key:"onZero",value:function(){this.path.tween({fillColor:"#fff",scaling:new o.default.Point(1.25,1.25)},{fillColor:this.fillColor.toCSS(),scaling:new o.default.Point(1,1)},{duration:500,easing:"easeInQuad"}),this.parent.onZero(this)}},{key:"buildPath",value:function(){var t=new o.default.Path.Circle(new o.default.Point(0,0),this.size/2);return t.fillColor=this.fillColor,t.applyMatrix=!1,t}}]),t}();i.default=a},{paper:6}],15:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("paper"),r=n(s),o=t("tone"),a=n(o),h=t("query-string"),u=n(h),l=t("./lib/disc"),c=n(l),p=t("./lib/tine"),f=n(p),d=t("./lib/tine-square"),_=(n(d),t("./lib/slider")),g=n(_),y=t("./lib/rainbow"),v=n(y),m=u.default.parse(window.location.search);r.default.setup($("#mainCanvas")[0]);for(var b=f.default,x=(0,v.default)(48),w=r.default.view.center,S=Math.min(r.default.view.size.height,r.default.view.size.width)/2,T=new c.default(w,S,b,48,x,void 0!==m.showLines&&"0"!==m.showLines),k=[],C=0;48!==C;C+=1)k.push(a.default.Frequency("A2").transpose(C));var A=new a.default.PolySynth(48,a.default.Synth).toMaster(),P=[];if(T.events.on("zero",function(t){P.push(k[t-1])}),document.addEventListener("wheel",function(t){T.setSpeed(Math.min(t.deltaY/5e3,1))}),r.default.view.onFrame=function(t){P.length=0,T.onFrame(t),A.triggerAttackRelease(P,"8n")},m.screenControls&&"0"!==m.screenControls){var O=$("<div></div>").attr("id","speedSlider").addClass("slider").appendTo(".main");new g.default(O[0]).events.on("changed",function(t){T.setSpeed(t)})}r.default.view.draw()},{"./lib/disc":10,"./lib/rainbow":11,"./lib/slider":12,"./lib/tine":14,"./lib/tine-square":13,paper:6,"query-string":7,tone:9}]},{},[15]);
//# sourceMappingURL=bundle.js.map
